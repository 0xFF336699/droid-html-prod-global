{"version":3,"file":"static/chunks/3380-548067b0bb8de015.js","mappings":"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","sources":["webpack://_N_E/../../../src/events/index.ts","webpack://_N_E/./src/markets/markets-script-dev-lib.ts","webpack://_N_E/../../node_modules/.pnpm/react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3/node_modules/react-i18next/dist/es/index.js","webpack://_N_E/../../libs/fanfanlo/src/utils/socket/socket-utils.ts","webpack://_N_E/../../markets/market-lib/src/types/market.intf.ts","webpack://_N_E/../../../src/react/index.ts","webpack://_N_E/../../libs/droid/project/src/project/ui/components/CreateProjectButton.tsx","webpack://_N_E/../../libs/droid/project/src/project/utils/projectUtils.ts","webpack://_N_E/../../libs/droid/project/src/project/ui/components/DeleteProjectButton.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/project/ProjectUI.tsx","webpack://_N_E/../../libs/droid/project/src/project/ui/projects/ProjectsInfoItemUI.tsx","webpack://_N_E/../../libs/droid/android/src/android/scripts/permissions/permissions.intf.ts","webpack://_N_E/../../libs/droid/android/src/android/scripts/permissions/permissionUtils.ts","webpack://_N_E/./src/components/a11y/open-a11y-node-button.tsx","webpack://_N_E/./src/components/android-settings/AndroidSettingsInfo.tsx","webpack://_N_E/../../libs/droid/android/src/android/scripts/app/app-kill-self.ts","webpack://_N_E/./src/components/app/kill-self/KillSelf.tsx","webpack://_N_E/./src/components/markets/AddExternalMarketButton.tsx","webpack://_N_E/./src/components/markets/main-page-add-buttons/MainPageAddButtons.tsx","webpack://_N_E/./src/components/page/markets-dev-settings/open-link-button/OpenLinkButton.tsx","webpack://_N_E/./src/livekit-meeting/MeetingRoom.new.tsx","webpack://_N_E/./src/markets/markets-script-lib.ts","webpack://_N_E/./src/markets/markets-script-manager.ts","webpack://_N_E/../../libs/droid/android/src/android/scripts/a11y/a11y-info.ts","webpack://_N_E/../../libs/app/model/src/mc/android-permission/androidPermission.data.ts","webpack://_N_E/../../libs/fanfanlo/src/utils/browser/use-tab-activity.tsx","webpack://_N_E/./src/components/permissions/accessibility/AccessibilityInfo.tsx","webpack://_N_E/./src/components/permissions/components/Components.tsx","webpack://_N_E/../../libs/droid/android/src/android/scripts/floating/floating-info.ts","webpack://_N_E/./src/components/permissions/floating/FloatingInfo.tsx","webpack://_N_E/./src/components/permissions/home-page-permissions/HomePagePermissions.tsx","webpack://_N_E/./src/pages/home/index.tsx","webpack://_N_E/../../src/index.ts","webpack://_N_E/./src/markets/market-dev-socket-setting-data.ts","webpack://_N_E/../../../src/i18n/index.ts","webpack://_N_E/./src/components/navbar/NavBar.tsx","webpack://_N_E/./src/pages/home/test-script.tsx","webpack://_N_E/./src/markets/market-html-utils.ts","webpack://_N_E/../../../src/watcher/watchUpdates.ts","webpack://_N_E/../../../src/watcher/parentProxy.ts","webpack://_N_E/../../../src/watcher/parentWatchProxy.ts","webpack://_N_E/../../../src/storage/indexed-db-utils.ts","webpack://_N_E/../../../src/storage/store-utils.ts","webpack://_N_E/../../../src/storage/index.ts","webpack://_N_E/../../libs/fanfanlo/src/mui/dialog/ButtonConfirm.tsx","webpack://_N_E/./src/components/permissions/components/components.module.scss","webpack://_N_E/./src/markets/market-dev-socket.ts","webpack://_N_E/../../libs/app/ui/src/components/tabbar/Tabbar.tsx"],"sourcesContent":["export * from './DataEvent'\r\nexport * from './Event'\r\nexport * from './event-decorate'\r\nexport * from './EventDispatcher'\r\nexport * from './IEventDispatcher'\r\nexport * from './PropertyChangeEvent'","import { autoJsStoreUtils } from \"@droid/android\"\r\nimport { IStoreWithData, storeUtils, toProxy } from \"@fanfanlo\"\r\nimport { IAndroidWatchFile, IMarketDevConnectEventType, IMarketDevGetAllEventData, IMarketDevServerEventType, WatchResourceType } from \"@market/lib\"\r\nimport { marketsDevSocket } from \"./market-dev-socket\"\r\nimport { objectCountUtils } from \"@fanfanlo\"\r\ninterface IMarketDevLibInfo{\r\n    allMarketLibData?:IMarketDevGetAllEventData\r\n    \r\n}\r\n// marketDevLibDatadevLibInfo\r\n// \r\nconst marketDevLibData = toProxy<IMarketDevLibInfo>({})\r\nlet devLibInfo:IStoreWithData<IMarketDevLibInfo>// = storeUtils.getNamespaceStoreWithData('devLibInfo', {defData:{}, forceReset:false});\r\n\r\nfunction getMarketScriptDataNsPrefix() {\r\n    return 'market-script-data'\r\n}\r\n\r\nfunction createMarketScriptDataNsPath(ns: string) {\r\n    return `${getMarketScriptDataNsPrefix()}/${ns}`\r\n}\r\n\r\nasync function writeNsAllFiles(ns: string, files: Record<string, string>) {\r\n    const nsPath = createMarketScriptDataNsPath(ns)\r\n    const oldFiles = autoJsStoreUtils.read<string[]>(nsPath) || [];\r\n    for (const name of Object.keys(files)) {\r\n        const index = oldFiles.indexOf(name);\r\n        if (index > -1) {\r\n            oldFiles.splice(index, 1);\r\n        }\r\n        const content = files[name]\r\n        autoJsStoreUtils.write(`${nsPath}/${name}`, content)\r\n    }\r\n    for (const name of oldFiles) {\r\n        removeFile(`${nsPath}/${name}`)\r\n    }\r\n}\r\n\r\nfunction writeFile(name: string, content: string) {\r\n\r\n}\r\n\r\nfunction readNsAllFiles(ns: string) {\r\n\r\n}\r\n\r\nfunction readFile(name: string) {\r\n\r\n}\r\n\r\nfunction removeFile(name: string) {\r\n\r\n}\r\n\r\nfunction getAllMarkets() {\r\n\r\n}\r\nfunction listenDev(){\r\n    marketsDevSocket.dispatcher.addListener(IMarketDevConnectEventType.getAllScripts, onGetAllScript)\r\n    marketsDevSocket.dispatcher.addListener(IMarketDevServerEventType.update, onFileUpdate)    \r\n}\r\n\r\nfunction onGetAllScript(data:IMarketDevGetAllEventData){\r\n    // console.log('onGetAllScript=2', data)\r\n    // console.log('devLibInfo.data=', devLibInfo.data)\r\n    devLibInfo.data.allMarketLibData = data;\r\n    // \r\n    marketDevLibData.allMarketLibData = devLibInfo.data.allMarketLibData;\r\n    // console.log('from onGetAllScript look look id', objectCountUtils.getObjectCount(devLibInfo.data.allMarketLibData.resources))\r\n}\r\n\r\nfunction onFileUpdate(data:IAndroidWatchFile){\r\n    if(data.client.resourceType == WatchResourceType.Html){\r\n        if(!devLibInfo.data.allMarketLibData)return;\r\n        for(const html of devLibInfo.data.allMarketLibData.htmls){\r\n            if(html.client.path == data.client.path){\r\n                html.content = data.content;\r\n                return;\r\n            }\r\n        }\r\n    }else if(data.client.resourceType == WatchResourceType.Js){\r\n        if(!devLibInfo.data.allMarketLibData)return;\r\n        for(let index = 0; index < devLibInfo.data.allMarketLibData.resources.length; index ++){\r\n            const script = devLibInfo.data.allMarketLibData.resources[index];\r\n            if(script.client.path == data.client.path){\r\n                devLibInfo.data.allMarketLibData.resources[index] = data;\r\n                console.log('market script dev scripts update script', data)\r\n                // devLibInfo.data.allMarketLibData.resources = [...devLibInfo.data.allMarketLibData.resources];\r\n                // console.log('update data', data);\r\n                // console.log('look look id', objectCountUtils.getObjectCount(devLibInfo.data.allMarketLibData.resources), devLibInfo.data.allMarketLibData.resources)\r\n                return;\r\n            }\r\n        }\r\n    }else{\r\n        // unknown resource type\r\n    }\r\n}\r\nlet isInitialized = false;\r\nasync function init() {\r\n    if(isInitialized){\r\n        return;\r\n    }\r\n    isInitialized = true;\r\n    listenDev();\r\n    devLibInfo = await storeUtils.getNamespaceStoreWithData('devLibInfo', {defData:{}, forceReset:false});\r\n    marketDevLibData.allMarketLibData = devLibInfo.data.allMarketLibData\r\n}\r\nexport const marketsDevScriptLib = {\r\n    writeFile,\r\n    readFile,\r\n    writeNsAllFiles,\r\n    readNsAllFiles,\r\n    getAllMarkets,\r\n    init,\r\n    marketDevLibData,\r\n}\r\n","export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3\\\\node_modules\\\\react-i18next\\\\dist\\\\es\\\\index.js\"","import validator from \"validator\";\r\nimport { loadI18nValue } from \"../../i18n\";\r\nexport function isValidWebSocketURL(url: string): boolean {\r\n    if(!url)return false;\r\n    return validator.isURL(url, { protocols: ['ws','wss'], require_protocol: true });\r\n  }\r\n  \r\n\r\nexport enum SocketConnectStatusEnum {\r\n    connecting = \"connecting\",\r\n    connected = \"connected\",\r\n    disconnecting = \"disconnecting\",\r\n    disconnected = \"disconnected\",\r\n    waitRetry = \"waitRetry\"\r\n}\r\n\r\nexport async function getSocketConnectStatusEnumI18n(status:SocketConnectStatusEnum){\r\n    return await loadI18nValue('fanfanlo/utils/socket/content', `status.${status}`);\r\n}","export enum ScriptType {\r\n    // \r\n    // \r\n    // router\r\n    // router.go({url:'/script-setting', script:'function(){//code is here}', pagePath:'/all-script-setting/#your-namespace/script/script001'})\r\n    // all-script-setting\r\n    // your-namespace \r\n    // url jsurlscriptscript\r\n    // script \r\n    // urlscriptstable\r\n    // script001 \r\n    // pagePath\r\n    Script = 'script',\r\n    Market = 'market'\r\n}\r\nexport enum WatchResourceType {\r\n    // jsiframe\r\n    Js = 'js',\r\n    // htmlhtmliframe.\r\n    Html = 'html'\r\n}\r\n\r\nexport enum IMarketDevConnectEventType{\r\n    getAllScripts = 'getAllScripts'\r\n}\r\n// clientsocketserverserver\r\nexport enum IMarketDevClientEmitEventType{\r\n    init = 'init'\r\n}\r\n// serversocket\r\nexport enum IMarketDevServerEventType{\r\n    update = 'update',\r\n}\r\n\r\n// export interface IMarketDevFileUpdateEventData{\r\n//     filePath:string,\r\n//     conf:IClientWatchFile\r\n// }\r\n\r\nexport interface IMarketDevFileUpdateEvent extends IMarketDevEvent<IAndroidWatchFile>{\r\n    type: IMarketDevServerEventType.update,\r\n    data:IAndroidWatchFile\r\n}\r\n\r\nexport interface IMarketDevGetAllEventData{\r\n    resources:IAndroidWatchFile[]\r\n    htmls:IAndroidWatchFile[]\r\n}\r\nexport interface IMarketDevGetAllEvent extends IMarketDevEvent<IMarketDevGetAllEventData>{\r\n    type: IMarketDevConnectEventType.getAllScripts,\r\n    data:IMarketDevGetAllEventData\r\n}\r\nexport type IMarketDevEventType = IMarketDevConnectEventType | IMarketDevClientEmitEventType | IMarketDevServerEventType;\r\nexport interface IMarketDevEvent<T>{\r\n    type: IMarketDevEventType,\r\n    data:T\r\n}\r\ntype NamespaceType = string;\r\nexport interface IScriptData{\r\n    ns:NamespaceType;\r\n    name:string;\r\n    version?:string;\r\n    url?:string;\r\n    content?:string;\r\n    summary?:string;\r\n    description?:string;\r\n    doc?:string;\r\n    docType?:string\r\n    id?:string\r\n}\r\nexport interface IScriptFile extends IScriptData{\r\n\r\n    //  \r\n    // \r\n    // \r\n    // 0xFF336699/e-commerce\r\n    // ns:NamespaceType\r\n    resourceType:WatchResourceType\r\n    scriptType:ScriptType\r\n    // \r\n    // url?:string;\r\n}\r\n\r\nexport interface IClientWatchFile extends IScriptFile{\r\n    // \r\n    path:string;\r\n    //uiuiexport {ScriptItem, MarketItem, MarketPage}\r\n    // isUi:boolean\r\n}\r\nexport interface IClientScriptConf extends IClientWatchFile{\r\n}\r\n\r\nexport interface IClientHtmlConf extends IClientWatchFile{\r\n    resourcesPath:string\r\n    resourcesUrl:string\r\n}\r\n\r\nexport interface IAndroidWatchFile{\r\n    client:IClientWatchFile\r\n    content:string\r\n}\r\n\r\n// mapns\r\n// nsnmarket\r\n// nsns+market or scriptmarket\r\n// ns\r\n// `${developerNs}/markets/${market}`\r\n// `${developerNs}/markets/${market}/${script}`\r\n// `${developerNs}/scripts/${script}`\r\n// \r\nexport type ScriptMap = Record<NamespaceType, IAndroidWatchFile>;","\r\nexport * from './global.index';\r\nexport * from './createTypedContext';\r\nexport * from './ContextWrapper';\r\nexport * from './AsyncContextLoader';","import { createProjectDefultData, IProjectData, projectStore } from \"@droid/project-interface\"\r\nimport { Button } from \"@mui/material\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { useRouter } from \"next/router\"\r\nexport const CreateProjectButton = () => {\r\n    const {t} = useTranslation(\"droid-project/project/ui/components/content\")\r\n    const router = useRouter()\r\n    async function onCreateProjectClick(){\r\n        const project:IProjectData = createProjectDefultData()\r\n        projectStore.addDraft(project)\r\n        const path = `/project-editor?id=${project.id}`\r\n        await router.prefetch(path)\r\n        router.push(path)\r\n    }\r\n    return <span><Button data-id={\"create-project-button.b79975b3-cc10-4e3e-bc05-478a98c925b5\"} \r\n    data-typeof-create-project-id=\"create-project-btn-from-ui-components-create-project-button\"\r\n    id=\"typeof-create-project-id-create-project-btn-from-ui-components-create-project-button\"\r\n    onClick={onCreateProjectClick}>{t('content.create')}</Button></span>\r\n}\r\n\r\n","import { IProjectData } from \"@droid/project-interface\"\r\n\r\nexport const projectUtils = {\r\n    getProjectName: (project?: IProjectData):string => {\r\n        return project?.localName || project?.name || project?.id.slice(project?.id.length - 8) || ''\r\n    }\r\n}\r\n\r\n","import { ProjectContext, projectStore } from \"@droid/project-interface\"\r\nimport { ButtonConfirm } from \"@fanfanlo\"\r\nimport { Box, Button } from \"@mui/material\"\r\nimport { useContext } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nexport function DeleteProjectButton() {\r\n    const { t } = useTranslation(\"droid-project/project/ui/components/content\")\r\n    const project = useContext(ProjectContext)\r\n    const projectId = project.id\r\n    const handleDelete = () => {\r\n        projectStore.deleteProject(projectId)\r\n    }\r\n    const content = <Box style={{textAlign: 'center'}}>\r\n        <span style={{color:\"#FF0000\"}}>{project.name}</span>\r\n        <br/>\r\n        <span>{t('content.confirmDelete')}</span>\r\n    </Box>\r\n    return (\r\n        <>\r\n            <ButtonConfirm\r\n            title={t('content.title')}  \r\n            content={content}\r\n            onConfirm={handleDelete}>\r\n                <Button\r\n                id=\"project-simple-title-list-del-btn\"\r\n                data-id=\"project-simple-title-list-del-btn\"\r\n                >\r\n                    {t('content.delete')}\r\n                </Button>\r\n            </ButtonConfirm>\r\n        </>\r\n    )\r\n}\r\n","import { childToProjectDataUtils, IProjectData, ProjectContext } from \"@droid/project-interface\";\r\nimport { Box, Button, Grid2 } from \"@mui/material\";\r\nimport { useRouter } from \"next/router\";\r\nimport { PropsWithChildren } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { projectUtils } from \"../../utils/projectUtils\";\r\nimport { DeleteProjectButton } from \"../components/DeleteProjectButton\";\r\nfunction ProjectName({ project }: PropsWithChildren & { project: IProjectData }) {\r\n    const router = useRouter()\r\n    const { t } = useTranslation('droid-project/project/ui/project/content')\r\n    function edit() {\r\n        const path = `/project-editor?id=${project.id}`\r\n        router.push(path, undefined, {shallow: true})\r\n    }\r\n    return (\r\n        <Grid2 container spacing={2} sx={{ width: \"100%\" }}\r\n        >\r\n            <Grid2 size={\"grow\"}>\r\n                <span >{projectUtils.getProjectName(project)}</span>\r\n            </Grid2>\r\n            <Grid2 container spacing={2}>\r\n                <Button\r\n                    {...childToProjectDataUtils.getProjectElementsId({ project }, 'project-list-edit-btn')}\r\n                   \r\n                    data-listof-project-list-edit-btn-id={project.id} \r\n                    id=\"project-simple-title-list-edit-btn\" \r\n                    data-id=\"project-simple-title-list-edit-btn\" \r\n                    onClick={edit}>{t('content.project.edit')}</Button>\r\n                <DeleteProjectButton />\r\n            </Grid2>\r\n        </Grid2>\r\n    )\r\n}\r\n\r\nexport function ProjectUI({ project }: PropsWithChildren & { project: IProjectData }) {\r\n    return (\r\n        <ProjectContext.Provider value={project}>\r\n            <Box sx={{ width: \"100%\", backgroundColor: \"#f0f0f0\", padding: 1 }}\r\n                data-id={project.id}\r\n                {...childToProjectDataUtils.getProjectElementsId({ project })}>\r\n                <ProjectName project={project} />\r\n            </Box>\r\n        </ProjectContext.Provider>\r\n    )\r\n}","import { IProjectData, projectStore } from \"@droid/project-interface\"\r\nimport { loadI18nValue, watchUpdates } from \"@fanfanlo\"\r\nimport { Box, List, ListItem } from \"@mui/material\"\r\nimport { use, useEffect, useState } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nimport { CreateProjectButton } from \"../components/CreateProjectButton\"\r\nimport { ProjectUI } from \"../project/ProjectUI\"\r\nfunction ProjectsTitle() {\r\n    const { t } = useTranslation('droid-project/project/ui/projects/content')\r\n    // const v = use(loadI18nValue('droid-project/project/ui/projects/content', 'content.projects'))\r\n    // console.log('ttttttttttttttttttttttt', v, 'tttt', t)\r\n    return <div>\r\n        <h4>{t('content.projects')}</h4>\r\n        {/* <h4>{v}</h4> */}\r\n    </div>\r\n}\r\n\r\nfunction ProjectList({ projects }: { projects: IProjectData[] }) {\r\n    return (\r\n        <List sx={{width:\"100%\"}}>\r\n            {projects.length > 0 && projects.map((project) => (\r\n                <ListItem sx={{width:\"100%\"}} key={project.id}>\r\n                    <ProjectUI key={project.id} project={project} />\r\n                </ListItem>\r\n            ))}\r\n        </List>\r\n    )\r\n}\r\nfunction Projects() {\r\n    const { t } = useTranslation('droid-project/project/ui/projects/content')\r\n\r\n    const [projects, setProjects] = useState<IProjectData[]>(projectStore.getListCopy())\r\n    useEffect(() => {\r\n        const unsub = watchUpdates(projectStore.list, () => {\r\n            setProjects(projectStore.getListCopy())\r\n        })\r\n        return () => {\r\n            unsub()\r\n        }\r\n    }, [])\r\n    return <Box>\r\n        <CreateProjectButton />\r\n        {projects.length == 0 && <Box>\r\n            <Box>\r\n                <span>{t('content.noProjects')}</span>\r\n                {/* <CreateProjectButton /> */}\r\n                <span>{t('content.orFindFromMarket')}</span>\r\n            </Box>\r\n        </Box>}\r\n        {projects.length > 0 && <ProjectList projects={projects} />}\r\n    </Box>\r\n}\r\n\r\nexport function ProjectsUI() {\r\n    return (<Box>\r\n        <ProjectsTitle />\r\n        <Projects />\r\n    </Box>)\r\n}\r\n","\nexport enum PermissionAskStatus{\n    asking = \"asking\",\n    granted = \"granted\",\n    denied = \"denied\",\n    \n}\nexport type askPanelFunctionCallback = (toAsk:boolean)=>void;\nexport type askPanelFunction = (result:IPermissionResult, callback:askPanelFunctionCallback)=>void;\nexport type askPermissionsBack = (stoped:boolean, granted:boolean, result?:IPermissionAskResult) =>void;\nexport interface IPermissionAskResult{\n    isGranted:boolean\n    status:PermissionAskStatus\n    permissionResult?:IPermissionResult\n    unsubListener?:()=>void\n}\n/**\n * Represents the result of a permission check operation\n */\nexport interface IPermissionResult {\n    /**\n     * Event name for permission check completion\n     */\n    completionEventName: string;\n    \n    /**\n     * List of denied permission names\n     */\n    deniedPermissions: string[];\n    \n    /**\n     * List of grant results\n     */\n    grantResults: IPermissionGrantResult[];\n    \n    /**\n     * List of granted permission names\n     */\n    grantedPermissions: string[];\n    \n    /**\n     * Name of the permission group\n     */\n    groupName: string;\n    \n    /**\n     * Whether all requested permissions are granted\n     */\n    isAllGranted: boolean;\n    \n    /**\n     * List of permissions that were permanently denied\n     */\n    permanentlyDeniedPermissions: string[];\n    \n    /**\n     * List of all permissions that were requested\n     */\n    requestedPermissions: string[];\n}\n\n/**\n * Represents the result of a single permission grant request\n */\nexport interface IPermissionGrantResult {\n    /**\n     * The permission name\n     */\n    permission: string;\n    \n    /**\n     * Grant result code (0 = granted, -1 = denied)\n     */\n    result: number;\n    \n    /**\n     * Whether the permission was granted\n     */\n    isGranted: boolean;\n    \n    /**\n     * Whether the permission was permanently denied\n     */\n    isPermanentlyDenied: boolean;\n}\n\n/**\n * Represents a permission group\n */\nexport interface IPermissionGroup {\n    /**\n     * The name of the permission group\n     */\n    name: string;\n    \n    /**\n     * List of permissions in this group\n     */\n    permissions: string[];\n    \n    /**\n     * Whether all permissions in this group are granted\n     */\n    isAllGranted: boolean;\n}\n\n/**\n * Represents the status of a permission check request\n */\nexport interface IPermissionCheckStatus {\n    /**\n     * The permission being checked\n     */\n    permission: string;\n    \n    /**\n     * Whether the permission is granted\n     */\n    isGranted: boolean;\n    \n    /**\n     * Whether the permission is permanently denied\n     */\n    isPermanentlyDenied: boolean;\n    \n    /**\n     * The grant result code\n     */\n    grantResult: number;\n}\n\n/**\n * Represents a permission check request\n */\nexport interface IPermissionCheckRequest {\n    /**\n     * The permission to check\n     */\n    permission: string;\n    \n    /**\n     * Optional message to show to the user\n     */\n    message?: string;\n    \n    /**\n     * Whether to show a rationale if permission is denied\n     */\n    showRationale?: boolean;\n}","import { autoWebViewJs } from \"../../AutoWebViewJs\"\r\nimport { askPanelFunction, IPermissionAskResult, IPermissionResult, PermissionAskStatus, askPermissionsBack } from \"./permissions.intf\";\r\nimport { Log } from \"@fanfanlo\";\r\nconst fileLog = new Log(false, 'permissionUtils');\r\nfunction checkPermissions(permissions:string[]):IPermissionAskResult{\r\n    const fnLog = fileLog.sub(false, 'checkPermissions_fn')\r\n    const script = `\r\n    com.fanfanlo.lib.permission.PermissionRequestManager.checkPermissions(${JSON.stringify(permissions)});\r\n    `\r\n    const {javaResultData, javaResultString, errMsg} = autoWebViewJs.callScript<IPermissionResult>(script);\r\n    fnLog.info('checkPermissions_fn javaResultData=', javaResultData, 'javaResultString=', javaResultString, 'errMsg=', errMsg)\r\n    const result:IPermissionAskResult = {\r\n        isGranted:javaResultData?.isAllGranted || false,\r\n        status:javaResultData?.isAllGranted ? PermissionAskStatus.granted : PermissionAskStatus.asking,\r\n        permissionResult:javaResultData\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction ask(checkResult:IPermissionAskResult, permissions:string[], completeEventName:string, askPermissionsBack:askPermissionsBack ){\r\n    const fnLog = fileLog.sub(false, 'ask_fn')\r\n    const script = `\r\n    com.fanfanlo.lib.permission.PermissionRequestManager.requestMultiplePermissions(${JSON.stringify(permissions)}, \"${completeEventName}\");\r\n    `;\r\n    fnLog.info('script=', script)\r\n    autoWebViewJs.callScript(script);\r\n    function onEvent(){\r\n        fnLog.info('onEvent_fn')\r\n        const checkResult = checkPermissions(permissions)\r\n        askPermissionsBack(false, checkResult.isGranted, checkResult);\r\n    }\r\n    window.addEventListener(completeEventName, onEvent);\r\n    function unsubListener (){\r\n        fnLog.info('unsubListener_fn')\r\n        window.removeEventListener(completeEventName, onEvent);\r\n    }\r\n    checkResult.unsubListener = unsubListener;\r\n}\r\nfunction askPermissions(permissions:string[], completeEventName:string, askPermissionsBack:askPermissionsBack, askPanelFunction? :askPanelFunction):IPermissionAskResult{\r\n    const fnLog = fileLog.sub(false, \"askPermission_fn\")\r\n    const checkResult = checkPermissions(permissions)\r\n    fnLog.info('askPermission_fn checkResult=', checkResult)\r\n    if(checkResult.isGranted){\r\n        fnLog.info(\"askPermission_fn checkResult.isGranted\")\r\n        return checkResult;\r\n    }\r\n    fnLog.info('askPermission_fn askPanelFunction=', !!askPanelFunction)\r\n    if(askPanelFunction){\r\n        if(!checkResult.permissionResult){\r\n            fnLog.error('askPermission_fn checkResult.permissionResult is null');\r\n            throw new Error('checkResult.permissionResult is null');\r\n        }\r\n        askPanelFunction(checkResult.permissionResult!, (toAsk)=>{\r\n            fnLog.info(\"askPermissions_fn askPanelFunction toAsk=\", toAsk)\r\n            if(toAsk){\r\n                ask(checkResult, permissions, completeEventName, askPermissionsBack);\r\n            }else{\r\n                askPermissionsBack(true, false)\r\n            }\r\n        })\r\n    }else{\r\n        ask(checkResult, permissions, completeEventName, askPermissionsBack);\r\n    }\r\n    return checkResult\r\n}\r\nexport const permissionUtils = {\r\n    askPermissions,\r\n}","import { androidDispatchers, autoWebViewJs, IPermissionAskResult, IPermissionResult, Manifest, openHtmlShowA11yNodeInfoButton, openHtmlShowA11yNodeInfoWindow, permissionUtils } from \"@droid/android\";\r\nimport { IA11yNodeInfo } from \"@droid/project-interface\";\r\nimport { documentHiddenData, Log, toProxy, useProxyWatch, useTranslation } from \"@fanfanlo\";\r\nimport { Button } from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\nimport { ulid } from \"ulid\";\r\n\r\n//interface \r\n\r\nconst fileLog = new Log(false, 'open-a11y-node-button.tsx')\r\nfileLog.isChildrenPaused = false;\r\nfileLog.isPaused = false;\r\nconst data = toProxy({opened:false})\r\nasync function onClick() {\r\n\r\n    if(data.opened)return;\r\n    const eventType = \"a11yNodeSelectActionItem\"\r\n    const selectEventIndex = autoWebViewJs.shellListen(androidDispatchers.WebViewJsDispatcher.name, eventType, eventType, false, onSelectNode)\r\n    function onSelectNode(s: string) {\r\n        clear()\r\n        autoWebViewJs.clipboardSetText(s)\r\n        // const info: IA11yNodeInfo = JSON.parse(s)\r\n        // console.log('fffffffffffffff', s)\r\n    }\r\n    function clear(){\r\n        data.opened = false;\r\n        autoWebViewJs.shellRemoveListen(androidDispatchers.WebViewJsDispatcher.name, selectEventIndex);\r\n        autoWebViewJs.shellRemoveListen(androidDispatchers.Window.name, exitWindowIndex);\r\n        if(exitWebviewJsIndex){\r\n            autoWebViewJs.removeListen(androidDispatchers.Window.name, parseInt(exitWebviewJsIndex));\r\n        }\r\n    }\r\n    const windowId = ulid()\r\n    openHtmlShowA11yNodeInfoButton(eventType, windowId)\r\n    data.opened = true;\r\n    const et = `window-${windowId}-dismiss`\r\n    const {javaResultString:exitWebviewJsIndex, errMsg} = autoWebViewJs.listen(androidDispatchers.Window.name, et, et, true)\r\n    if(errMsg){\r\n        throw new Error(errMsg)\r\n    }\r\n    const exitWindowIndex = autoWebViewJs.shellListen(androidDispatchers.Window.name, et, et, true, ()=>{\r\n        clear()\r\n    });\r\n}\r\n\r\nfunction askPermissions(){\r\n    const script = `\r\n    com.fanfanlo.lib.permission.PermissionRequestManager.requestMultiplePermissions([\r\n        \"Manifest.permission.CAMERA\",\r\n        \"android.permission.SYSTEM_ALERT_WINDOW\",\r\n        \"android.permission.BIND_ACCESSIBILITY_SERVICE\"\r\n    ], \"onxxComplete\");\r\n    `\r\n    autoWebViewJs.callScript(script)\r\n}\r\nexport function OpenA11yNodeButton() {\r\n    const uiLog = fileLog.sub(false, 'OpenA11yNodeButton_ui')\r\n    const { t } = useTranslation('homepage/components/a11y/content')\r\n    const [isHidden] = useProxyWatch(documentHiddenData, 'isHidden', documentHiddenData.isHidden);\r\n    const [isWaitingPermissions, setIsWaitingPermissions] = useState(false);\r\n    function checkPermissions(){\r\n        const script = `\r\n        com.fanfanlo.lib.permission.PermissionRequestManager.checkPermissions([\r\n            \"Manifest.permission.CAMERA\",\r\n            \"android.permission.SYSTEM_ALERT_WINDOW\",\r\n            \"android.permission.BIND_ACCESSIBILITY_SERVICE\"\r\n        ]);\r\n        `\r\n        const {javaResultData, javaResultString, errMsg} = autoWebViewJs.callScript<IPermissionResult>(script);\r\n        uiLog.info('checkPermissions_fn javaResultString=', javaResultString, errMsg, javaResultData);\r\n        uiLog.info('checkPermissions_fn javaResultData2 =', JSON.stringify(javaResultData))\r\n        uiLog.info('checkPermissions_fn javaResultData3 =', javaResultData)\r\n        uiLog.info('checkPermissions_fn javaResultData4 =', typeof javaResultData)\r\n        uiLog.info('checkPermissions_fn javaResultData5 =', javaResultData?.grantResults[0], 'and typeof', typeof javaResultData?.grantResults[0])\r\n        if(errMsg){\r\n            throw new Error(errMsg)\r\n        }\r\n    }\r\n    useEffect(()=>{\r\n        if(isHidden){\r\n            uiLog.info('use effect isHidden', isHidden)\r\n            return;\r\n        }\r\n        if(!isWaitingPermissions){\r\n            uiLog.info('use effect isWaitingPermissions', isWaitingPermissions)\r\n            return;\r\n        }\r\n\r\n        \r\n    }, [isHidden, isWaitingPermissions])\r\n    const [opened] = useProxyWatch(data, 'opened', data.opened);\r\n    function onClick(){\r\n        checkPermissions()\r\n    }\r\n    function onAskPermissionComplete(stoped:boolean, granted:boolean, result?:IPermissionAskResult){\r\n        uiLog.info('onAskPermissionComplete_fn stoped=', stoped, 'granted=', granted, 'result=', JSON.stringify(result))\r\n        if(!granted){\r\n            toast.error(\"\\n\");\r\n            return;\r\n        }\r\n        \r\n        const eventType = ulid();// \"a11yNodeSelectActionItem\";\r\n        const windowId = ulid()\r\n        uiLog.info('onAskPermissionComplete_fn eventType=', eventType, 'windowId=', windowId)\r\n        openHtmlShowA11yNodeInfoWindow(eventType, windowId)\r\n    }\r\n    function askingPermissions(){\r\n        const eventType = ulid();// \"a11yNodeSelectActionItem\";\r\n        const windowId = ulid()\r\n        uiLog.info('askingPermissions_fn eventType=', eventType) \r\n        const res = permissionUtils.askPermissions([\r\n            Manifest.Permission.CAMERA,\r\n            Manifest.Permission.SYSTEM_ALERT_WINDOW,\r\n            Manifest.Permission.BIND_ACCESSIBILITY_SERVICE\r\n        ], eventType, onAskPermissionComplete);\r\n        uiLog.info('askingPermissions_fn res=', res)\r\n        if(res.isGranted){\r\n            onAskPermissionComplete(false, true);\r\n        }\r\n    }\r\n    return <>\r\n        <Button onClick={askingPermissions} disabled={false}>{t(\"open-a11y-node-button.btnName\")}</Button>\r\n    </>\r\n}","import { autoWebViewJs } from \"@droid/android\";\r\nimport { Box, Button, Modal } from \"@mui/material\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport function AndroidSettingsInfo() {\r\n    const [permissions, setPermissions] = useState<string[]>([])\r\n    const [open, setOpen] = useState(false)\r\n    const onSettingClick = () => {\r\n        const script = `\r\n        com.fanfanlo.lib.utils.PermissionUtils.openAppSettings();`\r\n        autoWebViewJs.callScript(script);\r\n    }\r\n    const handleClose = () => {\r\n      setOpen(false);\r\n    };\r\n    useEffect(()=>{\r\n        const script = \r\n        `\r\n        var data = com.fanfanlo.lib.utils.PermissionUtils.getGrantedPermissions();\r\n        var res = com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(data);\r\n        res;\r\n        `\r\n        const res = autoWebViewJs.callScript<string[]>(script)\r\n        if(res.javaResultData){\r\n            setPermissions(res.javaResultData)\r\n        }\r\n    }, [])\r\n    return (\r\n        <>\r\n            <Box>\r\n                <Box>\r\n                    <span></span>\r\n                    <Button onClick={onSettingClick}></Button>\r\n                    <Button onClick={() => setOpen(true)}></Button>\r\n                </Box>\r\n            </Box>\r\n            <Modal open={open}\r\n        onClose={handleClose}>\r\n                <Box sx={{bgcolor:\"background.paper\", p:2}}>\r\n                    <Box><span></span><Button onClick={handleClose}></Button></Box>\r\n                    <ul>\r\n                        {permissions.map((p, i) => <li style={{wordBreak:\"break-all\",wordWrap:\"break-word\"}} key={i}>{p.replace('android.permission', '')}</li>)}\r\n                    </ul>\r\n                </Box>\r\n            </Modal>\r\n        </>\r\n    )\r\n}","import { AutoWebViewJs } from \"../../AutoWebViewJs\"\r\n\r\n\r\nlet script = `com.fanfanlo.lib.sys.Sys.killMyApp()`\r\nexport function appKillSelf(){\r\n    AutoWebViewJs.instance.callScript(script)\r\n}","import { appKillSelf } from \"@droid/android\";\r\nimport { useTranslation } from \"@fanfanlo\";\r\nimport { Button } from \"@mui/material\";\r\nimport toast from \"react-hot-toast\";\r\n\r\nexport function KillSelf(){\r\n    const {t} = useTranslation(\"homepage/components/app/kill-self/content\")\r\n    async function onClick(){\r\n        toast.success(t(\"KillSelf.toast\"))\r\n        await new Promise(r=>setTimeout(r, 1000 * 1))\r\n        appKillSelf()\r\n    }\r\n    return(\r\n        <>\r\n            <Button onClick={onClick}>\r\n                {t(\"KillSelf.name\")}\r\n            </Button>\r\n        </>\r\n    )\r\n}","import { Button } from \"@mui/material\";\r\nimport {useRouter} from \"next/router\";\r\nimport {useTranslation,nextPreload} from \"@fanfanlo\"\r\nimport { useEffect } from \"react\";\r\nexport function AddExternalMarketButton(){\r\n    const router = useRouter()\r\n    const {t} = useTranslation('homepage/components/markets/content');\r\n    \r\n      useEffect(() => {\r\n        nextPreload(router, '/add-market');\r\n      }, []);\r\n    function onClick(){\r\n        router.push(\"/add-market\")\r\n    }\r\n    return (\r\n        <Button onClick={onClick}>\r\n            {t(\"AddExternalMarketButton.name\")}\r\n        </Button>\r\n    )\r\n}","import React, { useState } from 'react';\r\nimport { Button, Menu, MenuItem } from '@mui/material';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport { useTranslation } from '@fanfanlo';\r\nimport { useRouter } from 'next/router';\r\ninterface IMenuItemData{\r\n    name:string\r\n    url:string\r\n}\r\nexport const MainPageAddButtons: React.FC = () => {\r\n    const router = useRouter();\r\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\r\n    const open = Boolean(anchorEl);\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const {t} = useTranslation('homepage/components/markets/main-page-add-buttons/content')\r\n    const menuItems:IMenuItemData[] = [\r\n        {\r\n            name:t(\"content.sub.addScriptByUrl\"),\r\n            url:\"/listen-editing-market\"\r\n        },\r\n        {\r\n            name:t(\"content.sub.addScriptByText\"),\r\n            url:\"/add-market-by-text\"\r\n        },\r\n        {\r\n            name:t(\"content.sub.addMarket\"),\r\n            url:\"/add-market-by-url\"\r\n        },\r\n        {\r\n            name:t(\"content.sub.addMarketByText\"),\r\n            url:\"/listen-editing-market\"\r\n        }\r\n    ]\r\n    return (\r\n        <>\r\n            <Button\r\n                variant=\"contained\"\r\n                startIcon={<AddIcon />}\r\n                onClick={handleClick}\r\n            >\r\n                {t(\"content.add\")}\r\n            </Button>\r\n            <Menu\r\n                anchorEl={anchorEl}\r\n                open={open}\r\n                onClose={handleClose}\r\n            >\r\n                {menuItems.map((item, index) => (\r\n                    <MenuItem \r\n                        key={index}\r\n                        onClick={() => {\r\n                            handleClose();\r\n                            router.push(item.url);\r\n                        }}\r\n                    >\r\n                        {item.name}\r\n                    </MenuItem>\r\n                ))}\r\n            </Menu>\r\n        </>\r\n    );\r\n};","import { useTranslation } from \"@fanfanlo\";\r\nimport { Box, Button } from \"@mui/material\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/router\";\r\n\r\nexport function MarketsDevSettingsOpenLinkButton(){\r\n    const router = useRouter();\r\n    const {t} = useTranslation('homepage/components/page/markets-dev-settings/open-link-button/content');\r\n    async function onClick(){\r\n        const bl = await router.push(\"/markets-dev-settings\");\r\n    }\r\n    return(\r\n        <>\r\n        <Button onClick={onClick}>{t(\"content.name\")}</Button>\r\n        </>\r\n    )\r\n}\r\n\r\nexport function MarketsDevSettingsLineOpenLinkButton(){\r\n    return(\r\n        <>\r\n            <Box sx={{mt:2, mb:2}}>\r\n                <MarketsDevSettingsOpenLinkButton />\r\n            </Box>\r\n        </>\r\n    )\r\n}","import React, {\n    useCallback,\n    useEffect,\n    useRef,\n    useState,\n    forwardRef,\n    ForwardedRef\n} from 'react';\nimport {\n    Room,\n    RoomEvent,\n    Participant,\n    RemoteParticipant,\n    RemoteTrack,\n    Track,\n    LocalTrack,\n    LocalVideoTrack,\n    LocalAudioTrack,\n    createLocalAudioTrack,\n    createLocalVideoTrack,\n    VideoPreset,\n    VideoPresets,\n    TrackPublication,\n    LocalParticipant\n} from 'livekit-client';\nimport {\n    Box,\n    Button,\n    Typography,\n    Grid,\n    Alert,\n    IconButton,\n    CircularProgress,\n    Stack,\n    SxProps,\n    Theme\n} from '@mui/material';\nimport {\n    Mic as MicIcon,\n    MicOff as MicOffIcon,\n    ScreenShare as ScreenShareIcon,\n    StopScreenShare as StopScreenShareIcon,\n    Videocam as VideoIcon,\n    VideocamOff as VideoOffIcon,\n    CallEnd as CallEndIcon,\n    Settings as SettingsIcon,\n    VolumeUp as VolumeUpIcon,\n    VolumeOff as VolumeOffIcon,\n    Fullscreen as FullscreenIcon,\n    FullscreenExit as FullscreenExitIcon,\n    Refresh as RefreshIcon\n} from '@mui/icons-material';\nimport { Log } from '@fanfanlo';\nimport { mainModel } from '@src/libs/mc/main/MainModel';\nimport { MeetingRoomProps, VideoPresetConfig, ExtendedParticipantState, ParticipantState } from './meeting-room.intf';\n\n// \nconst logger = new Log(false, 'livekit-meeting.MeetingRoom');\nconst uiLogger = logger.sub(false, 'MeetingRoom_ui');\n\n// \nconst VIDEO_PRESET: VideoPresetConfig = {\n    width: 1280,\n    height: 720,\n    // @ts-ignore - frameRate is used by LiveKit internally\n    frameRate: 24,\n    maxBitrate: 3000 * 1000, // 3Mbps\n};\n\n//  meetint-room.intf.ts\n\n\nfunction getTokenEndpoint(): string {\n    if (!mainModel.appConfig?.livekit?.jwt) {\n        throw new Error('LiveKit JWT endpoint is not configured');\n    }\n    return `${mainModel.appConfig.livekit.jwt}/token`;\n}\n// \nfunction MeetingRoomComponent(\n    {\n        roomName,\n        userName,\n        onDisconnect,\n        onError,\n        className = '',\n        style,\n        sx\n    }: MeetingRoomProps,\n    ref: ForwardedRef<HTMLDivElement>\n) {\n    // \n    const [globalMediaState, setGlobalMediaState] = useState<{\n        isAudioEnabled: boolean;\n        isVideoEnabled: boolean;\n    }>({\n        isAudioEnabled: true,\n        isVideoEnabled: true,\n    });\n\n    // Refs\n    const roomRef = useRef<Room | null>(null);\n    const localTracksRef = useRef<LocalTrack[]>([]);\n    const videoElements = useRef<Record<string, HTMLVideoElement>>({});\n    const audioElements = useRef<Record<string, HTMLAudioElement>>({});\n    const [participantStates, setParticipantStates] = useState<Record<string, ExtendedParticipantState>>({});\n    const isUnmountedRef = useRef(false);\n\n    // State\n    const [isConnecting, setIsConnecting] = useState(false);\n    const [hasConnected, setHasConnected] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const [isMuted, setIsMuted] = useState(false);\n    const [isVideoEnabled, setIsVideoEnabled] = useState(true);\n    const [participants, setParticipants] = useState<RemoteParticipant[]>([]);\n\n    //  token\n    const fetchToken = useCallback(async (roomName: string, identity: string) => {\n        try {\n            const response = await fetch(getTokenEndpoint(), {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    room_name: roomName,\n                    identity,\n                }),\n            });\n\n            if (!response.ok) {\n                throw new Error(' token ');\n            }\n\n            const data = await response.json();\n            return data.token;\n        } catch (error) {\n            uiLogger.error(' token :', error);\n            throw error;\n        }\n    }, []);\n\n    // \n    const connectToRoom = useCallback(async () => {\n        if (isConnecting || hasConnected) return;\n\n        setIsConnecting(true);\n        setError(null);\n\n        try {\n            // 1.  token\n            const token = await fetchToken(roomName, userName);\n\n            // 2. \n            const { audioTrack, videoTrack } = await createLocalTracks();\n            localTracksRef.current = [audioTrack, videoTrack];\n\n            // 3. \n            const room = new Room({\n                adaptiveStream: true,\n                dynacast: true,\n                videoCaptureDefaults: {\n                    resolution: VIDEO_PRESET,\n                },\n                // @ts-ignore - publishDefaults is a valid option\n                publishDefaults: {\n                    dtx: true,\n                    red: true,\n                    forceStereo: false,\n                    simulcast: true,\n                } as any, // Type assertion to bypass type checking for now\n            });\n\n            // 4. \n            setupRoomListeners(room);\n\n            // 5. \n            await room.connect(\n                mainModel.appConfig!.livekit.wsUrl,\n                token,\n                {\n                    autoSubscribe: true,\n                }\n            );\n\n            // 6. \n            try {\n                await Promise.all([\n                    room.localParticipant.publishTrack(audioTrack),\n                    room.localParticipant.publishTrack(videoTrack)\n                ]);\n            } catch (publishError) {\n                uiLogger.error(':', publishError);\n                // \n            }\n\n            // 7. \n            roomRef.current = room;\n            setHasConnected(true);\n\n            // 8. \n            const remoteParticipants = Array.from(room.remoteParticipants.values());\n            setParticipants(remoteParticipants);\n\n            // 9. \n            updateParticipantState(room.localParticipant.identity, {\n                isAudioEnabled: true,\n                isVideoEnabled: true,\n                audioTrack,\n                videoTrack,\n            });\n\n            // 10. \n            remoteParticipants.forEach(participant => {\n                // \n                initParticipantState(participant);\n                uiLogger.log(':', participant.identity);\n                \n                //  getTrackPublications \n                participant.getTrackPublications().forEach(publication => {\n                    if (publication.track && publication.track instanceof RemoteTrack) {\n                        handleTrackSubscribed(publication.track, publication, participant);\n                    }\n                });\n            });\n            \n            // \n            if (room.localParticipant) {\n                initParticipantState(room.localParticipant);\n                uiLogger.log(':', room.localParticipant.identity);\n            }\n\n            uiLogger.log('');\n\n        } catch (error) {\n            uiLogger.error(':', error);\n            setError('');\n            // \n            cleanupTracks(localTracksRef.current);\n            localTracksRef.current = [];\n\n            if (roomRef.current) {\n                try {\n                    await roomRef.current.disconnect();\n                } catch (e) {\n                    uiLogger.error(':', e);\n                }\n                roomRef.current = null;\n            }\n        } finally {\n            setIsConnecting(false);\n        }\n    }, [roomName, userName, isConnecting, hasConnected, fetchToken]);\n\n    // \n    const createLocalTracks = useCallback(async () => {\n        try {\n            const [audioTrack, videoTrack] = await Promise.all([\n                createLocalAudioTrack({\n                    echoCancellation: true,\n                    noiseSuppression: true,\n                    autoGainControl: true,\n                }),\n                createLocalVideoTrack({\n                    resolution: {\n                        width: 1280,\n                        height: 720,\n                        frameRate: 24,\n                    },\n                }),\n            ]);\n            return { audioTrack, videoTrack };\n        } catch (error) {\n            uiLogger.error(':', error);\n            throw error;\n        }\n    }, []);\n\n    // \n    const cleanupTracks = useCallback((tracks: LocalTrack[]) => {\n        tracks.forEach(track => {\n            track.stop();\n            track.detach();\n        });\n    }, []);\n\n    // \n    const trackElementsRef = useRef<Record<string, boolean>>({});\n    const videoElementsRef = useRef<Record<string, HTMLVideoElement>>({});\n    const audioElementsRef = useRef<Record<string, HTMLAudioElement>>({});\n\n    // \n    const updateParticipantState = useCallback((identity: string, state: Partial<ParticipantState>) => {\n        setParticipantStates(prev => ({\n            ...prev,\n            [identity]: {\n                ...(prev[identity] || {\n                    isAudioEnabled: true,\n                    isVideoEnabled: true,\n                    isAudioEnabledGlobal: true,\n                    isVideoEnabledGlobal: true,\n                }),\n                ...state,\n            },\n        }));\n    }, []);\n    // \n    const handleTrackSubscribed = useCallback((\n        track: RemoteTrack,\n        publication: TrackPublication,\n        participant: Participant\n    ) => {\n        if (!track) return () => { };\n\n        const { identity } = participant;\n        const isVideoTrack = track.kind === Track.Kind.Video;\n\n        uiLogger.log(` ${track.kind} :`, identity, track);\n\n        // \n        const updateTrackState = () => {\n            const isMuted = track.isMuted;\n            const stateUpdate: Partial<ParticipantState> = {};\n\n            if (track.kind === Track.Kind.Audio) {\n                stateUpdate.isAudioEnabled = !isMuted;\n            } else if (track.kind === Track.Kind.Video) {\n                stateUpdate.isVideoEnabled = !isMuted;\n            }\n\n            updateParticipantState(identity, stateUpdate);\n\n            //  ParticipantVideo \n            if (isVideoTrack) {\n                setParticipants(prev => [...prev]);\n            }\n        };\n\n        // /\n        track.on('muted', updateTrackState);\n        track.on('unmuted', updateTrackState);\n\n        // \n        updateTrackState();\n\n        // \n        // \n        setParticipants(prev => {\n            const participantExists = prev.some(p => p.identity === identity);\n            if (!participantExists) {\n                return [...prev, participant as RemoteParticipant];\n            }\n            return [...prev];\n        });\n\n\n        // \n        return () => {\n            track.off('muted', updateTrackState);\n            track.off('unmuted', updateTrackState);\n        };\n    }, [updateParticipantState]);\n\n    // \n    const setupRoomListeners = useCallback((room: Room) => {\n        // \n        type EventHandler = (...args: any[]) => void;\n        const eventHandlers: Record<string, EventHandler> = {\n            // \n            participantConnected: (participant: RemoteParticipant) => {\n                if (!(participant instanceof RemoteParticipant)) return;\n\n                uiLogger.log(':', participant.identity);\n\n                // \n                setParticipants(prev => {\n                    // \n                    if (prev.some(p => p.identity === participant.identity)) {\n                        return prev;\n                    }\n                    return [...prev, participant];\n                });\n\n                // \n                const handleTrackPublished = (publication: TrackPublication) => {\n                    uiLogger.log(':', publication.kind, participant.identity);\n                    if (publication.track) {\n                        handleTrackSubscribed(publication.track as RemoteTrack, publication, participant);\n                    } else {\n                        publication.once('subscribed', (track: RemoteTrack) => {\n                            handleTrackSubscribed(track, publication, participant);\n                        });\n                    }\n                };\n\n                // \n                participant.on('trackPublished', handleTrackPublished);\n\n                // \n                participant.trackPublications.forEach(publication => {\n                    if (publication.track) {\n                        handleTrackSubscribed(publication.track as RemoteTrack, publication, participant);\n                    }\n                });\n\n                // \n                return () => {\n                    participant.off('trackPublished', handleTrackPublished);\n                };\n            },\n\n            // \n            participantDisconnected: (participant: RemoteParticipant) => {\n                uiLogger.log(':', participant.identity);\n                setParticipants(prev => {\n                    const newParticipants = prev.filter(p => p.identity !== participant.identity);\n                    uiLogger.log(':', newParticipants.map(p => p.identity));\n                    return newParticipants;\n                });\n            },\n\n            // \n            trackSubscribed: (track: RemoteTrack, publication: TrackPublication, participant: Participant) => {\n                if (!track) return;\n                uiLogger.log(':', track.kind, participant.identity);\n                // \n                handleTrackSubscribed(track, publication, participant as RemoteParticipant);\n            },\n\n            disconnected: (reason?: any) => {\n                const reasonStr = reason?.toString?.() || '';\n                uiLogger.log(':', reasonStr);\n                //  handleDisconnect\n                setHasConnected(false);\n                setParticipants([]);\n                setError(null);\n            },\n\n            reconnecting: () => {\n                uiLogger.log('...');\n                setError('...');\n            },\n\n            reconnected: () => {\n                uiLogger.log('');\n                setError(null);\n            }\n        };\n\n        // \n        room\n            .on(RoomEvent.Disconnected, eventHandlers.disconnected)\n            .on(RoomEvent.Reconnecting, eventHandlers.reconnecting)\n            .on(RoomEvent.Reconnected, eventHandlers.reconnected)\n            .on(RoomEvent.ParticipantConnected, eventHandlers.participantConnected)\n            .on(RoomEvent.ParticipantDisconnected, eventHandlers.participantDisconnected)\n            .on(RoomEvent.TrackSubscribed, eventHandlers.trackSubscribed);\n\n        // \n        return () => {\n            if (!room) return;\n            room\n                .off(RoomEvent.Disconnected, eventHandlers.disconnected)\n                .off(RoomEvent.Reconnecting, eventHandlers.reconnecting)\n                .off(RoomEvent.Reconnected, eventHandlers.reconnected)\n                .off(RoomEvent.ParticipantConnected, eventHandlers.participantConnected)\n                .off(RoomEvent.ParticipantDisconnected, eventHandlers.participantDisconnected)\n                .off(RoomEvent.TrackSubscribed, eventHandlers.trackSubscribed);\n\n            //  void\n            return undefined;\n        };\n    }, [handleTrackSubscribed]);\n\n    // \n    const leaveMeeting = useCallback(async () => {\n        uiLogger.log('...');\n        try {\n            // \n            cleanupTracks(localTracksRef.current);\n\n            // \n            if (roomRef.current) {\n                await roomRef.current.disconnect();\n                roomRef.current = null;\n            }\n\n            // \n            setHasConnected(false);\n            setParticipants([]);\n            setError(null);\n\n            // \n            Object.values(videoElements.current).forEach(el => el && el.remove());\n            Object.values(audioElements.current).forEach(el => el && el.remove());\n            videoElements.current = {};\n            audioElements.current = {};\n\n            // \n            if (onDisconnect) {\n                onDisconnect();\n            }\n\n            uiLogger.log('');\n        } catch (error) {\n            uiLogger.error(':', error);\n            setError('');\n        }\n    }, [onDisconnect]);\n\n    // \n    const cleanup = useCallback(async (isUnmounting = false) => {\n        // \n        if (isUnmounting) {\n            isUnmountedRef.current = true;\n        }\n\n        uiLogger.log('...');\n        if (!roomRef.current) return;\n\n        const localParticipant = roomRef.current.localParticipant;\n        const audioTrack = localTracksRef.current.find(\n            t => t.kind === Track.Kind.Audio\n        ) as LocalAudioTrack | undefined;\n        const videoTrack = localTracksRef.current.find(\n            t => t.kind === Track.Kind.Video\n        ) as LocalVideoTrack | undefined;\n\n        try {\n            if (audioTrack) {\n                await audioTrack.stop();\n            }\n            if (videoTrack) {\n                await videoTrack.stop();\n            }\n        } catch (error) {\n            uiLogger.error(':', error);\n        }\n\n        // \n        cleanupTracks(localTracksRef.current);\n        localTracksRef.current = [];\n\n        // \n        if (roomRef.current) {\n            roomRef.current.disconnect();\n            roomRef.current = null;\n        }\n\n        // \n        setHasConnected(false);\n        setParticipants([]);\n        setParticipantStates({});\n    }, []);\n\n    // \n    const updateGlobalMediaState = useCallback((audioEnabled: boolean, videoEnabled: boolean) => {\n        setGlobalMediaState(prev => ({\n            ...prev,\n            isAudioEnabled: audioEnabled,\n            isVideoEnabled: videoEnabled,\n        }));\n    }, []);\n\n    // \n    const toggleMute = useCallback(async () => {\n        if (!roomRef.current) return;\n\n        const localParticipant = roomRef.current.localParticipant;\n        const audioTrack = localTracksRef.current.find(\n            t => t.kind === Track.Kind.Audio\n        ) as LocalAudioTrack | undefined;\n\n        if (!audioTrack) return;\n\n        try {\n            // \n            const newGlobalAudioState = !globalMediaState.isAudioEnabled;\n\n            // \n            if (newGlobalAudioState) {\n                await audioTrack.unmute();\n            } else {\n                await audioTrack.mute();\n            }\n\n            // UI\n            setIsMuted(!newGlobalAudioState);\n            updateParticipantState(localParticipant.identity, { isAudioEnabled: newGlobalAudioState });\n\n            // \n            updateGlobalMediaState(newGlobalAudioState, globalMediaState.isVideoEnabled);\n        } catch (error) {\n            uiLogger.error(':', error);\n            setError('');\n        }\n    }, [globalMediaState, updateParticipantState, updateGlobalMediaState]);\n\n    // \n    const toggleVideo = useCallback(async () => {\n        if (!roomRef.current) return;\n\n        const localParticipant = roomRef.current.localParticipant;\n        const videoTrack = localTracksRef.current.find(\n            t => t.kind === Track.Kind.Video\n        ) as LocalVideoTrack | undefined;\n\n        if (!videoTrack) return;\n\n        try {\n            // \n            const newGlobalVideoState = !globalMediaState.isVideoEnabled;\n\n            // \n            if (newGlobalVideoState) {\n                await videoTrack.unmute();\n            } else {\n                await videoTrack.mute();\n            }\n\n            // UI\n            setIsVideoEnabled(newGlobalVideoState);\n            updateParticipantState(localParticipant.identity, { isVideoEnabled: newGlobalVideoState });\n\n            // \n            updateGlobalMediaState(globalMediaState.isAudioEnabled, newGlobalVideoState);\n        } catch (error) {\n            uiLogger.error(':', error);\n            setError('');\n        }\n    }, [globalMediaState, updateParticipantState, updateGlobalMediaState]);\n\n    // tile\n    const handleLocalMuteToggle = useCallback(async () => {\n        if (!roomRef.current) return;\n\n        const localParticipant = roomRef.current.localParticipant;\n        const audioTrack = localTracksRef.current.find(\n            t => t.kind === Track.Kind.Audio\n        ) as LocalAudioTrack | undefined;\n\n        if (!audioTrack) return;\n\n        try {\n            const newMutedState = !isMuted;\n            if (newMutedState) {\n                await audioTrack.mute();\n            } else {\n                await audioTrack.unmute();\n            }\n\n            setIsMuted(newMutedState);\n            updateParticipantState(localParticipant.identity, { isAudioEnabled: !newMutedState });\n        } catch (error) {\n            uiLogger.error(':', error);\n            setError('');\n        }\n    }, [isMuted, updateParticipantState]);\n\n    // tile\n    const handleLocalVideoToggle = useCallback(async () => {\n        if (!roomRef.current) return;\n\n        const localParticipant = roomRef.current.localParticipant;\n        const videoTrack = localTracksRef.current.find(\n            t => t.kind === Track.Kind.Video\n        ) as LocalVideoTrack | undefined;\n\n        if (!videoTrack) return;\n\n        try {\n            const newVideoState = !isVideoEnabled;\n            if (newVideoState) {\n                await videoTrack.unmute();\n            } else {\n                await videoTrack.mute();\n            }\n\n            setIsVideoEnabled(newVideoState);\n            updateParticipantState(localParticipant.identity, { isVideoEnabled: newVideoState });\n        } catch (error) {\n            uiLogger.error(':', error);\n            setError('');\n        }\n    }, [isVideoEnabled, updateParticipantState]);\n\n    // \n    useEffect(() => {\n        return () => {\n            // \n            cleanup(true);\n        };\n    }, []);\n\n    // \n    const getParticipantState = useCallback((identity: string): ParticipantState => {\n        return participantStates[identity] || {\n            isAudioEnabled: true,\n            isVideoEnabled: true,\n            isAudioEnabledGlobal: true,\n            isVideoEnabledGlobal: true,\n        };\n    }, [participantStates]);\n\n    // \n    const initParticipantState = useCallback((participant: Participant) => {\n        const state = getParticipantState(participant.identity);\n\n        // \n        const audioTrack = participant.getTrackPublications().find(\n            pub => pub.kind === Track.Kind.Audio\n        )?.track as LocalAudioTrack | undefined;\n\n        // \n        const videoTrack = participant.getTrackPublications().find(\n            pub => pub.kind === Track.Kind.Video\n        )?.track as LocalVideoTrack | undefined;\n\n        updateParticipantState(participant.identity, {\n            ...state,\n            isAudioEnabled: audioTrack ? !audioTrack.isMuted : false,\n            isVideoEnabled: videoTrack ? !videoTrack.isMuted : false\n        });\n    }, [getParticipantState, updateParticipantState]);\n\n    // \n    const handleToggleAudio = useCallback((participant: Participant) => {\n        const currentState = participantStates[participant.identity] || {\n            isAudioEnabled: true,\n            isVideoEnabled: true,\n            isAudioEnabledGlobal: true,\n            isVideoEnabledGlobal: true,\n        };\n\n        updateParticipantState(participant.identity, {\n            ...currentState,\n            isAudioEnabled: !currentState.isAudioEnabled\n        });\n    }, [participantStates, updateParticipantState]);\n\n    // \n    const handleToggleVideo = useCallback((participant: Participant) => {\n        const currentState = participantStates[participant.identity] || {\n            isAudioEnabled: true,\n            isVideoEnabled: true,\n            isAudioEnabledGlobal: true,\n            isVideoEnabledGlobal: true,\n        };\n\n        updateParticipantState(participant.identity, {\n            ...currentState,\n            isVideoEnabled: !currentState.isVideoEnabled\n        });\n    }, [participantStates, updateParticipantState]);\n\n    // \n    const getEffectiveMediaState = useCallback((participantId: string) => {\n        const state = participantStates[participantId];\n        if (!state) return { isAudioEnabled: true, isVideoEnabled: true };\n\n        return {\n            isAudioEnabled: globalMediaState.isAudioEnabled ? state.isAudioEnabled : false,\n            isVideoEnabled: globalMediaState.isVideoEnabled ? state.isVideoEnabled : false,\n        };\n    }, [globalMediaState, participantStates]);\n\n    // \n    const ParticipantVideo = React.memo(({\n        participant,\n        isLocal,\n        isVideoEnabled\n    }: {\n        participant: Participant;\n        isLocal: boolean;\n        isVideoEnabled: boolean;\n    }) => {\n        const videoRef = useRef<HTMLVideoElement>(null);\n        const [videoTrack, setVideoTrack] = useState<RemoteTrack | LocalVideoTrack | null>(null);\n\n        // \n        useEffect(() => {\n            if (!participant) return;\n\n            // \n            const videoPublication = Array.from(participant.trackPublications.values())\n                .find(pub => pub.kind === Track.Kind.Video);\n\n            // \n            if (videoPublication && videoPublication.track) {\n                setVideoTrack(videoPublication.track);\n            }\n\n            // \n            const handleTrackSubscribed = (track: Track) => {\n                if (track.kind === Track.Kind.Video) {\n                    setVideoTrack(track as RemoteTrack | LocalVideoTrack);\n                }\n            };\n\n            // \n            const handleTrackUnsubscribed = (track: Track) => {\n                if (track.kind === Track.Kind.Video) {\n                    setVideoTrack(null);\n                }\n            };\n\n            // \n            participant.on(RoomEvent.TrackSubscribed, handleTrackSubscribed);\n            participant.on(RoomEvent.TrackUnsubscribed, handleTrackUnsubscribed);\n\n            // \n            return () => {\n                participant.off(RoomEvent.TrackSubscribed, handleTrackSubscribed);\n                participant.off(RoomEvent.TrackUnsubscribed, handleTrackUnsubscribed);\n            };\n        }, [participant]);\n\n        // /\n        useEffect(() => {\n            const videoElement = videoRef.current;\n            if (!videoElement || !videoTrack) return;\n\n            // \n            while (videoElement.firstChild) {\n                videoElement.removeChild(videoElement.firstChild);\n            }\n\n            // \n            if (isVideoEnabled) {\n                videoTrack.attach(videoElement);\n            }\n\n            return () => {\n                if (videoTrack) {\n                    videoTrack.detach(videoElement);\n                }\n            };\n        }, [videoTrack, isVideoEnabled]);\n\n        return (\n            <Box\n                sx={{\n                    width: '100%',\n                    aspectRatio: '16/9',\n                    bgcolor: 'grey.800',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    position: 'relative',\n                }}\n            >\n                <video\n                    ref={videoRef}\n                    autoPlay\n                    playsInline\n                    muted={isLocal}\n                    style={{\n                        width: '100%',\n                        height: '100%',\n                        objectFit: 'cover',\n                        display: isVideoEnabled ? 'block' : 'none'\n                    }}\n                />\n                {!isVideoEnabled && (\n                    <Box\n                        sx={{\n                            position: 'absolute',\n                            top: 0,\n                            left: 0,\n                            right: 0,\n                            bottom: 0,\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                            bgcolor: 'grey.900',\n                        }}\n                    >\n                        <Box\n                            sx={{\n                                width: 80,\n                                height: 80,\n                                borderRadius: '50%',\n                                display: 'flex',\n                                alignItems: 'center',\n                                justifyContent: 'center',\n                                bgcolor: 'primary.main',\n                                color: 'white',\n                                fontSize: 32,\n                                fontWeight: 'bold',\n                            }}\n                        >\n                            {participant.identity.charAt(0).toUpperCase()}\n                        </Box>\n                    </Box>\n                )}\n            </Box>\n        );\n    });\n\n    // \n    const ParticipantAudio = React.memo(({\n        participant,\n        isMuted,\n    }: {\n        participant: Participant;\n        isMuted: boolean;\n    }) => {\n        const audioRef = useRef<HTMLAudioElement>(null);\n        const [audioTrack, setAudioTrack] = useState<RemoteTrack | LocalAudioTrack | null>(null);\n\n        useEffect(() => {\n            if (!participant) return;\n\n            const handleTrackSubscribed = (track: Track) => {\n                if (track.kind === Track.Kind.Audio) {\n                    setAudioTrack(track as RemoteTrack | LocalAudioTrack);\n                }\n            };\n\n            const handleTrackUnsubscribed = (track: Track) => {\n                if (track.kind === Track.Kind.Audio) {\n                    setAudioTrack(null);\n                }\n            };\n\n            // \n            const audioPublication = Array.from(participant.trackPublications.values())\n                .find(pub => pub.kind === Track.Kind.Audio);\n\n            if (audioPublication && audioPublication.track) {\n                setAudioTrack(audioPublication.track);\n            }\n\n            participant.on(RoomEvent.TrackSubscribed, handleTrackSubscribed);\n            participant.on(RoomEvent.TrackUnsubscribed, handleTrackUnsubscribed);\n\n            return () => {\n                participant.off(RoomEvent.TrackSubscribed, handleTrackSubscribed);\n                participant.off(RoomEvent.TrackUnsubscribed, handleTrackUnsubscribed);\n            };\n        }, [participant]);\n\n        useEffect(() => {\n            const audioElement = audioRef.current;\n            if (audioElement && audioTrack) {\n                audioTrack.attach(audioElement);\n                // \n                audioElement.muted = isMuted;\n                return () => {\n                    audioTrack.detach(audioElement);\n                };\n            }\n        }, [audioTrack, isMuted]);\n\n        return <audio ref={audioRef} autoPlay playsInline />;\n    });\n\n    // \n    const renderParticipant = useCallback((participant: Participant, isLocal: boolean) => {\n        const effectiveState = getEffectiveMediaState(participant.identity);\n\n        return (\n            <Box\n                key={participant.identity}\n                sx={{\n                    position: 'relative',\n                    borderRadius: 2,\n                    overflow: 'hidden',\n                    bgcolor: 'background.paper',\n                    boxShadow: 1,\n                }}\n            >\n                {/*  */}\n                <ParticipantVideo\n                    participant={participant}\n                    isLocal={isLocal}\n                    isVideoEnabled={effectiveState.isVideoEnabled}\n                />\n\n                {/*  */}\n                {!isLocal && (\n                    <ParticipantAudio\n                        participant={participant}\n                        isMuted={!effectiveState.isAudioEnabled}\n                    />\n                )}\n\n                {/*  */}\n                <Box\n                    sx={{\n                        position: 'absolute',\n                        bottom: 0,\n                        left: 0,\n                        right: 0,\n                        p: 1,\n                        bgcolor: 'rgba(0, 0, 0, 0.6)',\n                        display: 'flex',\n                        justifyContent: 'center',\n                        gap: 1,\n                    }}\n                >\n                    <IconButton\n                        size=\"small\"\n                        color={effectiveState.isAudioEnabled ? 'primary' : 'error'}\n                        onClick={() => handleToggleAudio(participant)}\n                    >\n                        {effectiveState.isAudioEnabled ? <MicIcon /> : <MicOffIcon />}\n                    </IconButton>\n                    <IconButton\n                        size=\"small\"\n                        color={effectiveState.isVideoEnabled ? 'primary' : 'error'}\n                        onClick={() => handleToggleVideo(participant)}\n                    >\n                        {effectiveState.isVideoEnabled ? <VideoIcon /> : <VideoOffIcon />}\n                    </IconButton>\n                    <Typography variant=\"caption\" color=\"white\">\n                        {participant.identity} {isLocal && '()'}\n                    </Typography>\n                    )\n\n                    {/*  */}\n                    {isLocal && (\n                        <IconButton\n                            size=\"small\"\n                            onClick={handleLocalMuteToggle}\n                            color={isMuted ? 'error' : 'primary'}\n                            sx={{ color: 'white' }}\n                            title={isMuted ? '' : ''}\n                        >\n                            {isMuted ? <MicOffIcon /> : <MicIcon />}\n                        </IconButton>\n                    )}\n\n                    {/*  */}\n                    {isLocal && (\n                        <IconButton\n                            size=\"small\"\n                            onClick={handleLocalVideoToggle}\n                            color={isVideoEnabled ? 'primary' : 'error'}\n                            sx={{ color: 'white' }}\n                            title={isVideoEnabled ? '' : ''}\n                        >\n                            {isVideoEnabled ? <VideoIcon /> : <VideoOffIcon />}\n                        </IconButton>\n                    )}\n                </Box>\n            </Box>\n        );\n    }, [isMuted, isVideoEnabled, getEffectiveMediaState, handleToggleAudio, handleToggleVideo, handleLocalMuteToggle, handleLocalVideoToggle]);\n\n    // \n    if (isConnecting) {\n        return (\n            <Box sx={{\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                height: '100%',\n                p: 3\n            }}>\n                <CircularProgress />\n                <Typography variant=\"body1\" sx={{ mt: 2 }}>...</Typography>\n            </Box>\n        );\n    }\n\n    // \n    if (error) {\n        return (\n            <Alert severity=\"error\" sx={{ m: 2 }}>\n                <Typography variant=\"body1\">{error}</Typography>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={connectToRoom}\n                    startIcon={<RefreshIcon />}\n                    sx={{ mt: 1 }}\n                >\n                    \n                </Button>\n            </Alert>\n        );\n    }\n\n    // \n    function renderMainContent() {\n        // \n        if (hasConnected && roomRef.current) {\n            return (\n                <Box className={className} sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\n                    <Box sx={{ flex: 1, overflow: 'auto', p: 2 }}>\n                        <Grid container spacing={2}>\n                            <Grid item xs={12} md={participants.length === 0 ? 12 : 6}>\n                                {renderParticipant(roomRef.current.localParticipant, true)}\n                            </Grid>\n                            {participants.map(function (participant) {\n                                return (\n                                    <Grid item xs={12} md={6} key={participant.identity}>\n                                        {renderParticipant(participant, false)}\n                                    </Grid>\n                                );\n                            })}\n                        </Grid>\n                    </Box>\n                    {/*  */}\n                    <Box sx={{\n                        p: 2,\n                        borderTop: '1px solid',\n                        borderColor: 'divider',\n                        display: 'flex',\n                        justifyContent: 'center',\n                        gap: 2\n                    }}>\n                        <Button\n                            variant=\"contained\"\n                            color={!globalMediaState.isAudioEnabled ? 'error' : 'primary'}\n                            onClick={toggleMute}\n                            startIcon={!globalMediaState.isAudioEnabled ? <MicOffIcon /> : <MicIcon />}\n                        >\n                            {!globalMediaState.isAudioEnabled ? '' : ''}\n                        </Button>\n\n                        <Button\n                            variant=\"contained\"\n                            color={!globalMediaState.isVideoEnabled ? 'error' : 'primary'}\n                            onClick={toggleVideo}\n                            startIcon={globalMediaState.isVideoEnabled ? <VideoIcon /> : <VideoOffIcon />}\n                        >\n                            {globalMediaState.isVideoEnabled ? '' : ''}\n                        </Button>\n\n                        <Button\n                            variant=\"contained\"\n                            color=\"error\"\n                            onClick={leaveMeeting}\n                            startIcon={<CallEndIcon />}\n                        >\n                            \n                        </Button>\n                    </Box>\n                </Box>\n            );\n        }\n\n        // \n        return (\n            <Box className={className} sx={{\n                height: '100%',\n                display: 'flex',\n                flexDirection: 'column',\n                alignItems: 'center',\n                justifyContent: 'center',\n                p: 3\n            }}>\n                <Typography variant=\"h6\" gutterBottom>\n                    \n                </Typography>\n                <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={connectToRoom}\n                    disabled={isConnecting}\n                    startIcon={<VideoIcon />}\n                    sx={{ mt: 2 }}\n                >\n                    \n                    {isConnecting && (\n                        <CircularProgress\n                            size={16}\n                            sx={{\n                                color: 'inherit',\n                                ml: 1\n                            }}\n                        />\n                    )}\n                </Button>\n            </Box>\n        );\n    }\n\n    // \n    return (\n        <Box ref={ref} sx={sx} style={style}>\n            {error ? (\n                <Alert\n                    severity=\"error\"\n                    action={\n                        <Button\n                            color=\"inherit\"\n                            size=\"small\"\n                            onClick={connectToRoom}\n                        >\n                            \n                        </Button>\n                    }\n                >\n                    {error}\n                </Alert>\n            ) : (\n                renderMainContent()\n            )}\n        </Box>\n    );\n}\n\n//  forwardRef \nconst MeetingRoom = forwardRef(MeetingRoomComponent);\nMeetingRoom.displayName = 'MeetingRoom';\n\nexport { MeetingRoom };\n","import { ScriptMap } from \"@market/lib\";\r\nimport { storeUtils, toProxy } from \"../../../../libs/fanfanlo\";\r\n\r\n\r\ninterface LibIndexInfo {\r\n    list: string[];\r\n}\r\nconst libIndexInfo = storeUtils.createLocalStore<LibIndexInfo>('markets-script-index-info', { defData: { list: [] }, forceReset: false });\r\nexport const lib = toProxy<ScriptMap>({});\r\n\r\nlet isInitialized = false;\r\nfunction init(){\r\n    if(isInitialized){\r\n        return;\r\n    }\r\n    isInitialized = true;\r\n}\r\nexport const marketsScriptLib = {\r\n    lib,\r\n    libIndexInfo,\r\n    init\r\n}","import { marketsDevScriptLib } from \"./markets-script-dev-lib\";\r\nimport { watchUpdates } from \"@fanfanlo\";\r\nimport { marketsScriptLib } from \"./markets-script-lib\";\r\n\r\nlet isInitialized = false;\r\nfunction init(){\r\n    if(isInitialized){\r\n        return;\r\n    }\r\n    isInitialized = true;\r\n    marketsDevScriptLib.init();\r\n    marketsScriptLib.init();\r\n    watchUpdates(marketsDevScriptLib.marketDevLibData, (data)=>{\r\n        console.log('marketsDevScriptLib.devLibInfo=', data);\r\n        const allMarktLibData = marketsDevScriptLib.marketDevLibData.allMarketLibData;\r\n        if(!allMarktLibData)return;\r\n        for(const html of allMarktLibData.htmls){\r\n            marketsScriptLib.lib[html.client.ns] = html;\r\n            \r\n        }\r\n        for(const script of allMarktLibData.resources){\r\n            marketsScriptLib.lib[script.client.ns] = script;\r\n        }\r\n    });\r\n}\r\nexport const marketsScriptManager = {\r\n    init,\r\n}\r\n","import { isInAndroid } from '../../is-in-android';\r\nimport { autoWebViewJs } from '../../AutoWebViewJs';\r\nimport { ICallAndroidReslt } from '../../WebViewJs';\r\n\r\ninterface IA11yServiceLiveInfo {\r\n  hasPermission?: boolean;\r\n  hasService?: boolean;\r\n  isAlive?: boolean;\r\n  pingTime?: number;\r\n  crashed?: boolean;\r\n}\r\n\r\nfunction getA11yServiceLiveInfo(): ICallAndroidReslt<IA11yServiceLiveInfo> {\r\n  const script = `var info =com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceLiveInfo;\\n var s = com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(info);\\n s;`;\r\n  const info = autoWebViewJs.callScript<IA11yServiceLiveInfo>(script);\r\n  return info;\r\n}\r\n\r\nfunction hasPermission():boolean{\r\n    if(!isInAndroid())return false\r\n    const res = autoWebViewJs.onCallGetA11yPermission<boolean>()\r\n    // console.log('hasPermission', res)\r\n    return res.javaResultData as boolean\r\n\r\n    // return getA11yServiceLiveInfo().javaResultData?.hasPermission;\r\n}\r\n\r\nfunction openPermission(){\r\n    autoWebViewJs.onCallOpenA11yPermission()\r\n    // return autoWebViewJs.callScriptRunner(`com.fanfanlo.lib.permissions.FloatPermission.openPermission();`);\r\n\r\n}\r\nconst hasPermissionScript = `var bl = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.hasServicePermission(com.fanfanlo.lib.mc.LibMainModel.Companion.instance.application, com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceKClass.class);\\nbl;`\r\nfunction checkPermission(){\r\n    //com.fanfanlo.lib.utils.ClassUtils.kclassToClass\r\n    // let s = `val bl = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.hasServicePermission(com.fanfanlo.lib.mc.LibMainModel.libMainModel.application, com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceKClass.java);\\nbl;`\r\n    // let s = `var bl = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.hasPermission(com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.getServiceJavaClass());\\nbl;`\r\n    // let s = `var bl = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.hasPermission(com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceKClass);\\nbl;`\r\n    // let s = `var bl = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.hasServicePermission(com.fanfanlo.lib.mc.libMainModel.application, com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceKClass.class);\\nbl;`\r\n    // let s = `var bl = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.hasServicePermission(com.fanfanlo.lib.mc.LibMainModel.Companion.instance.application, com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceKClass.class);\\nbl;`\r\n    // let s = `var bl = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.hasServicePermission(com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceKClass.class);\\nbl;`\r\n    // s = `var x = com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceKClass;\\nx`\r\n    // let s = `var c = com.fanfanlo.lib.utils.ClassUtils.Companion.kclassToClass(com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceKClass);\r\n    // var bl = com.fanfanlo.droidlib.auto.service.accessibility.a11yUtils.hasServicePermission(com.fanfanlo.lib.mc.libMainModel.application, c);\r\n    // bl;`\r\n        const res = autoWebViewJs.callScript<boolean>(hasPermissionScript)\r\n        // console.log('checkPermission2222', res)\r\n        return res\r\n}\r\nexport const a11yScript = {\r\n  getA11yServiceLiveInfo,\r\n  hasPermission,\r\n  openPermission,\r\n  checkPermission,\r\n  hasPermissionScript,\r\n}","import { useTranslation } from \"@fanfanlo\"\r\n\r\nexport enum AndroidPermissionStatus{\r\n    granted = 'granted',\r\n    denied = 'denied',\r\n    shouldAskAgain = 'shouldAskAgain',\r\n}\r\nexport interface IAndroidPermission{\r\n    name:string\r\n    status:AndroidPermissionStatusType\r\n}\r\n\r\nexport interface IAndroidPermissions {\r\n    [key:string]:IAndroidPermission\r\n}\r\nexport type AndroidPermissionStatusType = AndroidPermissionStatus.granted | AndroidPermissionStatus.denied | AndroidPermissionStatus.shouldAskAgain\r\n\r\nexport const androidPermissions:IAndroidPermissions = {\r\n    a11y:{\r\n        name:\"android.permission.ACCESS_NOTIFICATION_POLICY\",\r\n        status:AndroidPermissionStatus.shouldAskAgain,\r\n    }\r\n}\r\n\r\nexport function usePermissionStatus(status:AndroidPermissionStatus){\r\n    // console.log('usePermissionStatus_fn22', status, useTranslation)\r\n    const {t} = useTranslation('app-model/mc/android-permission/content') \r\n    return t(`androidPermission.${status}`)\r\n}","import { useState } from \"react\"\r\nimport { useEffect } from \"react\"\r\nimport { tabActivity } from \".\"\r\n\r\nexport function useTabActivity() {\r\n    const [isActive, setIsActive] = useState(tabActivity.isActive)\r\n    useEffect(() => {\r\n        tabActivity.listen((bl:boolean)=>{\r\n            setIsActive(bl)\r\n        })\r\n    }, [])\r\n    return isActive\r\n}\r\n","\r\n\"use client\"\r\nimport { a11yScript, autoWebViewJs, isInAndroid } from '@droid/android';\r\nimport { AndroidPermissionStatus, usePermissionStatus } from '@app/model';\r\nimport { useTabActivity } from '@fanfanlo';\r\nimport QuestionMarkIcon from '@mui/icons-material/QuestionMark';\r\nimport { Box, Button, ClickAwayListener, Tooltip } from '@mui/material';\r\nimport { useEffect, useState } from 'react';\r\n// import { useTranslation } from 'react-i18next';s\r\nimport { useTranslation } from '@fanfanlo';\r\nimport { useRouter } from 'next/router';\r\n\r\n\r\ninterface IA11yServiceLiveInfo {\r\n  hasPermission?: boolean\r\n  hasService?: boolean\r\n  isAlive?: boolean\r\n  pingTime?: number\r\n  crashed?: boolean\r\n}\r\nexport function AccessibilityInfo() {\r\n  const { t } = useTranslation('homepage/components/permissions/accessibility/content');\r\n  const [hasPermission, setHasPermission] = useState(a11yScript.hasPermission())\r\n  const status = usePermissionStatus(hasPermission ? AndroidPermissionStatus.granted : AndroidPermissionStatus.shouldAskAgain);\r\n  const [openTooltip, setOpenTooltip] = useState(false);\r\n  const isActive = useTabActivity()  \r\n  const router =useRouter();\r\n  function onSettingClick(){\r\n    // if(!isInAndroid())return;\r\n    autoWebViewJs.onCallOpenA11yPermission()\r\n  }\r\n  useEffect(()=>{\r\n    if(!isActive)return\r\n    setHasPermission(a11yScript.hasPermission())\r\n  }, [isActive])  \r\n  useEffect(()=>{\r\n    if(!isInAndroid()){\r\n      console.log('check a11y permission in webview,but not in android')\r\n      return;\r\n    }\r\n    let script = `var info =com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceLiveInfo;\\n var s = com.fanfanlo.lib.utils.companion.gson2.toJson(info);\\n s;`\r\n    script = `var info =com.fanfanlo.droidlib.auto.components.webview.AutoWebViewJs.a11yModel.serviceLiveInfo;\\n var s = com.fanfanlo.lib.utils.JsonUtil.gson2.toJson(info);\\n s;`\r\n    const info = autoWebViewJs.callScript<IA11yServiceLiveInfo>(script)\r\n    const bl = a11yScript.checkPermission()\r\n  }, []);\r\n\r\n  function onDangerPageButtonClick(){\r\n    router.push('/a11y-danger')\r\n  }\r\n  return (\r\n    <Box>\r\n      <Box>\r\n        <span>{t('AccessibilityInfo.name')}</span>\r\n        <span>:</span>\r\n        <button onClick={onSettingClick}\r\n         role='button' style={{marginLeft:\"0.5rem\", marginRight:\"0.5rem\"}}>{t('AccessibilityInfo.setting')}</button>\r\n        <span>{status}</span>\r\n        <span>{hasPermission ? 'ok' : 'no'}</span>\r\n        <span style={{ paddingLeft: '1rem' }}></span>\r\n        <ClickAwayListener onClickAway={() => setOpenTooltip(false)}>\r\n          <Tooltip\r\n            disableFocusListener\r\n            disableHoverListener\r\n            disableTouchListener\r\n            title={t(\"AccessibilityInfo.dangerDesc\")}\r\n            slotProps={{\r\n              popper: {\r\n                disablePortal: true,\r\n              },\r\n            }}\r\n            open={openTooltip}\r\n            onOpen={() => setOpenTooltip(true)}\r\n            onClose={() => setOpenTooltip(false)}>\r\n            <span onMouseDown={() => setOpenTooltip(true)}>\r\n              <span>{t('AccessibilityInfo.danger')}</span>\r\n              <span></span>\r\n              <span>\r\n                <QuestionMarkIcon fontSize=\"small\" sx={{ verticalAlign: 'sub' }} />\r\n              </span>\r\n              <span style={{color:\"red\"}}>\r\n                <Button onClick={onDangerPageButtonClick}></Button>\r\n              </span>\r\n            </span>\r\n          </Tooltip>\r\n        </ClickAwayListener>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}\r\n","import { PropsWithChildren, ReactNode, useState } from \"react\";\r\nimport { useTranslation } from '@fanfanlo';\r\nimport styles from './components.module.scss';\r\nimport { Tooltip } from \"@mui/material\";\r\nimport { ClickAwayListener } from \"@mui/material\";\r\nimport QuestionMarkIcon from '@mui/icons-material/QuestionMark';\r\nexport function PermissionCommonSetting(){\r\n    const {t} = useTranslation('homepage/components/permissions/components/content');\r\n    return <span className={styles.permissionComponentsSpanPadding}>\r\n        <button>\r\n        <span>{t('Components.setting')}</span>\r\n    </button>\r\n    </span>\r\n}\r\n\r\nexport function PermissionCommonNotPass(){\r\n    const {t} = useTranslation('homepage/components/permissions/components/content');\r\n    return <>\r\n        <span className={styles.permissionComponentsSpanPadding}>{t('Components.notPass')}</span>\r\n    </>\r\n}\r\n\r\nexport function PermissionCommonPass(){\r\n    const {t} = useTranslation('homepage/components/permissions/components/content');\r\n    return <>\r\n        <span className={styles.permissionComponentsSpanPadding}>{t('Components.pass')}</span>\r\n    </>\r\n}\r\n\r\n\r\nexport function PermissionCommonDanger({desc}:{desc:ReactNode}&PropsWithChildren){\r\n    const {t} = useTranslation('homepage/components/permissions/components/content');\r\n    \r\n  const [openTooltip, setOpenTooltip] = useState(false);\r\n    return(\r\n        <span className={styles.danger}>\r\n        <ClickAwayListener onClickAway={() => setOpenTooltip(false)}>\r\n          <Tooltip\r\n            disableFocusListener\r\n            disableHoverListener\r\n            disableTouchListener\r\n            title={desc}\r\n            slotProps={{\r\n              popper: {\r\n                disablePortal: true,\r\n              },\r\n            }}\r\n            open={openTooltip}\r\n            onOpen={() => setOpenTooltip(true)}\r\n            onClose={() => setOpenTooltip(false)}>\r\n            <span onMouseDown={() => setOpenTooltip(true)}>\r\n              \r\n        <span>{t('Components.danger')}</span>\r\n              <span></span>\r\n              <span>\r\n                <QuestionMarkIcon fontSize=\"small\" sx={{ verticalAlign: 'sub' }} />\r\n              </span>\r\n            </span>\r\n          </Tooltip>\r\n        </ClickAwayListener>\r\n        </span>\r\n    )\r\n}\r\n\r\nexport function PermissionCommonName({children}:PropsWithChildren){\r\n    return (\r\n        <span>{children}</span>\r\n    )\r\n}\r\n\r\nexport function PermissionCommonDesc({children}:PropsWithChildren){\r\n    return (\r\n        <span>{children}</span>\r\n    )\r\n}\r\n\r\n","import { autoWebViewJs } from \"../../AutoWebViewJs\"\r\n\r\n\r\nfunction hasPermission(){\r\n    let script = `var bl = com.fanfanlo.lib.permissions.FloatPermission.hasPermission();\\n bl;`\r\n    let res = autoWebViewJs.callScript<boolean>(script);\r\n    return res.javaResultData as boolean\r\n}\r\n\r\nfunction openPermission(){\r\n    let script = `var bl = com.fanfanlo.lib.permissions.FloatPermission.openPermission();\\n bl;`\r\n    let res = autoWebViewJs.callScript<boolean>(script);\r\n    return res.javaResultData as boolean\r\n}\r\n\r\nexport const floatingInfo = {\r\n    hasPermission,\r\n    openPermission\r\n}\r\n","import { useTranslation } from '@fanfanlo';\r\nimport { PermissionCommonDanger, PermissionCommonName, PermissionCommonNotPass, PermissionCommonPass, PermissionCommonSetting } from '../components/Components';\r\nimport { useEffect, useState } from 'react';\r\nimport { floatingInfo } from '@droid/android';\r\nimport { tabActivity } from '@fanfanlo';\r\nexport function FloatingInfo(){\r\n    const {t} = useTranslation('homepage/components/permissions/floating/content');\r\n    const [hasPermission, setHasPermission] = useState(floatingInfo.hasPermission());\r\n    useEffect(()=>{\r\n        const unlisten = tabActivity.listen((activity)=>{\r\n            setHasPermission(floatingInfo.hasPermission());\r\n        })  \r\n        return ()=>{\r\n            unlisten();\r\n        }\r\n    }, []);\r\n    return <div>\r\n        <PermissionCommonName>{t('FloatingInfo.name')}</PermissionCommonName>\r\n        <span onClick={()=>{\r\n            floatingInfo.openPermission();\r\n        }}>\r\n            <PermissionCommonSetting />\r\n        </span>\r\n        {hasPermission ? <PermissionCommonPass/> : <PermissionCommonNotPass/>}\r\n        <PermissionCommonDanger desc={t('FloatingInfo.dangerDesc')} />\r\n    </div>\r\n}\r\n","import { Box } from \"@mui/material\";\r\nimport { AccessibilityInfo } from \"../accessibility/AccessibilityInfo\";\r\nimport { FloatingInfo } from \"../floating/FloatingInfo\";\r\nexport function HomePagePermissions(){\r\n    return (<Box>\r\n        <AccessibilityInfo />   \r\n        <FloatingInfo />\r\n    </Box>)\r\n}","import { AppShell, TabbarContainer } from \"@app/ui\";\nimport { ProjectsUI } from \"@droid/project\";\nimport { i18nInit, IFrameReactContainer, toProxy, watchUpdates } from \"@fanfanlo\";\nimport { Box } from \"@mui/material\";\nimport { OpenA11yNodeButton } from \"@src/components/a11y/open-a11y-node-button\";\nimport { AndroidSettingsInfo } from \"@src/components/android-settings/AndroidSettingsInfo\";\nimport { KillSelf } from \"@src/components/app/kill-self/KillSelf\";\nimport { AddExternalMarketButton } from \"@src/components/markets/AddExternalMarketButton\";\nimport { MainPageAddButtons } from \"@src/components/markets/main-page-add-buttons/MainPageAddButtons\";\nimport { MarketsDevSettingsLineOpenLinkButton } from \"@src/components/page/markets-dev-settings/open-link-button/OpenLinkButton\";\nimport { SendSms } from \"@src/components/scripts/send-sms/SendSms\";\nimport { SmsScriptItemComponent } from \"@src/components/test/SmsScriptItemComponent\";\nimport { IMOpenPageLink } from \"@im/matrix\";\nimport { MeetingRoom } from \"@src/livekit-meeting/MeetingRoom.new\";\nimport { marketHtmlUtils } from \"@src/markets/market-html-utils\";\nimport { marketsScriptManager } from \"@src/markets/markets-script-manager\";\nimport { useEffect, useState } from \"react\";\nimport { HomePagePermissions } from \"../../components/permissions/home-page-permissions/HomePagePermissions\";\nimport { TestScript } from \"./test-script\";\nimport { NavBar } from \"@src/components/navbar/NavBar\";\n\ni18nInit()\nexport default function Home() {\n   \n    return (\n        <AppShell>\n            <TabbarContainer titleConf={{ ns: \"homepage/pages/home/content\", key: \"home.title\" }}\n                        navBar={<NavBar/>}>\n                {/* {isDev ? <Content /> : <ProdContent />} */}\n                <Content />\n                {/* <EmergencyCallContent /> */}\n            </TabbarContainer>\n        </AppShell>\n    )\n}\n\n\nfunction EmergencyCallContent(){\n\n    return(\n        <Box>\n            <MeetingRoom roomName=\"test-room\" userName={`user-${Math.random().toString(36).substring(2, 8)}`} />\n\n            <IMOpenPageLink />\n            <IFrameReactContainer url=\"/scripts/fanfanlo/scripts/emergency-alarm/index.js\" urlAsContent={true} htmlBuilder={marketHtmlUtils.createHtml} />\n        </Box>\n    )\n}\n\nfunction test() {\n    const s = `var script1=function(n){\"use strict\";return function(){function v(){return new Date().getTime()}var u={exports:{}},e={};/**\n * @license React\n * react-jsx-runtime.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */var c=Symbol.for(\"react.transitional.element\"),d=Symbol.for(\"react.fragment\");function s(T,t,r){var i=null;if(r!==void 0&&(i=\"\"+r),t.key!==void 0&&(i=\"\"+t.key),\"key\"in t){r={};for(var o in t)o!==\"key\"&&(r[o]=t[o])}else r=t;return t=r.ref,{$$typeof:c,type:T,key:i,ref:t!==void 0?t:null,props:r}}e.Fragment=d,e.jsx=s,e.jsxs=s,u.exports=e;var l=u.exports;function a(){return l.jsx(\"div\",{children:l.jsx(\"button\",{children:\"html\"})})}const x={UI:a};function E(){return v()}n.components=x,n.printA=E,Object.defineProperty(n,Symbol.toStringTag,{value:\"Module\"})}(),n}({}); return script1;`\n    const o = new Function(s)()\n    o.printA();\n    // console.log('cccccccccccccccomponents=', o.components)\n    return o;\n}\n\nfunction Content() {\n    const [ui, setUI] = useState(null)\n    useEffect(() => {\n        if (typeof window !== 'undefined') {\n            // console.log('has window', document.domain);\n            // document.domain = window.location.hostname;\n            // console.log('domain is', document.domain);\n            ; (window as any).sayHello = function (msg: string) {\n                alert('child' + msg)\n            }\n            console.log('window say=', (window as any).sayHello)\n        }\n        setTimeout(() => {\n            setUI(test().components.UI())\n        }, 1000 * 5)\n    }, [])\n\n    useEffect(() => {\n        marketsScriptManager.init();\n    }, []);\n    return (\n        <Box >\n            {/* <ProjectIFrame /> */}\n            {/* <MeetingRoom roomName=\"test-room\" userName={`user-${Math.random().toString(36).substring(2, 8)}`} />  */}\n\n            {/* <IMOpenPageLink /> */}\n            {/* <SendSms /> */}\n            <AndroidSettingsInfo />\n            {/* <SmsScriptItemComponent /> */}\n            {/*  */}\n            <AddExternalMarketButton />\n            {/* {o.components.UI()} */}\n            {/* html */}\n            {/* {ui} */}\n            <HomePagePermissions />\n            {/* <IFrameReactContainer url=\"/scripts/fanfanlo/scripts/emergency-alarm/index.js\" urlAsContent={true} htmlBuilder={marketHtmlUtils.createHtml} /> */}\n            {/* <IFrameReactContainer url=\"/scripts/fanfanlo/scripts/emergency-alarm/index.js\" urlAsContent={true} htmlBuilder={marketHtmlUtils.createHtml} /> */}\n            {/* <IFrameReactContainer url=\"/scripts/fanfanlo/scripts/emergency-alarm/index.js\" urlAsContent={true} htmlBuilder={marketHtmlUtils.createHtml} />\n            <IFrameReactContainer url=\"/scripts/fanfanlo/scripts/emergency-alarm/index.js\" urlAsContent={true} htmlBuilder={marketHtmlUtils.createHtml} />\n            <IFrameReactContainer url=\"/scripts/fanfanlo/scripts/emergency-alarm/index.js\" urlAsContent={true} htmlBuilder={marketHtmlUtils.createHtml} />\n            <IFrameReactContainer url=\"/scripts/fanfanlo/scripts/emergency-alarm/index.js\" urlAsContent={true} htmlBuilder={marketHtmlUtils.createHtml} />\n            <IFrameReactContainer url=\"/scripts/fanfanlo/scripts/emergency-alarm/index.js\" urlAsContent={true} htmlBuilder={marketHtmlUtils.createHtml} />\n            <IFrameReactContainer url=\"/scripts/fanfanlo/scripts/emergency-alarm/index.js\" urlAsContent={true} htmlBuilder={marketHtmlUtils.createHtml} /> */}\n\n            {/* <IframeResizer offsetSize={3} bodyMargin=\"0px\" bodyPadding=\"0px\" style={{width:'100%'}}\n            src=\"http://192.168.177.180:3000/tools-test/webview-version.html\" /> */}\n\n            {/* <IframeResizer offsetSize={3} bodyMargin=\"0px\" bodyPadding=\"0px\" style={{width:'100%'}}\n            src=\"https://baidu.com\" /> */}\n            {/*  */}\n            <Box>\n                <OpenA11yNodeButton />\n            </Box>\n            {/* script */}\n            <TestScript />\n            <Box>\n                <KillSelf />\n            </Box>\n            <MarketsDevSettingsLineOpenLinkButton />    \n            <MainPageAddButtons />\n            {/* <IFrameReactContainer url=\"http://192.168.177.180:5173/pages/accessibility-pn-an-info/#\" /> */}\n            {/* <IFrameReactContainer url=\"http://192.168.177.180:5173/pages/market1/\" /> */}\n            <ProjectsUI />\n\n            {/* <div>isInAndroid:{isInAndroid().toString()}</div>\n            <div>count:{count}</div> */}\n            <div>\n            </div>\n        </Box>\n\n    )\n}\n\n","\r\nexport * from './decorator'\r\nexport * from  './events'\r\nexport * from './log'\r\nexport * from './utils'\r\nexport * from './react'\r\nexport * from './mui'\r\nexport * from './ts'\r\n\r\n// export * from './effector/index'\r\nexport * from './remote/index'\r\nexport * from './nextjs/index'\r\nexport * from './ts/global.index'\r\nexport * from './i18n/index'\r\nexport * from './storage/index'\r\nexport * from './dispatcher/index'\r\nexport * from './watcher/index'\r\nexport * from './ui'\r\nexport * from './types'\r\nexport * from './router/router-utils'\r\nexport * from \"./iframe\"\r\nexport * from \"./map\"","import { storeUtils, toProxy } from \"@fanfanlo\";\r\n\r\nexport interface ISocketSettingData{\r\n    //\r\n    keepConnect:boolean;\r\n    url:string;\r\n}\r\n\r\nasync function createDefSocketSettingData():Promise<ISocketSettingData>{\r\n    const data =  {\r\n        keepConnect:false,\r\n        url:\"\"     \r\n     }\r\n     const res = await storeUtils.getNamespaceStoreWithData('market-dev-socket-setting', {defData:data})\r\n     return res.data;\r\n}\r\n\r\nexport async function getMarketDevSocketSettingData():Promise<ISocketSettingData>{\r\n    return await createDefSocketSettingData()\r\n}","import i18n from 'i18next'\r\nexport * from './II18nValueConf'\r\nexport const fanfanloI18n = i18n;\r\nexport * from './i18n-value-loader'\r\nexport * from './i18n-init'\r\nexport * from './lng'\r\nexport * from './useLanguages'\r\n/// i18nSetting","import { useRouter } from \"next/router\";\r\nimport { useTranslation } from \"@fanfanlo\";\r\n\r\nimport HomeIcon from '@mui/icons-material/Home';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport CreateIcon from '@mui/icons-material/Create';\r\nimport { BottomNavigation, BottomNavigationAction } from \"@mui/material\";\r\ninterface TabInfoType {\r\n  label: string;\r\n  value: string;\r\n  icon: React.ReactNode;\r\n}\r\n\r\nexport function NavBar() {\r\n  const router = useRouter();\r\n  const { pathname } = router;\r\n  const { t } = useTranslation('homepage/components/navbar/content');\r\n  const tabInfoList: TabInfoType[] = [\r\n    { label: t('NavBar.home'), value: '/', icon: <HomeIcon /> },\r\n    { label: t('NavBar.create'), value: '/script-creator', icon: <CreateIcon /> },\r\n    // { label: t('content.market'), value: '/market', icon: <StorefrontIcon /> },\r\n    { label: t('NavBar.settings'), value: '/settings', icon: <SettingsIcon /> },\r\n  ];\r\n  return (\r\n\r\n    <BottomNavigation showLabels value={pathname}>\r\n      {tabInfoList.map(e => (\r\n        <BottomNavigationAction\r\n          key={e.value}\r\n          label={e.label}\r\n          icon={e.icon}\r\n          data-id={`tabbar-${e.value}`}\r\n          className={pathname === e.value ? 'Mui-selected' : ''}\r\n          onClick={() => {\r\n            if (pathname === e.value) return;\r\n            router.push(e.value);\r\n          }}\r\n        />\r\n      ))}\r\n    </BottomNavigation>\r\n  );\r\n}","import { AutoWebViewJs } from \"@droid/android\";\r\nimport { Button } from \"@mui/material\";\r\n// import { buildScript, printScript1 } from \"@scripts/script1\";\r\nimport axios from \"axios\";\r\ntype LibPathKey = string\r\nfunction parseUsedLib(s: string) {\r\n    let res: LibPathKey[] = [];\r\n    let reg = /javaLib\\[\\\"(.*)\\\"\\]/g\r\n    let r = s.matchAll(reg);\r\n    for (let a of r) {\r\n        res.push(a[1] as LibPathKey)\r\n    }\r\n    return res;\r\n}\r\nlet beforeJavaLibCreateScript = `\r\nlet isScriptRunnable = true;\r\nlet scriptExitListeners = [];\r\nfunction addScriptExitListener(f){\r\n    removeScriptExitListener(f);\r\n    scriptExitListeners.push(f);\r\n}\r\nfunction removeScriptExitListener(f){\r\n    let index = scriptExitListeners.indexOf(f);\r\n    if(index == -1)return;\r\n    scriptExitListeners.splice(index, 1);\r\n}\r\nfunction onJavaCallTerminate(){\r\n    callScriptExit();\r\n    return true;\r\n}\r\nfunction callJavaExit(){\r\n\r\n}\r\nfunction jsCallComplete(){\r\n    callScriptExit();\r\n    callJavaExit();\r\n}\r\n\r\nfunction jsCallFailed(){\r\n    callScriptExit();\r\n    callJavaExit();\r\n}\r\nfunction callScriptExit(){\r\n    isScriptRunnable = false;\r\n    let res = \"\"\r\n    console.log('before call exit', scriptExitListeners.length);\r\n    scriptExitListeners.forEach((f)=>{f()});\r\n    console.log('after call exit');\r\n    return res;\r\n}\r\n    `\r\nexport function TestScript() {\r\n\r\n    async function onClick() {\r\n        // printScript1('hello script1')\r\n        runProjectScriptDemo();\r\n    }\r\n    return (\r\n        <>\r\n            <Button onClick={onClick}>script</Button>\r\n        </>\r\n    )\r\n}\r\nexport default TestScript\r\nasync function runProjectScriptDemo() {\r\n    \r\n    const res = await axios.get('/scripts/projectScript07.js')\r\n    const scriptString = res.data\r\n    let dependencies: LibPathKey[] = parseUsedLib(scriptString).concat(parseUsedLib(beforeJavaLibCreateScript));\r\n\r\n    // const conf = buildScript({\r\n    //     script: scriptString, injects: [\"console\", \"a11yModel\"],\r\n    //     optimizationLevel: -1, printScript: false,\r\n    //     scriptId: \"demo.project\"\r\n    // }, dependencies, beforeJavaLibCreateScript)\r\n    // const s = AutoWebViewJs.confToScript(conf);\r\n    // console.log('ssssssssssss', s)\r\n    // AutoWebViewJs.instance.callScriptRunner(s);\r\n    // console.log('code', code)\r\n}","import { IFrameHtmlBuilderOptions } from \"@fanfanlo\";\n\nfunction createHtml(script: string, opts?:IFrameHtmlBuilderOptions) {\n    return `<html>\n    <head>\n    <script type=\"importmap\">\n  {\n    \"imports\": {\n      \"react\": \"https://esm.sh/react@19\",\n      \"react-dom/client\": \"https://esm.sh/react-dom@19/client\"\n    }\n  }\n</script>\n        <script>\n                const IFRAME_ID = '${opts?.iframeId}';\n                window.IFRAME_ID = '${opts?.iframeId}';\n                \n            var autoWebViewJs = window.autoWebViewJs = window.parent.window.autoWebViewJs;\n            autoWebViewJs = window.parent.window.autoWebViewJs;\n            var callScript = window.callScript = autoWebViewJs.callScript;\n            var callScriptByConf = window.callScriptByConf = autoWebViewJs.callScriptByConf;\n            var isRealInAndroid = window.isRealInAndroid;\n            // var storeUtilsConf = window.storeUtilsConf = window.parent.window.storeUtilsConf;\n            var storeUtilsConf = window.storeUtilsConf = {\n                ns:{},\n                read:window.parent.window.storeUtilsConf.read,\n                write:window.parent.window.storeUtilsConf.write   \n            }\n        </script>\n        <title>droid lego</title>\n        <style>html, body{margin-left:-0px;padding:0;\n        background-color: white;}</style>\n    </head>\n    <body>\n        <div id=\"app\"></div>\n        <script>${script}</script>\n        <script>\n                // const IFRAME_ID = '${opts?.iframeId}';\n                function notifyResize() {\n                    const body = document.body;\n                    const html = document.documentElement;\n                    \n                    // \n                    const height = Math.max(\n                        body.scrollHeight,\n                        body.offsetHeight,\n                        html.scrollHeight,\n                        html.offsetHeight\n                    );\n                    \n                    // \n                    const width = Math.max(\n                        body.scrollWidth,\n                        body.offsetWidth,\n                        html.scrollWidth,\n                        html.offsetWidth\n                    );\n                    \n                    // \n                    window.parent.postMessage({\n                        type: 'resize',\n                        iframeId: IFRAME_ID,\n                        height,\n                        width\n                    }, '*');\n                }\n                \n                // \n                window.addEventListener('resize', notifyResize);\n                \n                // DOMContentLoadedDOM\n                document.addEventListener('DOMContentLoaded', notifyResize);\n                \n                // load\n                window.addEventListener('load', notifyResize);\n                \n                // MutationObserverDOM\n                const observer = new MutationObserver(notifyResize);\n                observer.observe(document.documentElement, {\n                    childList: true,\n                    subtree: true,\n                    attributes: true,\n                    characterData: true\n                });\n                \n                // \n                window.addEventListener('message', function(event) {\n                    if (event.data && event.data.type === 'requestResize') {\n                        // \n                        notifyResize();\n                    }\n                });\n                \n                // \n                notifyResize();\n        </script>\n    </body>\n</html>`\n}\n\nfunction mergeHtml(html:string, opts?:IFrameHtmlBuilderOptions){\n    let h = html;\n    if(!h.includes('<body')){\n        h = `<body>${h}</body>`\n    }\n    if(!h.includes('<html')){\n        h = `<html>${h}</html>`\n    }\n    if(!h.includes('<head')){\n        h = h.replace('<html>', '<html><head></head>')\n    }\n    h = h.replace('<head>', `<head><script>\n                const IFRAME_ID = '${opts?.iframeId}';\n                window.IFRAME_ID = '${opts?.iframeId}';\n                \n            var autoWebViewJs = window.autoWebViewJs = window.parent.window.autoWebViewJs;\n            autoWebViewJs = window.parent.window.autoWebViewJs;\n            var callScript = window.callScript = autoWebViewJs.callScript;\n            var callScriptByConf = window.callScriptByConf = autoWebViewJs.callScriptByConf;\n            var isRealInAndroid = window.isRealInAndroid;\n            // var storeUtilsConf = window.storeUtilsConf = window.parent.window.storeUtilsConf;\n            var storeUtilsConf = window.storeUtilsConf = {\n                ns:{},\n                read:window.parent.window.storeUtilsConf.read,\n                write:window.parent.window.storeUtilsConf.write   \n            }\n        </script>\n        \n        <style>html, body{margin-left:-0px;padding:0;\n        background-color: white;}</style>`);\n\n    h = h.replace(`</body>`, `\n        \n        <script>\n                function notifyResize() {\n                    const body = document.body;\n                    const html = document.documentElement;\n                    \n                    // \n                    const height = Math.max(\n                        body.scrollHeight,\n                        body.offsetHeight,\n                        html.scrollHeight,\n                        html.offsetHeight\n                    );\n                    \n                    // \n                    const width = Math.max(\n                        body.scrollWidth,\n                        body.offsetWidth,\n                        html.scrollWidth,\n                        html.offsetWidth\n                    );\n                    \n                    // \n                    window.parent.postMessage({\n                        type: 'resize',\n                        iframeId: IFRAME_ID,\n                        height,\n                        width\n                    }, '*');\n                }\n                \n                // \n                window.addEventListener('resize', notifyResize);\n                \n                // DOMContentLoadedDOM\n                document.addEventListener('DOMContentLoaded', notifyResize);\n                \n                // load\n                window.addEventListener('load', notifyResize);\n                \n                // MutationObserverDOM\n                const observer = new MutationObserver(notifyResize);\n                observer.observe(document.documentElement, {\n                    childList: true,\n                    subtree: true,\n                    attributes: true,\n                    characterData: true\n                });\n                \n                // \n                window.addEventListener('message', function(event) {\n                    if (event.data && event.data.type === 'requestResize') {\n                        // \n                        notifyResize();\n                    }\n                });\n                \n                // \n                notifyResize();\n        </script>\n        </body>`);\n        console.log('hhhhhhhhhhhhh=', h);\n    return h;\n}\nasync function createHtmlByUrl(url: string, opts?:IFrameHtmlBuilderOptions) {\n    const res = await fetch(url);\n    const content = await res.text();\n    return createHtml(content, opts);\n}\nexport const marketHtmlUtils = {\n    createHtml,\n    createHtmlByUrl,\n    mergeHtml\n}","import _ from \"lodash\"\r\nimport { listenAnyWildcard, multiUpdatedDispatchWildcard } from \"../dispatcher\"\r\nimport { getProxyObject } from \"./proxyWatch\"\r\n\r\nexport type IWatchUpdatesKeys<T extends object> = typeof listenAnyWildcard | typeof multiUpdatedDispatchWildcard | (keyof T)[]\r\n\r\nexport interface IWatchUpdatesConfig<T extends object>{\r\n    keys?:IWatchUpdatesKeys<T>\r\n    properties?:{\r\n        [K in keyof T]?:IP<T[K]>\r\n    }\r\n}\r\n\r\nexport type IP <T> = T extends (infer U)[] ? IP<U> : T extends object ? IWatchUpdatesConfig<T>:never\r\n\r\nexport interface IWatchUpdatePropertyInfo<T extends object>{\r\n    target:T\r\n    key:any\r\n    oldValue:any\r\n    newValue:any\r\n    // a.b.c.ddwatchChain[b,c,d]\r\n    watchChain:string[]\r\n}\r\n\r\ntype UnsubscriptMap = Map<any, ()=>void>\r\n\r\nexport type OnUpdate = (info:IWatchUpdatePropertyInfo<object>)=>void\r\n\r\nexport function watchUpdates<T extends object, U>(target: T, onUpdate:OnUpdate, conf?:IWatchUpdatesConfig<T>,watchChain?:string[]):()=>void{\r\n    watchChain = watchChain || []\r\n    const unsubMap:UnsubscriptMap = new Map()\r\n    const {dispatcher} = getProxyObject(target)\r\n    const unsub = dispatcher.addListener(listenAnyWildcard, createOnUpdateFn(target, onUpdate, unsubMap, [...watchChain], conf))\r\n    unsubMap.set(target, unsub);\r\n    for(const key in target){\r\n        const value = target[key]\r\n        if(!_.isObject(value) || !checkIsInWatch(key, target, conf))continue\r\n        const subConf = _.isArray(target) ? conf : conf?.properties?.[key]\r\n        listenSubKey(target, key, unsubMap, onUpdate, [...watchChain, key], subConf as IWatchUpdatesConfig<any>)\r\n    }\r\n    return ()=>{\r\n        unsubMap.forEach((unsub, target)=>unsub())\r\n    }\r\n}\r\n\r\nfunction createOnUpdateFn<T extends object>(target:T, onUpdate:OnUpdate, unsubMap:UnsubscriptMap, watchChain:string[], conf?:IWatchUpdatesConfig<T>){\r\n    return (prop:any, now:T[keyof T], old:T[keyof T])=>{\r\n        // console.log('ttttttttttttt arget=', target, 'prop=', prop, 'now=', now, 'old=', old)\r\n        if(!checkIsInWatch(prop, target, conf))return\r\n        if(_.isObject(old)){\r\n            unsubMap.get(old)?.()\r\n            unsubMap.delete(old)\r\n        }\r\n        onUpdate({target, key:prop, oldValue:old, newValue:now, watchChain:[...watchChain, prop]})\r\n        const subConf = _.isArray(target) ? conf : conf?.properties?.[prop as keyof T]\r\n        listenSubKey(target, prop, unsubMap, onUpdate, [prop, ...watchChain], subConf as IWatchUpdatesConfig<any>)\r\n    }\r\n}\r\n\r\nfunction checkIsInWatch(prop:any, target:any, conf?:IWatchUpdatesConfig<any>){\r\n    return !conf || conf.keys === listenAnyWildcard || (_.isArray(conf.keys) && conf.keys.includes(prop)) || (conf.properties && (prop in conf.properties)) || _.isArray(target)\r\n}\r\n\r\nfunction listenSubKey<T extends object, U extends object>(target:T, key:any, unsubMap:UnsubscriptMap, onUpdate:OnUpdate, watchChain:string[], property?:IWatchUpdatesConfig<U>){\r\n    const u = (target as any)[key] as U\r\n    if(!u)return;\r\n    if(!_.isObject(u))return\r\n    const unsub = watchUpdates(u, onUpdate, property, [...watchChain])\r\n    unsubMap.set(u, unsub)\r\n\r\n}","import _ from \"lodash\"\r\nimport { listenAnyWildcard } from \"../dispatcher\"\r\nimport { proxyUtils } from \"./proxyUtils\"\r\nimport { getProxyObject, IProxyObject, isProxy, toProxy, getProxyWatchRealTarget } from \"./proxyWatch\"\r\nimport { objectCountUtils } from \"../utils\"\r\ninterface IParentProxyInfo<T>{\r\n    parent?:any\r\n    target:T\r\n    watchProxy:IProxyObject<T>\r\n    unwatch?:()=>void\r\n}\r\ninterface IParentProxyOptions{\r\n\r\n}\r\nconst objectMap = new WeakMap<object, IParentProxyInfo<any>>()\r\n\r\nfunction getParentProxyObject(parent:object, options?:IParentProxyOptions){\r\n    proxyUtils.pauseProxy()\r\n    // const proxyInfo = isProxy(parent)\r\n    // const target = proxyInfo?.target || parent\r\n    const target = getProxyWatchRealTarget(parent)\r\n\r\n    // console.log('proxy', target)\r\n    // console.log('proxy info is', proxyInfo)\r\n    // console.log('kkkkkkkkkkk', Object.keys(target))\r\n    // \r\n    let proxyObject = (objectMap.get(target)) as IParentProxyInfo<any>\r\n    if(!proxyObject){\r\n        const watchProxy = getProxyObject(parent)\r\n        proxyObject = {target, watchProxy:watchProxy} as IParentProxyInfo<any>\r\n        const unsub = watchProxy.dispatcher.addListener(listenAnyWildcard, (prop, value, old, target)=>{\r\n            if(_.isObject(old)){\r\n                const oldProxyObject = objectMap.get(old)\r\n                if(oldProxyObject){\r\n                    oldProxyObject.parent = undefined\r\n                    oldProxyObject.unwatch?.()\r\n                    oldProxyObject.unwatch = undefined\r\n                }\r\n            }\r\n            if(_.isObject(value)){\r\n                const newProxyObject = getParentProxyObject(value, options)\r\n                newProxyObject.parent = target\r\n            }\r\n            // console.log('watchProxy changed', prop, value, old, target)\r\n        })\r\n        proxyObject.unwatch = unsub\r\n        // console.log('set proxyObject target', objectCountUtils.getObjectCount(target),target)\r\n        // console.log('set proxyObject proxy', objectCountUtils.getObjectCount(watchProxy.proxy),watchProxy.proxy)\r\n        if(objectCountUtils.getObjectCount(target) == objectCountUtils.getObjectCount(proxyObject.watchProxy.proxy)){\r\n            throw new Error('proxy object count is same')\r\n        }\r\n        objectMap.set(target, proxyObject)\r\n    }\r\n    loopChildren(target, options)\r\n    proxyUtils.resumeProxy()\r\n    return proxyObject\r\n}\r\n\r\nfunction loopChildren(parent:object, options?:IParentProxyOptions){\r\n    for(const key in parent){\r\n        const child = (parent as any)[key]\r\n        if(!_.isObject(child))continue;\r\n        const info = getParentProxyObject(child, options)\r\n        info.parent = parent\r\n    }\r\n}\r\nexport function destroyParentProxy(parent:object){\r\n    if(!_.isObject(parent))throw new Error('target must be an object')\r\n    const info = getParentProxyObject(parent)\r\n    info.parent = undefined\r\n    objectMap.delete(parent)\r\n    for(const key in parent){\r\n        const child = (parent as any)[key]\r\n        if(!_.isObject(child))continue;\r\n        destroyParentProxy(child)\r\n    }\r\n}\r\nexport function isParent(parent:object){\r\n    return objectMap.get(parent)\r\n}\r\nexport function toParent(target:object){\r\n    return getParentProxyObject(target).watchProxy.proxy\r\n}\r\n\r\nexport function getParentProxyInfo(target:object){\r\n    return getParentProxyObject(target)\r\n}\r\n\r\nexport function getParentProxyTarget(target:object){\r\n    return getParentProxyObject(target).target\r\n}\r\n\r\nexport function getParent<T>(target:object):T | undefined{\r\n    return getParentProxyObject(target).parent as T | undefined\r\n}\r\nexport function getParentWatchProxy<T>(target:object):T{\r\n    const parent = getParentProxyObject(target).parent\r\n    if(!parent)throw new Error('parent is undefined')\r\n    return toProxy(parent) as T\r\n}\r\n","\r\nimport { getParentProxyTarget, isParent, toParent } from \"./parentProxy\"\r\nimport { proxyUtils } from \"./proxyUtils\"\r\nimport { getProxyObject, isProxy, toProxy } from \"./proxyWatch\"\r\nexport function toParentWatchProxy(target:object){\r\n    return toParent(toProxy(target))\r\n}\r\n\r\nexport function getProxyTarget<T extends object>(target:T):T{\r\n    let parentObject = isParent(target) ? getParentProxyTarget(target) : target\r\n    // console.log('parent object 1111', parentObject)\r\n    const proxyObject = getProxyObject(parentObject).target\r\n    // console.log('proxy object 0000', proxyObject)\r\n    parentObject = isParent(proxyObject) ? getParentProxyTarget(proxyObject) : proxyObject\r\n    // console.log('parent object 2222', parentObject)\r\n    return parentObject\r\n}\r\n\r\nexport function getTarget<T extends object>(target:T){\r\n    proxyUtils.pauseProxy()\r\n    let t = target\r\n    let c = 0\r\n    while(t && isProxy(t)){\r\n        c++\r\n        if(c > 5)break;\r\n        // console.log('is parent', objectCountUtils.getObjectCount(t), !!isParent(t))\r\n        // console.log('is proxy object', objectCountUtils.getObjectCount(t), !!isProxy(t))\r\n        // if(isParent(t))t = isParent(t)?.target\r\n        if(isProxy(t))t = isProxy(t)?.target\r\n        // console.log('t', objectCountUtils.getObjectCount(t), Object.keys(t), t)\r\n    }\r\n    // console.log('ttttttttttttt', objectCountUtils.getObjectCount(t), t)\r\n    proxyUtils.resumeProxy()\r\n    return t\r\n}\r\n","\r\nimport { clear, createStore, del, entries, get, set } from 'idb-keyval';\r\nimport { getProxyObject, getProxyTarget, toProxy, watchUpdates } from \"../watcher\";\r\nimport { INamespaceOptions, IStoreWithData } from \"./store-intf\";\r\nimport { Log } from \"../log/Log\";\r\nimport _ from 'lodash';\r\n//   let db;\r\n// const request = typeof window == 'undefined'?null:window.indexedDB.open(\"MyTestDatabase\");\r\n// if(request){\r\n//   request.onerror = (event) => {\r\n//     console.error(\" web  IndexedDB\");\r\n//   };\r\n//   request.onsuccess = (event) => {\r\n//     console.log('idnexed db event', event)\r\n//   };\r\n// }\r\n\r\nconst libs:Record<string, IStoreWithData<Record<string, any>>> = {}\r\n\r\nasync function getNamespaceStoreWithData<T extends Record<string, any>>(ns:string, opts?:INamespaceOptions<T>):Promise<IStoreWithData<T>>{\r\n    // let unsub:(()=>void)|undefined;\r\n    const log = new Log(false, `indexedDb utils getNamespaceStoreWithData_${ns}`);\r\n    log.pause = true\r\n    // log.pause = ns !== 'devLibInfo'\r\n    let ss = libs[ns];\r\n    log.log('init indexed db', ns)\r\n    if(ss){\r\n        return ss as IStoreWithData<T>\r\n    }\r\n    const s = createStore(ns, ns)\r\n    if(opts?.forceReset === true && opts.defData){\r\n      console.log('clean s', ns)\r\n      await clear(s);\r\n      const keys = Object.keys(opts.defData)\r\n      for (const key of keys) {\r\n        console.log('clear insert', key, opts.defData[key])\r\n        await set(key as IDBValidKey, opts.defData[key], s)\r\n      }\r\n      console.log('clean complete', ns);\r\n    }\r\n    const raw = await entries(s);\r\n    let o:T|undefined\r\n    if(raw && raw.length > 0){\r\n      o = Object.fromEntries(raw);\r\n    }\r\n    if(!o){\r\n      if(opts?.defData && opts.mergeDefData){\r\n        o = opts.defData;\r\n      }else{\r\n        o = {} as T;\r\n      }\r\n    }\r\n    await mergeDefault();\r\n    async function mergeDefault(){\r\n      log.log('mergeDefaultdata check opts', ns);\r\n      if(!opts)return;\r\n      log.log('mergeDefaultdata check mergeDefdata must is true', opts.mergeDefData);\r\n      if(opts.mergeDefData !== true)return;\r\n      log.log('start mergeDefaultdata', ns)\r\n      if(!raw || raw.length == 0)return;\r\n      log.log('mergeDefaultdata check defdata');\r\n      if(!opts.defData)return;\r\n      log.log('mergeDefaultdata check mergedefdata');\r\n      if(opts.forceReset)return;\r\n      log.log('mergeDefaultdata check o');\r\n      if(!o)return;\r\n      const defData = opts.defData\r\n      log.log('real start mergeDefData', defData)\r\n      let keys = Object.keys(defData);\r\n      for(let i =0 ;i < keys.length; i ++){\r\n        let key = keys[i];\r\n        if(key in o)continue;\r\n        log.log('add key', key, defData[key])\r\n        await set(key, defData[key], s);\r\n        (o as any)[key] = defData[key];\r\n      }\r\n      keys = Object.keys(o);\r\n      for(let i = 0; i < keys.length; i ++){\r\n        let key = keys[i];\r\n        if(key in defData)continue;\r\n        log.log('del key', key);\r\n        await del(key, s);\r\n        delete o[key];\r\n      }\r\n      log.log('after merge o=', o)\r\n    }\r\n    const data = toProxy(o);\r\n    // \r\n    watchUpdates(data, async (info)=>{\r\n      // log.forcePrint = true;\r\n      log.log(` watchUpdates_fn ns=${ns} data=`,data)\r\n      log.log(' watchUpdates_fn info=', info)\r\n      if(info.watchChain.length == 0){\r\n        // const pause = log.pause;\r\n        // log.pause = false;\r\n        console.error(' watchUpdates_fn no key found', info)\r\n        console.error(' watchUpdates_fn no key found info=', info)\r\n        console.error(' watchUpdates_fn data =', data)\r\n        // log.pause = pause;\r\n        return\r\n      }\r\n      const key = info.watchChain[0];\r\n      if(!(key in data)){\r\n        console.error(' watchUpdates_fn key not found in data', `key=${key}`, `ns=${ns}`)\r\n        console.error(' watchUpdates_fn data =', data)\r\n        return\r\n      }\r\n      log.log('watchUpdates_fn write', `key=${key}`, \"v=\", data[key])\r\n      log.log('json value=', JSON.stringify(data[key]))\r\n      try{\r\n        // console.log('writeaab data=', data)\r\n        let v = data[key];\r\n        if(_.isObject(v)){\r\n          v = getProxyTarget(v)\r\n        }\r\n        // console.log('writebba v', key, v)\r\n        await set(key as IDBValidKey, v, s)\r\n        // const x = await get(key, s)\r\n        // console.log('write 3', x)\r\n        log.log('getNamespaceStoreWithData_fn watchUpdates', info)\r\n      }catch(e){\r\n        console.trace('path')\r\n        console.error('getNamespaceStoreWithData_fn watchUpdates set error', e)\r\n      }\r\n      // log.forcePrint = false;\r\n    })\r\n    async function clean(){\r\n      const keys = Object.keys(data)\r\n      for (const key of keys) {\r\n        delete data[key]\r\n      }\r\n      await clear(s)\r\n    }\r\n    const res = {\r\n      data,\r\n      store:{\r\n        getData:()=>data,\r\n        read<U>(key:keyof T, defaultValue?:U):U|undefined{\r\n          return data[key] ?? defaultValue;\r\n        },\r\n        write<K extends keyof T>(key: K, value: T[K], override?: boolean){\r\n          data[key] = value;\r\n          set(key as IDBValidKey, value, s)\r\n        },\r\n        clearAll():void{\r\n          clean()\r\n        },\r\n        setAll(d:Partial<T>){\r\n          clean();\r\n          Object.assign(data, d)\r\n          const keys = Object.keys(d)\r\n          for (const key of keys) {\r\n            set(key as IDBValidKey, d[key], s)\r\n          }\r\n        },\r\n        remove(key:string):void{\r\n          delete data[key]\r\n          del(key as IDBValidKey, s)\r\n        }\r\n      }\r\n    }\r\n    \r\n\r\n    libs[ns] = res;\r\n    return res;\r\n}\r\nasync function init(){\r\n\r\n}\r\nexport const indexedDbUtils = {\r\n    init,\r\n    getIndexedDbStore:getNamespaceStoreWithData\r\n}","import _ from 'lodash';\r\nimport store, { StoreType } from 'store2';\r\nimport { toProxy, watchUpdates } from '../watcher';\r\nimport { IStoreWithData, INamespaceOptions, IStores } from './store-intf';\r\nimport { indexedDbUtils } from './indexed-db-utils';\r\nimport { Log } from '../log/Log';\r\n\r\nconst localStoreMap: Record<string, IStoreWithData<Record<string, any>>> = {}\r\nfunction createLocalStore<T extends Record<string, any>>(ns: string, opts?: INamespaceOptions<T>): IStoreWithData<T> {\r\n    let unsub: (() => void) | undefined\r\n    let ss = localStoreMap[ns]\r\n    if (ss) {\r\n        return ss as IStoreWithData<T>\r\n    }\r\n    const s = store.namespace(ns);\r\n    if (opts?.forceReset && opts?.defData) {\r\n        s.setAll(opts?.defData)\r\n    }\r\n    if (_.isObject(opts?.defData) && Object.keys(s.getAll()).length == 0) {\r\n        s.setAll(opts?.defData)\r\n    }\r\n    let data: T = createData();\r\n    function createData(): T {\r\n        unsub?.()\r\n        unsub = undefined\r\n        try {\r\n            const d = (s.getAll()) as T;\r\n            const data = toProxy((d && Object.keys(d).length > 0 ? d : {}) as T);\r\n            watchData(data);\r\n            return data;\r\n        } catch (e) {\r\n            console.error(e)\r\n            // sstoStringproxy\r\n            s.setAll({})\r\n            return toProxy({}) as T\r\n        }\r\n    }\r\n    let requestAnimationFrameId: number = -1;\r\n    function watchData(data: T) {\r\n        unsub = watchUpdates(data, () => {\r\n            if (requestAnimationFrameId > -1) return;\r\n            requestAnimationFrameId = window.requestAnimationFrame(() => {\r\n                requestAnimationFrameId = -1;\r\n                try {\r\n                    store.namespace(ns).setAll(data)\r\n                } catch (e) {\r\n                    alert(e)\r\n                    console.error(e)\r\n                }\r\n            })\r\n        });\r\n    }\r\n    const res = {\r\n        data,\r\n        store: {\r\n            getData: () => data,\r\n            read<U>(key: keyof T, defaultValue?: U): U | undefined {\r\n                return s.get(key, defaultValue)\r\n            },\r\n            write<K extends keyof T>(key: K, value: T[K], override?: boolean) {\r\n                // s.set(key, value, override)\r\n                // watchkey\r\n                data[key] = value;\r\n                // store.namespace(ns).set(key, value, override)\r\n            },\r\n            clearAll(): void {\r\n                store.namespace(ns).clearAll();\r\n                const keys = Object.keys(data);\r\n                for (const key of keys) {\r\n                    delete data[key];\r\n                }\r\n            },\r\n            setAll(d: Partial<T>) {\r\n                store.namespace(ns).setAll(d)\r\n                res.store.clearAll();\r\n                const keys = Object.keys(d) as (keyof T)[];\r\n                for (const key of keys) {\r\n                    (data as any)[key] = d[key];\r\n                }\r\n            },\r\n            remove(key: string): void {\r\n                store.namespace(ns).remove(key)\r\n                delete data[key]\r\n            }\r\n        }\r\n    }\r\n    localStoreMap[ns] = res;\r\n    return res;\r\n}\r\nfunction createJavaStore<T extends Record<string, any>>(ns: string, opts?: INamespaceOptions<T>): IStoreWithData<T> {\r\n    const log = new Log(false, 'createJavaStore_fn ns= ' + ns);\r\n    log.pause = true;\r\n    // log.pause = ns != `@fanfanlo/scripts/emergency-alarm/script`;\r\n    let unsub: (() => void) | undefined;\r\n    let data: T = createData();\r\n    function createData() {\r\n        unsub?.()\r\n        unsub = undefined\r\n        const raw = getStoresNamespace<T>(ns, opts) || {} as T;\r\n        const o = raw || {} as T;\r\n\r\n        mergeDefault();\r\n        async function mergeDefault() {\r\n            // log.log('mergeDefaultdata check opts', ns, raw);\r\n            if (!opts) return;\r\n            // log.log('mergeDefaultdata check mergeDefdata must is true', opts.mergeDefData);\r\n            if (opts.mergeDefData !== true) return;\r\n            // log.log('start mergeDefaultdata', ns)\r\n            if (!raw || _.isArray(raw) || !_.isObject(raw)) return;\r\n            // log.log('mergeDefaultdata check defdata');\r\n            if (!opts.defData) return;\r\n            // log.log('mergeDefaultdata check mergedefdata');\r\n            if (opts.forceReset) return;\r\n            // log.log('mergeDefaultdata check o');\r\n            if (!o) return;\r\n            const defData = opts.defData\r\n            // log.log('real start mergeDefData', defData)\r\n            let keys = Object.keys(defData);\r\n            let updated = false;\r\n            for (let i = 0; i < keys.length; i++) {\r\n                let key = keys[i];\r\n                if (key in o) continue;\r\n                // log.log('add key', key, defData[key]);\r\n                (o as any)[key] = defData[key];\r\n                updated = true;\r\n            }\r\n            keys = Object.keys(o);\r\n            for (let i = 0; i < keys.length; i++) {\r\n                let key = keys[i];\r\n                if (key in defData) continue;\r\n                // log.log('del key', key);\r\n                delete o[key];\r\n                updated = true;\r\n            }\r\n            // log.log('after merge o=', o);\r\n            if (updated) {\r\n                is?.write(ns, o)\r\n            }\r\n        }\r\n        const data = toProxy(o);\r\n        watchData(data);\r\n        return data;\r\n    }\r\n    let isClearAll = false;\r\n\r\n    let callingNextFrame = false;\r\n    function callNextFrame(){\r\n        if(callingNextFrame)return;\r\n        callingNextFrame = true;\r\n        window.requestAnimationFrame(()=>{\r\n            callingNextFrame = false;\r\n            log.log('java store callNextFrame', ns, data)\r\n            is?.write(ns, data)\r\n        })\r\n    }\r\n    function watchData(data: T) {\r\n        unsub = watchUpdates(data, () => {\r\n            if (isClearAll) return;\r\n            // console.log('java watch data', 'ns=', ns, 'data=', data)\r\n            log.log(`java watch data`, `ns=`, ns, `data=`, data)\r\n            // is?.write(ns, data)\r\n            callNextFrame()\r\n        });\r\n    }\r\n    const res = {\r\n        data,\r\n        store: {\r\n            getData: () => data,\r\n            read<U>(key: keyof T, defaultValue?: U): U | undefined {\r\n                log.log('java store read', ns, key, defaultValue)\r\n                return data[key] ?? defaultValue;\r\n            },\r\n            write<K extends keyof T>(key: K, value: T[K], override?: boolean) {\r\n                log.log('java store write', ns, key, value, override)\r\n                data[key] = value;\r\n            },\r\n            clearAll(): void {\r\n                is?.write(ns, '')\r\n                const keys = Object.keys(data);\r\n                isClearAll = true;\r\n                for (const key of keys) {\r\n                    delete data[key];\r\n                }\r\n                isClearAll = false;\r\n            },\r\n            setAll(d: Partial<T>) {\r\n                is?.write(ns, d)\r\n                res.store.clearAll();\r\n                const keys = Object.keys(d);\r\n                isClearAll = true;\r\n                for (const key of keys) {\r\n                    (data as any)[key] = d[key];\r\n                }\r\n                isClearAll = false;\r\n            },\r\n            remove(key: string): void {\r\n                delete data[key]\r\n            }\r\n        }\r\n    }\r\n    return res;\r\n}\r\nlet is: IStores<Record<string, any>> | undefined = undefined;\r\nfunction setStoresProxy(s: IStores<Record<string, any>>) {\r\n    s.ns = toProxy(s.ns)\r\n    is = s;\r\n}\r\nfunction getStoresNamespace<T extends Record<string, any>>(ns: string, opts?: INamespaceOptions<T>): T | undefined {\r\n    const log = new Log(false, 'getStoresNamespace_fn ns= ' + ns);\r\n    log.pause = true;\r\n    log.log('is=', is)\r\n    if (!is) return undefined;\r\n    let s = is.ns[ns];\r\n    log.log('s=', s)\r\n    if (!s) {\r\n        s = is.read(ns);\r\n        log.log('s2=', s)\r\n        if (s) {\r\n            // is.ns[ns] = toProxy(s);\r\n        } else {\r\n            s = is.ns[ns] = (opts?.defData || {}) as T;\r\n        }\r\n    }\r\n    if (opts?.forceReset && opts.defData) {\r\n        let keys = Object.keys(s);\r\n        for (const key of keys) {\r\n            delete s[key];\r\n        }\r\n        keys = Object.keys(opts.defData);\r\n        for (const key of keys) {\r\n            s[key] = opts.defData[key];\r\n        }\r\n        log.log('getStoresNamespace_fn force reset', ns,)\r\n        is.write(ns, opts.defData)\r\n    }\r\n    is.ns[ns] = toProxy(s)\r\n    return is.ns[ns];\r\n}\r\nfunction namespace(ns: string) {\r\n    const res = is ? createJavaStore(ns) : createLocalStore(ns);\r\n    return res.store\r\n}\r\n\r\nasync function getNamespaceStoreWithData<T extends Record<string, any>>(ns: string, opts?: INamespaceOptions<T>): Promise<IStoreWithData<T>> {\r\n\r\n    const res = is ? createJavaStore(ns, opts) : indexedDbUtils.getIndexedDbStore(ns, opts);\r\n    return res;\r\n}\r\n\r\n//store2\r\n//script\r\nexport const storeUtils = {\r\n    //localstorage\r\n    //\r\n    namespace,\r\n    getNamespaceStoreWithData,\r\n    setStoresProxy,\r\n    // localStorage\r\n    // store2set\r\n    createLocalStore,\r\n    //storestore2,\r\n    createStore2: (ns: string) => store.namespace(ns)\r\n}","export * from './storage'\r\nexport * from './store-page-context'\r\nexport * from './store-utils'\r\nexport * from './indexed-db-utils'\r\nexport * from './store-intf'","import { Button, Dialog, DialogActions, DialogContent, DialogTitle } from \"@mui/material\"\r\nimport React, { PropsWithChildren, useState } from \"react\"\r\nimport { useTranslation } from \"react-i18next\"\r\nexport interface ButtonConfirmProps {\r\n    title?: string | React.ReactNode\r\n    content?: string | React.ReactNode\r\n    confirmText?: string | React.ReactNode\r\n    cancelText?: string | React.ReactNode\r\n    onConfirm?: () => void\r\n    onCancel?: () => void\r\n    onClose?: (confirmed:boolean) => void\r\n    cancelId?: string\r\n    confirmId?: string\r\n}\r\n\r\nexport function ButtonConfirm({ title, content, confirmText, cancelText, onConfirm, onCancel, onClose , cancelId, confirmId, children }: ButtonConfirmProps & PropsWithChildren) {\r\n    const [isOpen, setIsOpen] = useState(false)\r\n    const {t} = useTranslation('fanfanlo/mui/dialog/content')\r\n    return (\r\n        <>\r\n            <span onClick={() => setIsOpen(true)}>\r\n                {children}  \r\n            </span>\r\n            <Dialog open={isOpen} onClose={() => setIsOpen(false)}>\r\n                <DialogTitle>{title || t('ButtonConfirm.title')}</DialogTitle>\r\n                <DialogContent>{content || t('ButtonConfirm.content')}</DialogContent>\r\n                <DialogActions>\r\n                    <Button id={cancelId || 'btn-dialog-button-confirm-cancel'}\r\n                    data-id={cancelId || 'btn-dialog-button-confirm-cancel'}\r\n                    onClick={()=>{setIsOpen(false); onCancel?.();onClose?.(false)}}>{cancelText || t('ButtonConfirm.cancel')}</Button>\r\n                    <Button id={confirmId || 'btn-dialog-button-confirm-confirm'}\r\n                    data-id={confirmId || 'btn-dialog-button-confirm-confirm'}\r\n                    onClick={()=>{setIsOpen(false); onConfirm?.();onClose?.(true)}}>{confirmText || t('ButtonConfirm.confirm')}</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </>\r\n    )\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"permissionComponentsSpanPadding\":\"components_permissionComponentsSpanPadding___8iUl\",\"danger\":\"components_danger__at2U4\",\"pass\":\"components_pass__QEjyt\"};","import { Dispatcher, isValidWebSocketURL, SocketConnectStatusEnum, toProxy } from \"@fanfanlo\";\r\nimport { IMarketDevConnectEventType, IMarketDevEvent } from \"@market/lib\";\r\nimport { getMarketDevSocketSettingData } from \"./market-dev-socket-setting-data\";\r\nconst dispatcher = new Dispatcher();\r\ninterface ISocketConnectInfo{\r\n    status:SocketConnectStatusEnum;\r\n    retryCount:number;\r\n}\r\n\r\nexport const socketConnectInfo:ISocketConnectInfo = toProxy({\r\n    status:SocketConnectStatusEnum.disconnected,\r\n    retryCount:0\r\n})\r\nlet ws:WebSocket|undefined;\r\nasync function connect(){\r\n    const url = (await getMarketDevSocketSettingData()).url\r\n    if(!isValidWebSocketURL(url)){\r\n        return;\r\n    }\r\n    socketConnectInfo.status = SocketConnectStatusEnum.connecting;\r\n    const w = ws = new WebSocket(url);\r\n    w.onopen = () => {\r\n        socketConnectInfo.status = SocketConnectStatusEnum.connected;\r\n        toGetAllScripts();\r\n    }\r\n    w.onclose = () => {\r\n        console.log('oscket on close', arguments)\r\n        socketConnectInfo.status = SocketConnectStatusEnum.disconnected;\r\n        checkNeedRetry();\r\n    }\r\n    w.onerror = () => {\r\n        console.log('socket onerror', arguments)\r\n        socketConnectInfo.status = SocketConnectStatusEnum.disconnected;\r\n        close();\r\n        checkNeedRetry();\r\n    }\r\n    w.onmessage = (e:MessageEvent) => {\r\n        try{\r\n            const event:IMarketDevEvent<any> = JSON.parse(e.data)\r\n            console.log('market dev socket onmessage', event.type)\r\n            dispatcher.dispatch(event.type, event.data)\r\n        }catch(e){\r\n            console.error(e)\r\n        }\r\n    }\r\n\r\n    async function toGetAllScripts(){\r\n        const event = {type: IMarketDevConnectEventType.getAllScripts}\r\n        w.send(JSON.stringify(event));\r\n    }\r\n}\r\nfunction close(){\r\n    if(!ws)return;\r\n    ws.close();\r\n    ws = undefined;\r\n}\r\nasync function checkNeedRetry(){\r\n    const settingData = await getMarketDevSocketSettingData()\r\n    if(!settingData.keepConnect){\r\n        return;\r\n    }\r\n    socketConnectInfo.retryCount++;\r\n    setTimeout(()=>{\r\n        connect();\r\n    }, 1000 * 5)\r\n}\r\nfunction disconnect(){\r\n    if(ws){\r\n        ws.close();\r\n        ws = undefined;\r\n    }\r\n    socketConnectInfo.status = SocketConnectStatusEnum.disconnected;\r\n}\r\nexport const marketsDevSocket = {\r\n    connect,\r\n    disconnect,\r\n    socketConnectInfo,\r\n    dispatcher\r\n}\r\n","'use client';\r\nimport { Box, CssBaseline, Paper, Stack } from '@mui/material';\r\n\r\nimport React, { PropsWithChildren } from 'react';\r\nimport { ITitleI18nConf } from '../page';\r\nimport AndroidPageContent from '../page/AndroidPageContent';\r\n\r\nfunction BottomBar({navBar}:{navBar?:React.ReactNode}) {\r\n  return <Paper\r\n    id=\"bottom-navigation\"\r\n    sx={{ position: 'fixed', bottom: 0, left: 0, right: 0 }}\r\n    elevation={3}>\r\n    {navBar}\r\n  </Paper>;\r\n}\r\nexport function TabbarContainer({ children, titleConf, navBar }: {titleConf?:ITitleI18nConf, navBar:React.ReactNode} & PropsWithChildren)  {\r\n  return (\r\n    <Box sx={{ \r\n      minHeight: '100vh',\r\n      paddingBottom: '72px' // tabbar\r\n    }}>\r\n      <CssBaseline />\r\n      <AndroidPageContent titleConf={titleConf}>\r\n        {children}\r\n      </AndroidPageContent>\r\n      <BottomBar navBar={navBar} />\r\n    </Box>\r\n  );\r\n}\r\n\r\n"],"names":["autoJsStoreUtils","storeUtils","toProxy","IMarketDevConnectEventType","IMarketDevServerEventType","WatchResourceType","marketsDevSocket","marketDevLibData","devLibInfo","getMarketScriptDataNsPrefix","createMarketScriptDataNsPath","ns","writeNsAllFiles","files","nsPath","oldFiles","read","name","Object","keys","index","indexOf","splice","content","write","removeFile","writeFile","readNsAllFiles","readFile","getAllMarkets","listenDev","dispatcher","addListener","getAllScripts","onGetAllScript","update","onFileUpdate","data","allMarketLibData","client","resourceType","Html","html","htmls","path","Js","resources","length","script","console","log","isInitialized","init","getNamespaceStoreWithData","defData","forceReset","marketsDevScriptLib","validator","loadI18nValue","isValidWebSocketURL","url","isURL","protocols","require_protocol","SocketConnectStatusEnum","getSocketConnectStatusEnumI18n","status","ScriptType","IMarketDevClientEmitEventType","createProjectDefultData","projectStore","Button","useTranslation","useRouter","CreateProjectButton","t","router","onCreateProjectClick","project","addDraft","id","prefetch","push","span","data-id","data-typeof-create-project-id","onClick","projectUtils","getProjectName","localName","slice","ProjectContext","ButtonConfirm","Box","useContext","DeleteProjectButton","projectId","handleDelete","deleteProject","style","textAlign","color","br","title","onConfirm","childToProjectDataUtils","Grid2","ProjectName","edit","undefined","shallow","container","spacing","sx","width","size","getProjectElementsId","data-listof-project-list-edit-btn-id","ProjectUI","Provider","value","backgroundColor","padding","watchUpdates","List","ListItem","useEffect","useState","ProjectsTitle","div","h4","ProjectList","projects","map","Projects","setProjects","getListCopy","unsub","list","ProjectsUI","PermissionAskStatus","autoWebViewJs","Log","fileLog","checkPermissions","permissions","fnLog","sub","JSON","stringify","javaResultData","javaResultString","errMsg","callScript","info","result","isGranted","isAllGranted","granted","asking","permissionResult","ask","checkResult","completeEventName","askPermissionsBack","onEvent","window","addEventListener","unsubListener","removeEventListener","askPermissions","askPanelFunction","error","Error","toAsk","permissionUtils","androidDispatchers","Manifest","openHtmlShowA11yNodeInfoButton","openHtmlShowA11yNodeInfoWindow","documentHiddenData","useProxyWatch","toast","ulid","isChildrenPaused","isPaused","opened","eventType","selectEventIndex","shellListen","WebViewJsDispatcher","onSelectNode","s","clear","clipboardSetText","shellRemoveListen","Window","exitWindowIndex","exitWebviewJsIndex","removeListen","parseInt","windowId","et","listen","OpenA11yNodeButton","uiLog","isHidden","isWaitingPermissions","setIsWaitingPermissions","grantResults","onAskPermissionComplete","stoped","askingPermissions","res","Permission","CAMERA","SYSTEM_ALERT_WINDOW","BIND_ACCESSIBILITY_SERVICE","disabled","Modal","AndroidSettingsInfo","setPermissions","open","setOpen","onSettingClick","handleClose","onClose","bgcolor","p","ul","i","li","wordBreak","wordWrap","replace","AutoWebViewJs","appKillSelf","instance","KillSelf","success","Promise","r","setTimeout","nextPreload","AddExternalMarketButton","React","Menu","MenuItem","AddIcon","MainPageAddButtons","anchorEl","setAnchorEl","Boolean","handleClick","event","currentTarget","menuItems","variant","startIcon","item","MarketsDevSettingsOpenLinkButton","bl","MarketsDevSettingsLineOpenLinkButton","mt","mb","useCallback","useRef","forwardRef","Room","RoomEvent","RemoteParticipant","RemoteTrack","Track","createLocalAudioTrack","createLocalVideoTrack","Typography","Grid","Alert","IconButton","CircularProgress","Mic","MicIcon","MicOff","MicOffIcon","Videocam","VideoIcon","VideocamOff","VideoOffIcon","CallEnd","CallEndIcon","Refresh","RefreshIcon","mainModel","logger","uiLogger","VIDEO_PRESET","height","frameRate","maxBitrate","getTokenEndpoint","appConfig","livekit","jwt","MeetingRoomComponent","ref","roomName","userName","onDisconnect","onError","className","globalMediaState","setGlobalMediaState","isAudioEnabled","isVideoEnabled","roomRef","localTracksRef","videoElements","audioElements","participantStates","setParticipantStates","isUnmountedRef","isConnecting","setIsConnecting","hasConnected","setHasConnected","setError","isMuted","setIsMuted","setIsVideoEnabled","participants","setParticipants","fetchToken","identity","response","fetch","method","headers","body","room_name","ok","json","token","connectToRoom","audioTrack","videoTrack","createLocalTracks","current","room","adaptiveStream","dynacast","videoCaptureDefaults","resolution","publishDefaults","dtx","red","forceStereo","simulcast","setupRoomListeners","connect","wsUrl","autoSubscribe","all","localParticipant","publishTrack","publishError","remoteParticipants","Array","from","values","updateParticipantState","forEach","participant","initParticipantState","getTrackPublications","publication","track","handleTrackSubscribed","cleanupTracks","disconnect","e","echoCancellation","noiseSuppression","autoGainControl","tracks","stop","detach","trackElementsRef","videoElementsRef","audioElementsRef","state","prev","isAudioEnabledGlobal","isVideoEnabledGlobal","isVideoTrack","kind","Kind","Video","updateTrackState","stateUpdate","Audio","on","participantExists","some","off","eventHandlers","participantConnected","handleTrackPublished","once","trackPublications","participantDisconnected","newParticipants","filter","trackSubscribed","disconnected","reason","reasonStr","toString","reconnecting","reconnected","Disconnected","Reconnecting","Reconnected","ParticipantConnected","ParticipantDisconnected","TrackSubscribed","leaveMeeting","el","remove","cleanup","isUnmounting","find","updateGlobalMediaState","audioEnabled","videoEnabled","toggleMute","newGlobalAudioState","unmute","mute","toggleVideo","newGlobalVideoState","handleLocalMuteToggle","newMutedState","handleLocalVideoToggle","newVideoState","getParticipantState","pub","handleToggleAudio","currentState","handleToggleVideo","getEffectiveMediaState","participantId","ParticipantVideo","memo","isLocal","videoRef","setVideoTrack","videoPublication","handleTrackUnsubscribed","TrackUnsubscribed","videoElement","firstChild","removeChild","attach","aspectRatio","display","alignItems","justifyContent","position","video","autoPlay","playsInline","muted","objectFit","top","left","right","bottom","borderRadius","fontSize","fontWeight","charAt","toUpperCase","ParticipantAudio","audioRef","setAudioTrack","audioPublication","audioElement","audio","renderParticipant","effectiveState","overflow","boxShadow","gap","flexDirection","severity","m","renderMainContent","flex","xs","md","borderTop","borderColor","gutterBottom","ml","action","MeetingRoom","displayName","libIndexInfo","createLocalStore","lib","marketsScriptLib","allMarktLibData","marketsScriptManager","isInAndroid","getA11yServiceLiveInfo","hasPermission","onCallGetA11yPermission","openPermission","onCallOpenA11yPermission","hasPermissionScript","checkPermission","a11yScript","AndroidPermissionStatus","androidPermissions","a11y","usePermissionStatus","tabActivity","useTabActivity","isActive","setIsActive","QuestionMarkIcon","ClickAwayListener","Tooltip","AccessibilityInfo","setHasPermission","shouldAskAgain","openTooltip","setOpenTooltip","onDangerPageButtonClick","button","role","marginLeft","marginRight","paddingLeft","onClickAway","disableFocusListener","disableHoverListener","disableTouchListener","slotProps","popper","disablePortal","onOpen","onMouseDown","verticalAlign","styles","PermissionCommonSetting","permissionComponentsSpanPadding","PermissionCommonNotPass","PermissionCommonPass","PermissionCommonDanger","desc","danger","PermissionCommonName","children","PermissionCommonDesc","floatingInfo","FloatingInfo","unlisten","activity","HomePagePermissions","AppShell","TabbarContainer","i18nInit","IFrameReactContainer","IMOpenPageLink","marketHtmlUtils","TestScript","NavBar","Home","titleConf","key","navBar","Content","EmergencyCallContent","Math","random","substring","urlAsContent","htmlBuilder","createHtml","test","o","Function","printA","ui","setUI","sayHello","msg","alert","components","UI","createDefSocketSettingData","keepConnect","getMarketDevSocketSettingData","HomeIcon","SettingsIcon","CreateIcon","BottomNavigation","BottomNavigationAction","pathname","tabInfoList","label","icon","showLabels","axios","parseUsedLib","reg","matchAll","a","beforeJavaLibCreateScript","runProjectScriptDemo","get","scriptString","dependencies","concat","opts","iframeId","mergeHtml","h","includes","createHtmlByUrl","text","target","Dialog","DialogActions","DialogContent","DialogTitle","confirmText","cancelText","onCancel","cancelId","confirmId","isOpen","setIsOpen","Dispatcher","socketConnectInfo","retryCount","ws","connecting","w","WebSocket","onopen","connected","toGetAllScripts","onclose","arguments","checkNeedRetry","onerror","close","onmessage","parse","type","dispatch","send","settingData","CssBaseline","Paper","AndroidPageContent","BottomBar","elevation","minHeight","paddingBottom"],"sourceRoot":"","ignoreList":[2]}