{"version":3,"file":"static/chunks/pages/listen-editing-market-ffa271894376a330.js","mappings":"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","sources":["webpack://_N_E/../../node_modules/.pnpm/react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3/node_modules/react-i18next/dist/es/index.js","webpack://_N_E/../../libs/app/model/src/remote/tracking/print.ts","webpack://_N_E/../../libs/app/ui/src/components/app/AppShell.tsx","webpack://_N_E/../../libs/fanfanlo/src/utils/files-map-utils.ts","webpack://_N_E/../../libs/fanfanlo/src/i18n/i18n-init.ts","webpack://_N_E/../../libs/fanfanlo/src/storage/store-page-context.tsx","webpack://_N_E/./src/components/page/listen-editing-market/listen-editing-market.tsx","webpack://_N_E/./src/pages/listen-editing-market/index.tsx","webpack://_N_E/../../libs/app/ui/src/components/page/PageContent.tsx","webpack://_N_E/../../libs/app/ui/src/components/page/AndroidPageContent.tsx","webpack://_N_E/?2f83","webpack://_N_E/../../libs/app/static/src/mc/static-model.ts","webpack://_N_E/../../libs/app/ui/src/components/motion/page-transition.tsx","webpack://_N_E/../../libs/app/ui/src/components/app/PageShell.tsx","webpack://_N_E/../../libs/app/ui/src/components/appbar/AppBar.tsx"],"sourcesContent":["export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3\\\\node_modules\\\\react-i18next\\\\dist\\\\es\\\\index.js\"","import { request } from \"@fanfanlo\"\r\nimport { IRequestOptions } from \"../IRequestOptions\"\r\nimport { tms } from \"../tms\"\r\n\r\n\r\nexport interface ITrackingPrint{\r\n    type:string\r\n    title:string\r\n    subtitle:string\r\n    extra?:Record<any, any>\r\n}\r\n\r\nexport async function trackingPrint(opts:IRequestOptions<ITrackingPrint>){\r\n    const res = await request(tms.TTracking, tms.MTrackingPrint, opts.params, opts.gateway, opts.handler)\r\n    return res;\r\n}","'use client'\r\nimport { i18n, i18nInit, IPageScrollPosition, StorePageContext, StorePageDynamicContext, toProxy, watchUpdates, storeUtils } from \"@fanfanlo\";\r\nimport { useRouter } from \"next/router\";\r\nimport getConfig from \"node_modules/next/config\";\r\nimport { PropsWithChildren, useEffect, useState } from \"react\";\r\nimport { I18nextProvider } from \"react-i18next\";\r\nimport {trackingPrint} from \"@app/model\"\r\ncheckReloadPage();\r\ni18nInit()\r\n\r\n\r\nfunction checkReloadPage(){\r\n  if(typeof window === 'undefined')return\r\n  if(getConfig().publicRuntimeConfig.isDevelopment){\r\n    return\r\n  }\r\n  if(window.location.href.indexOf('qiniu') == -1)return;\r\n  // 帮我检测url中是否包含_htmlRefreshTime的参数\r\n  // 如果没有，则添加_htmlRefresTime的参数，值为当前时间的毫秒数\r\n  const searchParams = new URL(window.location.href).searchParams\r\n  const htmlRefreshTime = searchParams.get('_htmlRefreshTime')\r\n  if (!htmlRefreshTime) {\r\n    const newUrl = new URL(window.location.href)\r\n    newUrl.searchParams.set('_htmlRefreshTime', String(Date.now()))\r\n    window.location.href = newUrl.toString()\r\n    return\r\n  }\r\n\r\n  const refreshTime = Number(htmlRefreshTime)\r\n  if (refreshTime + 2 * 60 * 1000 < Date.now()) {\r\n    const newUrl = new URL(window.location.href)\r\n    newUrl.searchParams.set('_htmlRefreshTime', String(Date.now()))\r\n    window.location.href = newUrl.toString()\r\n  }\r\n}\r\nconst dynamicKeyMap = new Map<string, boolean>();\r\nexport function AppShell({ children }: PropsWithChildren) {\r\n  const router = useRouter();\r\n  const scrollKey = 'scrollPositionInfo'\r\n  const href = window.location.href.split(\"#\")[0]\r\n  const dynamicKey = `dynamic-${href}`\r\n  const [isOpened] = useState(dynamicKeyMap.get(dynamicKey) === true)\r\n  const s = storeUtils.namespace(dynamicKey);\r\n  let o: Record<string, unknown>|undefined = s.read(dynamicKey)\r\n  if (!o) {\r\n    o = {}\r\n    s.write(dynamicKey, o)\r\n  }\r\n  o = toProxy(o)\r\n  useEffect(() => {\r\n\r\n    router.beforePopState((state) => {\r\n      s.clearAll()\r\n      return true\r\n    })\r\n  })\r\n  useEffect(() => {\r\n    s.write(dynamicKey, o)\r\n    return watchUpdates(o, () => {\r\n      s.write(dynamicKey, o)\r\n    })\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    trackingPrint({params:{\r\n      type:\"页面进入\",\r\n      title:\"页面\",\r\n      subtitle:\"发送者-AppShell\",\r\n      extra:{\r\n        href:window.location.href\r\n      }\r\n    }})\r\n  }, [])\r\n  useEffect(() => {\r\n    const info = (s.read(scrollKey) || { x: 0, y: 0 }) as IPageScrollPosition\r\n    // console.log('app shell scroll info info = ', info)\r\n    if (info.x == 0 && info.y == 0) {\r\n      listenScroll()\r\n    } else {\r\n      window.requestAnimationFrame(() => {\r\n        if(isOpened){\r\n          window.scrollTo(info.x, info.y)\r\n        }\r\n        listenScroll()\r\n      })\r\n    }\r\n    function onScroll(e: Event) {\r\n      // console.log('app shell on scroll', { x: window.scrollX, y: window.scrollY })\r\n      s.write(scrollKey, { x: window.scrollX, y: window.scrollY })\r\n    }\r\n    function listenScroll() {\r\n      window.addEventListener('scroll', onScroll)\r\n    }\r\n\r\n    function unsub() {\r\n      window.removeEventListener('scroll', onScroll)\r\n    }\r\n    return unsub\r\n  });\r\n  useEffect(()=>{\r\n    dynamicKeyMap.set(dynamicKey, true)\r\n  },[])\r\n  return (\r\n    <StorePageContext value={s}>\r\n      <StorePageDynamicContext value={o}>\r\n\r\n        <I18nextProvider i18n={i18n}>\r\n          {children}\r\n        </I18nextProvider>\r\n      </StorePageDynamicContext>\r\n    </StorePageContext>\r\n  )\r\n}","\r\nconst map:Record<string, string> = {}\r\n    // 这里可以添加需要映射的文件路径   \r\nexport const fileMapUtils ={\r\n    map,\r\n    getFile(src:string):string{\r\n        return this.map[src] || src;\r\n    }\r\n}","\"use client\";\r\n// 现在用的是这个文件\r\nimport { initReactI18next } from \"react-i18next\";\r\n\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\nimport Backend, { type HttpBackendOptions } from \"i18next-http-backend\";\r\n\r\nimport i18next from \"i18next\";\r\nimport { Log } from \"../log/Log\";\r\nimport { getBuildTime, isServer } from \"../nextjs/env/env\";\r\nimport { fileMapUtils } from \"../utils\";\r\n;\r\nexport { useTranslation } from 'react-i18next';\r\nlet fileDateVersion:string = ''// = getConfig().publicRuntimeConfig?.version\r\nexport const i18nLogger = new Log(false, `i18n`);\r\nconst windowHref = (()=>{\r\n  if(typeof window === 'undefined')return ''\r\n  const u = new URL(window.location.href || window.parent?.location.href);\r\n  // 同域文本iframe里的页面会获取不到href，所以判断一下直接用父级的就行.\r\n  return u.origin == null || u.origin == 'null' ? '' : u.origin\r\n})()\r\nconst backendOptions = {\r\n  loadPath: function (lngs: string[], namespaces: string[]) {\r\n    const log = i18nLogger.sub(false, `i18n loadpath`);\r\n    log.pause = true;\r\n    const lng = lngs[0]\r\n    let p = ``\r\n    // p = `/options/_locales/${lngs[0].replace(\"-\", \"_\")}/messages.json`;\r\n    // p = `/locales/zh-CN/ns1/content.json`;\r\n    // p = `locales/${lng}/${namespaces[0]}.json?v=${fileDateVersion}`\r\n    const ps = namespaces[0].split('/')\r\n    ps.splice(ps.length - 1, 0, lng)\r\n    // p = `locales/${ps.join('/')}.json?v=${fileDateVersion}`\r\n    // p = `locales/${ps.join('/')}.json?v=${getBuildTime()}`\r\n    p = `locales/${ps.join('/')}.json`\r\n    log.log(`lngs=`, lngs);\r\n    log.log(`namespaces=`, namespaces);\r\n    log.log(\"p=\", p);\r\n    p = fileMapUtils.getFile(`/${p}`);\r\n    // console.log('map p=', p)\r\n    p = `${windowHref}/${p}`\r\n    return p;\r\n\r\n  },\r\n  parse: function (\r\n    data: string,\r\n    languages?: string | string[],\r\n    namespaces?: string | string[]\r\n  ) {\r\n    const log = i18nLogger.sub(false, `i18n backend parse`);\r\n    log.pause = true;\r\n    // log.log(`parrrse`, data, languages, namespaces);\r\n    const l = JSON.parse(data);\r\n    log.print(`before set i18ndata`);\r\n    // i18nData = l as II18n;\r\n    // log.log(`i18nData.rule.scripts.sys.rules`, i18nData.rule.scripts.sys.rules);\r\n    log.log(`parrrse`, languages, namespaces);\r\n    return l;\r\n  },\r\n};\r\nconst backend = new Backend();\r\nbackend.init(null, backendOptions);\r\nexport const i18n = i18next;\r\n// export const resources: Resource = {\r\n//   // 'zh-CN': {\r\n//   //   translation: _.merge({}, zhCN),\r\n//   // },\r\n//   // en: {\r\n//   //   translation: _.merge({}, en),\r\n//   // },\r\n// };\r\n\r\n\r\ni18n.on(\"languageChanged\", async function (lng) {\r\n  const log = i18nLogger.sub(false, `onlanguageChanged`);\r\n  log.pause = true;\r\n  log.log(`lllllng`, lng);\r\n  // lng = \"en\";\r\n  // const p = `/options/_locales/${lng.replace(\"-\", \"_\")}/messages.json`;\r\n});\r\n\r\n\r\n\r\n\r\nexport function i18nInit(_fileDateVersion:string=''){\r\n  fileDateVersion = _fileDateVersion\r\n  i18n\r\n  .use(LanguageDetector)\r\n  .use(backend)\r\n  .use(initReactI18next)\r\n  .init<HttpBackendOptions>({\r\n    load: \"currentOnly\",\r\n    // load: \"all\",\r\n    // supportedLngs: ['zh-CN', 'zh-TW', 'en', 'en-GB', 'ja'],\r\n    // resources,\r\n    fallbackLng: isServer ? \"en\" : \"zh-CN\",\r\n    // fallbackLng: \"zh-CN\",\r\n    // lng: \"zh-CN\",\r\n    partialBundledLanguages:true,\r\n    ns:[],\r\n    \r\n    debug: false,\r\n    interpolation: {\r\n      escapeValue: false, // not needed for react as it escapes by default\r\n    },\r\n    detection: {\r\n      caches: [\"localStorage\"],\r\n    },\r\n  });\r\n}\r\ni18n.on(\"missingKey\", function (lngs, namespace, key, res) {\r\n  console.error(\r\n    \"i18n mssing key, lngs=%s, namespace=%s, key=%s, res=%s\",\r\n    lngs,\r\n    namespace,\r\n    key,\r\n    res\r\n  );\r\n});\r\n\r\ni18n.on(\"loaded\", function (loaded) {\r\n  const log = i18nLogger.sub(false, `onloaded`);\r\n  log.pause = true;\r\n  log.log(`onloaded arguments`, loaded);\r\n});\r\n\r\ni18n.on(\"failedLoading\", function (lng, ns, msg) {\r\n  const log = i18nLogger.sub(false, `onfailedLoading`);\r\n  log.pause = true;\r\n  log.log(`failedLoading arguments`, lng, ns, msg);\r\n});\r\n\r\ni18n.on(\"added\", function () {\r\n  console.log('added', arguments)\r\n});   \r\n\r\nexport default i18n;","import { createContext } from \"react\";\r\nimport { storeUtils } from \"./store-utils\";\r\n// import { storeUtils } from \"./store\";\r\nconst s = storeUtils.namespace('store-page-context')\r\n\r\nexport interface IPageScrollPosition{\r\n    x:number\r\n    y:number\r\n}\r\n\r\nfunction create(){\r\n    return createContext(s)\r\n}\r\nexport const StorePageContext = createContext<any>(s)\r\n\r\nexport const StorePageDynamicContext = createContext<Record<string, any>>({})","/**\n 帮我实现页面加载后通过store2用改文件的路径命名的namespace获取的数据\n 该数据记录了socket的地址，和一个MarketList的列表。\n 获取到该列表后要展示该列表，组件要单独分离出来，而不是在一个大的组件里嵌套生成子组件。\n socket链接后要发起请求，请求同步已有监听的Imarket.name的数据，同步后把已有的数据替换掉。\n 不要删除该注释\n\n */\nimport { storeUtils } from '@fanfanlo';\nimport { ExpandLess, ExpandMore, InsertDriveFileOutlined as FileIcon } from '@mui/icons-material'; // Example icons\nimport {\n    Box,\n    Chip,\n    CircularProgress, Collapse,\n    Container,\n    Divider,\n    List, ListItem, ListItemText,\n    Paper,\n    Typography\n} from '@mui/material';\nimport React, { useEffect, useRef, useState } from 'react';\n\n// --- Interfaces (aligned with server + component needs) ---\ninterface IMarketFile {\n    type: \"js\" | \"css\" | \"html\" | string; // Match server type, allow string for flexibility\n    path: string;\n    content: string; // This will hold the actual file content from WebSocket\n}\n\ninterface IMarket {\n    name: string;\n    files: IMarketFile[];\n    html?: string; // Optional: if you want to store/use the HTML from server\n}\n\ntype MarketList = IMarket[];\n\ninterface IStoredData {\n    socketAddr: string;\n    marketList: { name: string }[]; // Store only names initially, content comes from WS\n}\n\n// Note: Duplicate comments and interface definitions removed for brevity\n\n// --- MUI Component for Displaying Market File ---\ninterface MarketFileDisplayProps {\n    file: IMarketFile;\n}\n\nconst MarketFileDisplay: React.FC<MarketFileDisplayProps> = ({ file }) => {\n    const [contentOpen, setContentOpen] = useState(false);\n\n    const toggleContent = () => setContentOpen(!contentOpen);\n\n    return (\n        <>\n            <ListItem sx={{ pl: 4, display: 'flex', alignItems: 'center' }}>\n                 <FileIcon sx={{ mr: 1, fontSize: '1rem', flexShrink: 0 }} />\n                 <ListItemText\n                    primary={file.path}\n                    secondary={`Type: ${file.type}`}\n                    primaryTypographyProps={{ variant: 'body2', noWrap: true, flexGrow: 1, mr:1 }}\n                    secondaryTypographyProps={{ variant: 'caption' }}\n                 />\n                 <Chip label={contentOpen ? 'Hide Content' : 'Show Content'} size=\"small\" onClick={toggleContent} disabled={!file.content} />\n            </ListItem>\n            <Collapse in={contentOpen} timeout=\"auto\" unmountOnExit>\n                 <Box sx={{ pl: 6, pr: 2, pb: 1 }}>\n                    <Paper elevation={1} sx={{ p: 1, maxHeight: '150px', overflowY: 'auto', background: '#f5f5f5' }}>\n                        <Typography component=\"pre\" variant=\"caption\" sx={{ whiteSpace: 'pre-wrap', wordBreak: 'break-all' }}>\n                            {file.content || '(Content not loaded or empty)'}\n                        </Typography>\n                    </Paper>\n                 </Box>\n            </Collapse>\n        </>\n    );\n};\n\n\n// --- MUI Component for Displaying Market Item ---\ninterface MarketItemDisplayProps {\n    market: IMarket;\n}\n\nconst MarketItemDisplay: React.FC<MarketItemDisplayProps> = ({ market }) => {\n    const [open, setOpen] = useState(true);\n\n    const handleClick = () => {\n        setOpen(!open);\n    };\n\n    return (\n        <>\n            <ListItem button onClick={handleClick}>\n                <ListItemText primary={market.name} primaryTypographyProps={{ fontWeight: 'bold' }} />\n                {/* Always show expand icon if files array exists, even if empty initially */} \n                {market.files ? (open ? <ExpandLess /> : <ExpandMore />) : null} \n            </ListItem>\n            {/* Render Collapse if market.files array exists */} \n            {market.files && (\n                 <Collapse in={open} timeout=\"auto\" unmountOnExit>\n                    <List component=\"div\" disablePadding>\n                        {market.files.length > 0 ? (\n                            market.files.map((file, index) => (\n                                // Use a more specific key including path\n                                <MarketFileDisplay key={`${market.name}-file-${index}-${file.path}`} file={file} />\n                            ))\n                        ) : (\n                             <ListItem sx={{ pl: 4 }}>\n                                <ListItemText primary=\"(Waiting for file data...)\" primaryTypographyProps={{ fontStyle: 'italic', variant: 'body2' }}/>\n                             </ListItem>\n                        )}\n                    </List>\n                 </Collapse>\n            )}\n        </>\n    );\n};\n\n\n// --- MUI Component for Displaying Market List ---\ninterface MarketListDisplayProps {\n    marketList: MarketList;\n    isLoading: boolean; \n}\n\nconst MarketListDisplay: React.FC<MarketListDisplayProps> = ({ marketList, isLoading }) => {\n    if (isLoading) {\n        return (\n            <Box sx={{ display: 'flex', justifyContent: 'center', my: 3 }}>\n                <CircularProgress />\n            </Box>\n        );\n    }\n\n    if (!marketList || marketList.length === 0) {\n        return <Typography sx={{ mt: 2, fontStyle: 'italic' }}>No markets configured or found.</Typography>;\n    }\n\n    return (\n        <Paper elevation={2} sx={{ mt: 2 }}>\n             <List component=\"nav\" aria-labelledby=\"nested-list-subheader\">\n                {marketList.map((market) => (\n                    <MarketItemDisplay key={market.name} market={market} />\n                ))}\n            </List>\n        </Paper>\n    );\n};\n\n\n// --- Main MUI Component ---\n\nconst STORE_NAMESPACE = 'listen-editing-market';\n\nexport function ListenEditingMarkets() {\n    const [socketAddr, setSocketAddr] = useState<string | null>(\"ws://localhost:8080\");\n    const [marketList, setMarketList] = useState<MarketList>([]); \n    const [isConnected, setIsConnected] = useState<boolean>(false);\n    const [isLoading, setIsLoading] = useState<boolean>(true); \n    const ws = useRef<WebSocket | null>(null);\n    const initialMarketNames = useRef<string[]>([]);\n\n    // 1. Fetch initial config from store2\n    useEffect(() => {\n        setIsLoading(true);\n        // const marketStore = store.namespace(STORE_NAMESPACE);\n        const marketStore = storeUtils.namespace(STORE_NAMESPACE);\n        const storedData = marketStore.read('marketData') as IStoredData | null;\n\n        if (storedData) {\n            console.log(`[${STORE_NAMESPACE}] Fetched initial config:`, storedData);\n            setSocketAddr(storedData.socketAddr || \"ws://localhost:8080\"); // Fallback if addr is null/undefined\n            initialMarketNames.current = storedData.marketList?.map(m => m.name) || [];\n            setMarketList(initialMarketNames.current.map(name => ({ name, files: [] })));\n        } else {\n            console.warn(`[${STORE_NAMESPACE}] No initial config found in store2.`);\n            setMarketList([]);\n            initialMarketNames.current = [];\n        }\n        setIsLoading(false);\n    }, []);\n\n    // 2. Manage WebSocket connection and communication\n    useEffect(() => {\n        if (!socketAddr) {\n            console.log(`[${STORE_NAMESPACE}] No socket address.`);\n            setIsConnected(false);\n            return;\n        }\n\n        if (ws.current) {\n            ws.current!.close();\n        }\n\n        console.log(`[${STORE_NAMESPACE}] Attempting to connect: ${socketAddr}`);\n        ws.current = new WebSocket(socketAddr);\n        setIsConnected(false);\n\n        ws.current!.onopen = () => {\n            console.log(`[${STORE_NAMESPACE}] WebSocket connected.`);\n            setIsConnected(true);\n            // 3. Request ALL market data from the server\n            if (ws.current?.readyState === WebSocket.OPEN) {\n                console.log(`[${STORE_NAMESPACE}] Requesting all market data from server.`);\n                const request = JSON.stringify({ action: 'getAllMarkets' });\n                ws.current.send(request);\n            } else {\n                console.warn(`[${STORE_NAMESPACE}] WebSocket not open when trying to send getAllMarkets request.`);\n            }\n        };\n\n        ws.current.onmessage = (event) => {\n            try {\n                const message = JSON.parse(event.data.toString());\n                console.log(`[${STORE_NAMESPACE}] Received:`, message.type, message.marketName || '');\n\n                setMarketList(currentList => {\n                    // Use structuredClone for safe deep copy and modification\n                    let updatedList = structuredClone(currentList);\n\n                    // Handle response containing all market data\n                    if (message.type === 'allMarketData' && Array.isArray(message.markets)) {\n                        console.log(`[${STORE_NAMESPACE}] Received all market data. Replacing local list.`);\n                        // Replace the entire list with the data from the server\n                        updatedList = message.markets.map((m: any) => ({\n                            name: m.name,\n                            files: m.files?.map((f: any) => ({ ...f, content: f.content || '' })) || [],\n                            html: m.html\n                        }));\n                    } else if (message.type === 'marketData' && message.marketName) {\n                        const marketIdx = updatedList.findIndex(m => m.name === message.marketName);\n                        if (marketIdx !== -1) {\n                            updatedList[marketIdx].files = message.files?.map((f: any) => ({ ...f, content: f.content || '' })) || []; // Ensure content is string\n                            updatedList[marketIdx].html = message.html;\n                        } else {\n                            // If server sent data for a market we didn't know about (e.g., from getAllMarkets), add it\n                            console.log(`[${STORE_NAMESPACE}] Received marketData for a new market: ${message.marketName}. Adding to list.`);\n                            updatedList.push({\n                                name: message.marketName,\n                                files: message.files?.map((f: any) => ({ ...f, content: f.content || '' })) || [],\n                                html: message.html\n                            });\n                            // Sort alphabetically? (Optional)\n                            // updatedList.sort((a, b) => a.name.localeCompare(b.name));\n                        }\n                    } else if (message.type === 'fileUpdate' && message.marketName && message.path) {\n                        const marketIdx = updatedList.findIndex(m => m.name === message.marketName);\n                        if (marketIdx !== -1) {\n                            const fileIdx = updatedList[marketIdx].files.findIndex(f => f.path === message.path);\n                            if (fileIdx !== -1) {\n                                updatedList[marketIdx].files[fileIdx].content = message.content || ''; // Ensure content is string\n                                updatedList[marketIdx].files[fileIdx].type = message.fileType;\n                            } else {\n                                console.warn(`[${STORE_NAMESPACE}] FileUpdate for unknown file: ${message.marketName}/${message.path}`);\n                                // Optionally add the file if it didn't exist in the initial marketData\n                                // updatedList[marketIdx].files.push({ type: message.fileType, path: message.path, content: message.content || '' });\n                            }\n                        } else {\n                             console.warn(`[${STORE_NAMESPACE}] FileUpdate for unknown market: ${message.marketName}`);\n                        }\n                    } else if (message.type === 'error') {\n                         console.error(`[${STORE_NAMESPACE}] Server error:`, message.message);\n                         // TODO: Show error feedback (e.g., Snackbar)\n                    } else {\n                         console.log(`[${STORE_NAMESPACE}] Unhandled message type:`, message.type);\n                    }\n                    return updatedList;\n                });\n\n            } catch (error) {\n                console.error(`[${STORE_NAMESPACE}] Error processing message:`, error, event.data);\n            }\n        };\n\n        ws.current.onerror = (error) => {\n            console.error(`[${STORE_NAMESPACE}] WebSocket error:`, error);\n            setIsConnected(false);\n        };\n\n        ws.current.onclose = (event) => {\n            console.log(`[${STORE_NAMESPACE}] WebSocket disconnected. Code: ${event.code}, Reason: ${event.reason}`);\n            setIsConnected(false);\n            // Decide if you want to clear data or show stale\n            // setMarketList(current => current.map(m => ({...m, files: m.files.map(f => ({...f, content: '(Disconnected)'})) })));\n        };\n\n        // Cleanup\n        return () => {\n            if (ws.current) {\n                console.log(`[${STORE_NAMESPACE}] Closing WebSocket on unmount.`);\n                ws.current.onopen = null;\n                ws.current.onmessage = null;\n                ws.current.onerror = null;\n                ws.current.onclose = null;\n                ws.current.close();\n                ws.current = null;\n            }\n        };\n    }, [socketAddr]);\n\n    return (\n        <Container maxWidth=\"md\" sx={{ py: 3 }}>\n            <Typography variant=\"h5\" gutterBottom component=\"div\">\n                Market Watcher Status\n            </Typography>\n            <Box sx={{ display: 'flex', alignItems: 'center', mb: 2 }}>\n                 <Chip\n                     label={isConnected ? 'Connected' : (socketAddr ? 'Connecting...' : 'Disconnected')}\n                     color={isConnected ? 'success' : (socketAddr ? 'warning' : 'error')}\n                     size=\"small\"\n                     sx={{ mr: 2 }}\n                 />\n                 <Typography variant=\"body2\" color=\"textSecondary\">\n                     {socketAddr || 'No address configured'}\n                 </Typography>\n            </Box>\n            <Divider sx={{ mb: 2 }}/>\n\n            <Typography variant=\"h6\" gutterBottom component=\"div\">\n                 Watched Markets\n            </Typography>\n            {/* Pass loading=true only if we are loading initial config AND have no markets yet */} \n            <MarketListDisplay marketList={marketList} isLoading={isLoading && marketList.length === 0} />\n        </Container>\n    );\n}","import { AppbarContainer, AppShell } from \"@app/ui\";\r\nimport {Dispatcher} from \"@fanfanlo\"\r\nimport { ListenEditingMarkets } from \"@src/components/page/listen-editing-market/listen-editing-market\";\r\nimport { useEffect } from \"react\";\r\n\r\nexport default function ListenEditingMarketsPage(){\r\n    const dispatcher = new Dispatcher()\r\n    useEffect(()=>{\r\n        const socket = new WebSocket('ws://localhost:8080');\r\n\r\n    socket.onopen = () => {\r\n      console.log('Connected to the WebSocket server');\r\n    };\r\n\r\n    socket.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n\r\n      if (data.type === 'file-changed') {\r\n        console.log(`File changed: ${data.file}`);\r\n\r\n        // 在这里可以处理文件变更逻辑，像是刷新 iframe 或其他\r\n        \r\n      }\r\n    };\r\n\r\n    socket.onerror = (error) => {\r\n      console.error('WebSocket error:', error);\r\n    };\r\n\r\n    socket.onclose = () => {\r\n      console.log('WebSocket connection closed');\r\n    };\r\n    }, [])\r\n    return(\r\n        <AppShell>\r\n            <AppbarContainer appbarProps={{\r\n                title:\"edit\",\r\n                back:true,\r\n                backDispatcher:dispatcher\r\n            }}>\r\n                <ListenEditingMarkets />\r\n            </AppbarContainer>\r\n        </AppShell>\r\n    )\r\n}","import { isDev, loadI18nValue, useTranslation } from '@fanfanlo';\r\nimport { Box, Button, Container } from '@mui/material';\r\nimport { createContext, PropsWithChildren, useContext, useEffect } from 'react';\r\nimport { ITitleI18nConf } from '.';\r\n\r\n\r\nfunction Reload(){\r\n  if(!isDev)return <>  </>\r\n  const {t} = useTranslation(\"app-ui/components/page/content\")\r\n  return(\r\n    <Box>\r\n      <Button onClick={() => {window.location.reload()}}>{t(\"PageContent.refresh\")}</Button>\r\n      {new Date().toLocaleString()}\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst ScrollP = createContext({ x: 0, y: 0 });\r\nlet index = 0;\r\nexport default function PageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren) {\r\n  index++;\r\n  const scroll = useContext(ScrollP);\r\n  const clazz = `${Date.now() + Math.random() * Date.now()}`;\r\n  useEffect(()=>{\r\n    async function loadTitle(){\r\n      if(!titleConf)return\r\n      let title = titleConf.title\r\n      if(titleConf.ns){\r\n        title = await loadI18nValue(titleConf.ns, titleConf.key || \"content.title\")\r\n      }\r\n      if(!title)return\r\n      document.title = title\r\n    }\r\n    loadTitle()\r\n  }, [])\r\n  useEffect(() => {\r\n    const container = document.getElementsByClassName(clazz)[0];\r\n    if (!container) return;\r\n    container.scrollTop = scroll.y;\r\n    const onScroll = () => {\r\n      var scrollTop = container.scrollTop;\r\n      scroll.y = scrollTop;\r\n    };\r\n    container.removeEventListener('scroll', onScroll);\r\n    container.addEventListener('scroll', onScroll, { passive: true });\r\n    return () => container.removeEventListener('scroll', onScroll);\r\n  }, [clazz, scroll]);\r\n  return (\r\n\r\n    <Container className={clazz} sx={{ \r\n      height: '100%',\r\n      overflow: 'auto', \r\n      padding: \"0px\",\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }}>\r\n      <Box>\r\n        {(reload || (reload == undefined)) && <Reload />}\r\n        \r\n        {children}\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { PropsWithChildren } from \"react\";\r\nimport PageContent from \"./PageContent\";\r\nimport { ITitleI18nConf } from \".\";\r\nexport default function AndroidPageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren)  {\r\n    return (\r\n        <PageContent titleConf={titleConf} reload={reload}>\r\n            {children}\r\n        </PageContent>\r\n    )\r\n}\r\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/listen-editing-market\",\n      function () {\n        return require(\"private-next-pages/listen-editing-market/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/listen-editing-market\"])\n      });\n    }\n  ","import { Dispatcher } from \"@fanfanlo\"\r\nimport { DispatcherUnsubscribe } from \"@fanfanlo\"\r\n\r\nconst dipsatcher = new Dispatcher()\r\ninterface IStaticModel{\r\n    dipsatcher:Dispatcher\r\n    screenLockCount:number\r\n    switchPage:()=>void\r\n    listenSwitchPage:(callback:()=>void)=>DispatcherUnsubscribe \r\n}\r\nexport const staticModel:IStaticModel = {\r\n    dipsatcher,\r\n    screenLockCount:0,\r\n    switchPage:async()=>{\r\n        dipsatcher.dispatch(\"switchPage\")\r\n        staticModel.screenLockCount = 0\r\n    },\r\n    listenSwitchPage:(callback:()=>void)=>{\r\n        return dipsatcher.addListener(\"switchPage\",callback)\r\n    }\r\n}   \r\n","import { PropsWithChildren } from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { useRouter } from \"next/router\";\r\n\r\n\r\nexport function PageTransition({ children }: PropsWithChildren) {\r\n    const router = useRouter()\r\n    return (\r\n\r\n        <AnimatePresence mode=\"sync\">\r\n            <motion.div\r\n                key={router.route}\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -110 }}\r\n                transition={{ duration: 0.3 }}\r\n            >\r\n                {children}\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    )\r\n}","import { staticModel } from \"@app/static\";\r\nimport { Box } from \"@mui/material\";\r\nimport { useEffect } from \"react\";\r\nimport { PageTransition } from \"../motion\";\r\nlet idCount = 0\r\nexport function PageShell({children}:{children:React.ReactNode}){\r\n    const id = `app-shell-${idCount++}`\r\n    useEffect(()=>{\r\n        const box = document.querySelector(`#${id}`)\r\n        const unlisten = staticModel.listenSwitchPage(()=>{\r\n            if(!box)return\r\n        })\r\n        if(!box)return\r\n        box.addEventListener(\"click\",(e)=>{\r\n            if(staticModel.screenLockCount == 0)return\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n        })\r\n        return ()=>{\r\n            unlisten()\r\n        }\r\n    },[])\r\n    return (\r\n        <Box id={id}>\r\n            <PageTransition>\r\n                {children}  \r\n            </PageTransition>\r\n        </Box>\r\n    )\r\n}\r\n","import { AppBar, Box, Container, CssBaseline, Fab, Fade, Slide, Toolbar, Typography, useScrollTrigger } from \"@mui/material\";\r\nimport { PropsWithChildren, ReactNode } from \"react\";\r\n// import {AndroidPageContent} from \"../../\";\r\nimport { browserHistoryUtils, IDispatcher } from \"@fanfanlo\";\r\nimport KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\r\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { PageShell } from \"../app/PageShell\";\r\nimport shadows from \"@mui/material/styles/shadows\";\r\nimport AndroidPageContent from \"../page/AndroidPageContent\";\r\nimport { IAppBarBackAskEvent } from \"@app/static\";\r\nimport { ITitleI18nConf } from \"../page\";\r\ninterface Props {\r\n    /**\r\n     * Injected by the documentation to work in an iframe.\r\n     * You won't need it on your project.\r\n     */\r\n    window?: () => Window;\r\n    children?: React.ReactElement<unknown>;\r\n}\r\n\r\nfunction HideOnScroll(props: Props) {\r\n    const { children, window } = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({\r\n        target: window ? window() : undefined,\r\n    });\r\n\r\n    return (\r\n        <Slide appear={false} direction=\"down\" in={!trigger}>\r\n            {children ?? <div />}\r\n        </Slide>\r\n    );\r\n}\r\nexport interface IAppbarProps extends PropsWithChildren {\r\n    title: ReactNode\r\n    back: boolean\r\n    backHandler?: () => boolean\r\n    backDispatcher?:IDispatcher\r\n    toolbar?:ReactNode\r\n    toolbarContent?:ReactNode\r\n}\r\nexport function Appbar({ title }: { title: ReactNode } & PropsWithChildren) {\r\n    return (\r\n\r\n        <AppBar color={\"inherit\"}>\r\n            <Toolbar>\r\n                <Typography variant=\"h6\" component=\"div\">\r\n                    {title}\r\n                </Typography>\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\ninterface IAppbarContainerProps extends PropsWithChildren {\r\n    appbarProps: IAppbarProps\r\n    titleConf?:ITitleI18nConf\r\n    reload?: boolean\r\n}\r\n\r\n// export interface IAppBarBackAskEvent{\r\n//     defaultPrevented:boolean\r\n// }\r\n\r\nfunction ScrollTop(props: Props) {\r\n    const { children, window } = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({\r\n        target: window ? window() : undefined,\r\n        disableHysteresis: true,\r\n        threshold: 100,\r\n    });\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\r\n        const anchor = (\r\n            (event.target as HTMLDivElement).ownerDocument || document\r\n        ).querySelector('#back-to-top-anchor');\r\n\r\n        if (anchor) {\r\n            anchor.scrollIntoView({\r\n                block: 'center',\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Fade in={trigger}>\r\n            <Box data-id=\"content-scroll-top-button\"\r\n                onClick={handleClick}\r\n                role=\"presentation\"\r\n                sx={{ position: 'fixed', bottom: 16, right: 16 }}\r\n            >\r\n                {children}\r\n            </Box>\r\n        </Fade>\r\n    );\r\n}\r\nexport function AppbarContainer(props: IAppbarContainerProps) {\r\n    const { children, appbarProps, titleConf, reload } = props;\r\n    const router = useRouter()\r\n    function handleBack(){\r\n        // 本想抽象成底层一个方法，但是考虑了一下router需要注入或者是一个callback，似乎像现在这样判断一下event也可以。回头继续观察一下吧。\r\n        const event = browserHistoryUtils.askHistoryBack()\r\n        if(event.defaultPrevented)return\r\n        if(appbarProps.backDispatcher){\r\n            const e:IAppBarBackAskEvent = {defaultPrevented:false}\r\n            appbarProps.backDispatcher.dispatch('back',e)\r\n            if(e.defaultPrevented)return\r\n        }\r\n        router.back()\r\n    }\r\n    return (\r\n        <PageShell>\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n            <HideOnScroll {...props}>\r\n                <AppBar color=\"inherit\">\r\n                    {appbarProps.toolbar ? \r\n                    appbarProps.toolbar:\r\n                    <Toolbar>\r\n                        <KeyboardArrowLeft onClick={handleBack} />\r\n                        {appbarProps.title}\r\n                    </Toolbar>\r\n                    }\r\n                </AppBar>\r\n            </HideOnScroll>\r\n            <Toolbar id=\"back-to-top-anchor\" />\r\n            <Container sx={{padding:\"0\", marginTop:\"17px\"}}>\r\n                <AndroidPageContent titleConf={titleConf} reload={reload}>\r\n                    {children}\r\n                </AndroidPageContent>\r\n            </Container>\r\n\r\n            <ScrollTop {...props}>\r\n                <Fab size=\"small\" aria-label=\"scroll back to top\">\r\n                    <KeyboardArrowUpIcon />\r\n                </Fab>\r\n            </ScrollTop>\r\n        </React.Fragment>\r\n        </PageShell>\r\n    );\r\n}\r\n"],"names":["request","tms","trackingPrint","opts","res","TTracking","MTrackingPrint","params","gateway","handler","i18n","i18nInit","StorePageContext","StorePageDynamicContext","toProxy","watchUpdates","storeUtils","useRouter","getConfig","useEffect","useState","I18nextProvider","checkReloadPage","publicRuntimeConfig","isDevelopment","window","location","href","indexOf","searchParams","URL","htmlRefreshTime","get","newUrl","set","String","Date","now","toString","refreshTime","Number","dynamicKeyMap","Map","AppShell","children","router","scrollKey","split","dynamicKey","isOpened","s","namespace","o","read","write","beforePopState","state","clearAll","type","title","subtitle","extra","info","x","y","listenScroll","requestAnimationFrame","scrollTo","onScroll","e","scrollX","scrollY","addEventListener","unsub","removeEventListener","value","map","fileMapUtils","getFile","src","initReactI18next","LanguageDetector","Backend","i18next","Log","isServer","useTranslation","fileDateVersion","i18nLogger","windowHref","u","parent","origin","backendOptions","loadPath","lngs","namespaces","log","sub","pause","lng","p","ps","splice","length","join","parse","data","languages","l","JSON","print","backend","init","on","_fileDateVersion","use","load","fallbackLng","partialBundledLanguages","ns","debug","interpolation","escapeValue","detection","caches","key","console","error","loaded","msg","arguments","createContext","create","ExpandLess","ExpandMore","InsertDriveFileOutlined","FileIcon","Box","Chip","CircularProgress","Collapse","Container","Divider","List","ListItem","ListItemText","Paper","Typography","React","useRef","MarketFileDisplay","file","contentOpen","setContentOpen","toggleContent","sx","pl","display","alignItems","mr","fontSize","flexShrink","primary","path","secondary","primaryTypographyProps","variant","noWrap","flexGrow","secondaryTypographyProps","label","size","onClick","disabled","content","in","timeout","unmountOnExit","pr","pb","elevation","maxHeight","overflowY","background","component","whiteSpace","wordBreak","MarketItemDisplay","market","open","setOpen","handleClick","button","name","fontWeight","files","disablePadding","index","fontStyle","MarketListDisplay","marketList","isLoading","justifyContent","my","mt","aria-labelledby","STORE_NAMESPACE","ListenEditingMarkets","socketAddr","setSocketAddr","setMarketList","isConnected","setIsConnected","setIsLoading","ws","initialMarketNames","marketStore","storedData","current","m","warn","close","WebSocket","onopen","readyState","OPEN","stringify","action","send","onmessage","event","message","marketName","currentList","updatedList","structuredClone","Array","isArray","markets","f","html","marketIdx","findIndex","push","fileIdx","fileType","onerror","onclose","code","reason","maxWidth","py","gutterBottom","mb","color","AppbarContainer","Dispatcher","ListenEditingMarketsPage","dispatcher","socket","appbarProps","back","backDispatcher","isDev","loadI18nValue","Button","useContext","Reload","t","reload","toLocaleString","ScrollP","PageContent","titleConf","scroll","clazz","Math","random","loadTitle","document","container","getElementsByClassName","scrollTop","passive","className","height","overflow","padding","flexDirection","undefined","AndroidPageContent","dipsatcher","staticModel","screenLockCount","switchPage","dispatch","listenSwitchPage","callback","addListener","AnimatePresence","motion","PageTransition","mode","div","initial","opacity","animate","exit","transition","duration","route","idCount","PageShell","id","box","querySelector","unlisten","stopPropagation","preventDefault","AppBar","CssBaseline","Fab","Fade","Slide","Toolbar","useScrollTrigger","browserHistoryUtils","KeyboardArrowLeft","KeyboardArrowUpIcon","HideOnScroll","props","trigger","target","appear","direction","Appbar","ScrollTop","disableHysteresis","threshold","anchor","ownerDocument","scrollIntoView","block","data-id","role","position","bottom","right","handleBack","askHistoryBack","defaultPrevented","Fragment","toolbar","marginTop","aria-label"],"sourceRoot":"","ignoreList":[0]}