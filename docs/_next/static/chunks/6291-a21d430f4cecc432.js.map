{"version":3,"file":"static/chunks/6291-a21d430f4cecc432.js","mappings":"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","sources":["webpack://_N_E/../../libs/droid/project-interface/src/events/projectEventUtils.ts","webpack://_N_E/../../libs/droid/project-interface/src/actions/app/app-namespace.ts","webpack://_N_E/../../libs/app/static/src/pages/trigger-list-action-list-common/common.ts","webpack://_N_E/../../libs/droid/project-interface/src/core/project-member-type.ts","webpack://_N_E/../../libs/droid/project-interface/src/action/IAction.intf.ts","webpack://_N_E/../../libs/droid/project-interface/src/common/trigger-list-action-list-intf.ts","webpack://_N_E/../../libs/app/ui/src/components/image/AppIcon30.tsx","webpack://_N_E/../../libs/droid/project-interface/src/actions/app/action-open-app/IActionOpenApp.UI.tsx","webpack://_N_E/../../libs/droid/project-interface/src/actions/app/action-open-app/IActionOpenApp.inft.tsx","webpack://_N_E/../../libs/droid/project-interface/src/actions/actions-namespace.ts","webpack://_N_E/../../libs/app/static/src/utils/router-utils.ts","webpack://_N_E/../../libs/droid/project-interface/src/core/namespace.ts","webpack://_N_E/../../libs/app/static/src/storage/app-packages-store.ts","webpack://_N_E/../../libs/fanfanlo/src/utils/throw-trace-error.ts","webpack://_N_E/../../libs/app/static/src/mc/static-model.ts","webpack://_N_E/../../libs/app/ui/src/components/motion/page-transition.tsx","webpack://_N_E/../../libs/app/ui/src/components/app/PageShell.tsx","webpack://_N_E/../../libs/app/ui/src/components/appbar/AppBar.tsx"],"sourcesContent":["\r\nimport { Dispatcher, throwTraceError } from '@fanfanlo';\r\nimport { ITriggerOrActionListPageParsedResult, ITriggerOrActionListParamsData } from '../common';\r\nimport { ProjectMemberType } from '../core'\r\nimport _ from 'lodash';\r\nimport { IActionData } from '../action';\r\nimport { ITriggerData } from '../trigger';\r\n\r\nconst dispatcher = new Dispatcher()\r\nenum EditType {\r\n    add = \"add\",\r\n    updateJavaData = \"updateJavaData\",\r\n    updateShellData = \"updateShellData\",\r\n}\r\nexport interface IProjectEditEvent<T> {\r\n    editType?: EditType\r\n    // editing target type\r\n    projectMemberType: ProjectMemberType\r\n    // IAction or ITrigger's type, also it's namespace\r\n    classType?: string\r\n    info?: ITriggerOrActionListPageParsedResult\r\n    data: T\r\n    projectInfo?: ITriggerOrActionListParamsData\r\n}\r\n\r\nfunction dispatchEditEvent<T>(editType: EditType, event: IProjectEditEvent<T>) {\r\n    // console.log('dispatchEditEvent', editType, event)\r\n    dispatcher.dispatch(editType, event)\r\n}\r\n\r\nfunction onEditJavaData<T>(event: IProjectEditEvent<T>) {\r\n    // console.log('on edit java data', event)\r\n    switch (event.projectMemberType) {\r\n        case ProjectMemberType.action:\r\n            onActionEdit(EditType.updateJavaData, event);\r\n            break;\r\n        case ProjectMemberType.trigger:\r\n            onTriggerEdit(EditType.updateJavaData, event);\r\n            break;\r\n        default: {\r\n            const msg = `on edit java data unknow event type ${event.projectMemberType}`\r\n            throwTraceError(msg, event)\r\n        }\r\n    }\r\n}\r\n\r\nfunction onTriggerEdit<T>(editType: EditType, event: IProjectEditEvent<T>) {\r\n    // console.log('on trigger edit', event)\r\n    const trigger = event.projectInfo?.trigger;\r\n    if (!trigger) {\r\n        const msg = `no trigger when edit trigger java data`\r\n        return throwTraceError(msg, event)\r\n    }\r\n    switch (editType) {\r\n        case EditType.updateJavaData:\r\n            // console.log('before merge', trigger.javaData)\r\n            _.merge(trigger.javaData, event.data);\r\n            // console.log('after merge', trigger.javaData)\r\n            break;\r\n        case EditType.updateShellData:\r\n            _.merge(trigger.shellData, event.data)\r\n            break;\r\n        default: {\r\n            const msg = `on trigger edit unknow event type ${event.editType}`\r\n            throwTraceError(msg, event)\r\n        }\r\n    }\r\n}\r\nfunction onActionEdit<T>(editType: EditType, event: IProjectEditEvent<T>) {\r\n    console.log('on action edit', event)\r\n    const action = event.projectInfo?.action;\r\n    if (!action) {\r\n        const msg = `no action when edit action java data`\r\n        return throwTraceError(msg, event)\r\n    }\r\n    switch (editType) {\r\n        case EditType.updateJavaData:\r\n            console.log('before merge', JSON.parse(JSON.stringify(action.javaData)))\r\n            _.merge(action.javaData, event.data);\r\n            console.log('after merge', JSON.parse(JSON.stringify(action.javaData)))\r\n            break;\r\n        case EditType.updateShellData:\r\n            _.merge(action.shellData, event.data)\r\n            break;\r\n        default: {\r\n            const msg = `on action edit unknow event type ${event.editType}`\r\n            throwTraceError(msg, event)\r\n        }\r\n    }\r\n}\r\nfunction onAdd<T>(event: IProjectEditEvent<T>) {\r\n    switch (event.projectMemberType) {\r\n        case ProjectMemberType.actionGroup:\r\n            onActionGroupAdd(event);\r\n            break;\r\n        case ProjectMemberType.triggerGroup:\r\n            onTriggerGroupAdd(event);\r\n            break;\r\n\r\n    }\r\n}\r\nfunction onTriggerGroupAdd<T>(event: IProjectEditEvent<T>) {\r\n    const group = event.projectInfo?.triggerGroup\r\n    if (!group) {\r\n        const msg = `no trigger group when edit action group add`\r\n        return throwTraceError(msg, event)\r\n    }\r\n    group.list.push(event.data as ITriggerData<any, any>)\r\n}\r\nfunction onActionGroupAdd<T>(event: IProjectEditEvent<T>) {\r\n    const group = event.projectInfo?.actionGroup\r\n    if (!group) {\r\n        const msg = `no action group when edit action group add`\r\n        return throwTraceError(msg, event)\r\n    }\r\n    group.list.push(event.data as IActionData<any, any>)\r\n}\r\nfunction init() {\r\n    dispatcher.addListener(EditType.updateJavaData, onEditJavaData)\r\n    dispatcher.addListener(EditType.add, onAdd)\r\n}\r\nexport const projectEventUtils = {\r\n    init,\r\n    dispatcher,\r\n    dispatchEditEvent,\r\n    EditType,\r\n}\r\n","import { actionsNamespace } from \"../actions-namespace\"\r\n\r\nexport const appNamespace = `${actionsNamespace}app/`","import { useRouter } from \"next/router\";\r\nimport { ParsedUrlQueryInput } from \"querystring\";\r\n\r\nexport function x(){\r\n    \r\n}\r\nexport enum ActionOrTriggerListFromEnum {\r\n    project = 'project'\r\n}\r\nexport enum ActionOrTriggerListTypeEnum {\r\n    addAction = 'add',\r\n    updateAction = 'update'\r\n}\r\nexport interface IActionOrTriggerListPageParams extends ParsedUrlQueryInput {\r\n    // 如果actionType是addAction，则target是taskData的id\r\n    // 如果actionType是updateAction，则target是actionData的id\r\n    // target: string\r\n    // 动作列表里选择动作后要返回的路径\r\n    backPath?: string\r\n    // 本次操作的类型\r\n    type: ActionOrTriggerListTypeEnum\r\n    projectId: string\r\n    triggerActionGroupId: string\r\n    triggerActionId: string\r\n    triggerGroupId?:string\r\n    actionGroupId?: string\r\n    // 如果是更新，则必须有actionId\r\n    actionId?: string\r\n    // 如果是添加，则必须有actionType\r\n    // actionType为namespace/openApp这种样子的，这样能够从actionMap里找到这个action来进行添加\r\n    // 这个需要在动作列表里选择了具体的action之后才能知道，所以在传递过程中这个可以为空，在pages/action-list/index.tsx里会根据actionId来找到具体的actionType\r\n    actionType?: string\r\n\r\n    triggerId?:string\r\n    triggerType?:string\r\n}\r\n\r\n","\r\nexport enum ProjectMemberType{\r\n    project = \"project\",\r\n    trigger = \"trigger\",\r\n    action = \"action\",\r\n    shellData = \"shellData\",\r\n    javaData = \"javaData\",\r\n    triggerAction = \"triggerAction\",\r\n    actionGroup = \"actionGroup\",\r\n    triggerGroup = \"triggerGroup\",\r\n    triggerActionGroup = \"triggerActionGroup\",\r\n    checks = \"GroupCheckList1\",\r\n    \r\n}","import { INameIDData } from \"../common/INameIDData.intf\";\r\nimport { IPermissionData } from \"../permission\";\r\nimport { createMergeToDefaultData, mergeDataWith } from \"../utils/mergeToDefaultData\";\r\nimport { IActionGroup } from \"./IActionGroup.intf\";\r\nimport { projectEventUtils } from \"../events/projectEventUtils\";\r\nimport { IActionOrTriggerListPageParams } from \"@app/static\";\r\n// 静态数据放这里\r\nexport interface IActionJavaData {\r\n    //com.fanfanlo.droidlib.auto.command.a11y.action.ActionA11yNode2\r\n    // readonly type: string\r\n    // // action数据库中的id，现在用ulid生成\r\n    // id:string\r\n}\r\n// 动态参数放这里\r\nexport interface IActionShellData {\r\n}\r\n\r\nexport interface IActionData<T extends IActionShellData, U extends IActionJavaData> extends INameIDData<T, U>{\r\n    //com.fanfanlo.droidlib.auto.command.a11y.action.ActionA11yNode2\r\n    readonly type: string\r\n    // action数据库中的id，现在用ulid生成\r\n    id:string\r\n    permissions?:IPermissionData[]\r\n    // shellData?:T\r\n    javaData:U\r\n}\r\n\r\nexport interface IOnChangeActionJavaDataProps{\r\n    query:IActionOrTriggerListPageParams,\r\n    // 采用projectEventUtils.dispatchEditEvent的目的是能够在页面刷新后依然能通过url数据更新javaData，但是如果使用注入函数的方法就做不到这点了，所以这个参数当前分析是不要用，以后如果要启用，需要先考虑一下上面用projectEventUtils.dispatchEditEvent的优点是否能被替代才行。\r\n    // 但是现在也面临修改数据后，其它未被修改的数据会需要重新初始化的问题，而projectEventUtils.dispatchEditEvent里是merge，并没有重新初始化其它数据的功能。\r\n    //再次论证。这个方法现在是刷新页面即丢失的，并不是能够通过url来更新数据的。所以似乎可以启用这个方法\r\n    // onJavaDataChangeDataSelect?:(data:any)=>void\r\n    //尝试考虑用这个方式来替代上面注入函数的修改方式。\r\n    //查找到action后，用action proxy的dispatcher派发事件来更新数据\r\n    onDataSelectedEventType?:string\r\n}\r\nexport interface IActionUtils<T extends IActionData<IActionShellData, IActionJavaData>>{\r\n    type:string\r\n    init:()=>void\r\n    mergeDataToDefultData:(data:Partial<T>)=>T\r\n    createDefultData:()=>T\r\n    create:(actionGroup:IActionGroup, data?:Partial<T>)=>void\r\n    update(action:T, data?:Partial<T>):void\r\n    UI:(data:T)=>React.ReactNode\r\n    //点击更改按钮后调用不是page页面的时候需要，例如更改返回首页.\r\n    onClickChange?:(data:IOnChangeActionJavaDataProps, ...rest:any[])=>void\r\n}\r\n\r\nexport interface IActionUtilsMap{\r\n    [key:string]:IActionUtils<any>\r\n}\r\n\r\nexport const ActionUtilsMap:IActionUtilsMap = {}\r\n\r\nexport function registerActionUtils(key:string,utils:IActionUtils<any>){\r\n    if(key in ActionUtilsMap){\r\n        throw new Error(`ActionUtilsMap already has key: ${key}`)\r\n    }\r\n    // console.log('registerActionUtils', key, utils)\r\n    ActionUtilsMap[key] = utils\r\n}\r\n\r\nexport function getActionUtils<T extends IActionData<IActionShellData, IActionJavaData>>(key:string):IActionUtils<T>{\r\n    return ActionUtilsMap[key]\r\n}\r\n\r\nexport function createActionUtils<T extends IActionData<IActionShellData, IActionJavaData>>(type:string, init:()=>void, createDefultData:()=>T, UI:(data:T)=>React.ReactNode):IActionUtils<T>{\r\n    const res = {\r\n        type,\r\n        mergeDataToDefultData:createMergeToDefaultData(createDefultData),\r\n        createDefultData,\r\n        create:(actionGroup:IActionGroup, data?:Partial<T>)=>{\r\n            const action = createDefultData()\r\n            actionGroup.list.push(action)\r\n        },\r\n        update:(action:T, data?:Partial<T>)=>{\r\n            mergeDataWith(action, data)\r\n        },\r\n        UI,\r\n        init,\r\n    }\r\n    registerActionUtils(type,res)\r\n    return res\r\n}\r\n\r\n \r\n","import { IActionOrTriggerListPageParams } from \"@app/static\"\r\n\r\nimport { ParsedUrlQueryInput } from \"querystring\"\r\nimport { IActionGroup, IActionData } from \"../action\"\r\nimport { IProjectData } from \"../project\"\r\nimport { projectStore } from \"../storage\"\r\nimport { ITriggerGroup, ITriggerData } from \"../trigger\"\r\nimport { ITriggerActionGroup, ITriggerAction } from \"../trigger-action\"\r\nexport enum ActionListFromEnum {\r\n    project = 'project',\r\n}\r\nexport enum TriggerOrActionListTypeEnum {\r\n    addAction = 'add',\r\n    updateAction = 'update',\r\n}\r\nexport interface ITriggerOrActionListPageParams extends ParsedUrlQueryInput{\r\n    // 如果actionType是addAction，则target是taskData的id\r\n    // 如果actionType是updateAction，则target是actionData的id\r\n    // target: string\r\n    // 动作列表里选择动作后要返回的路径\r\n    backPath?: string\r\n    // 本次操作的类型\r\n    type: TriggerOrActionListTypeEnum\r\n    projectId:string\r\n    triggerActionGroupId:string\r\n    triggerActionId:string\r\n    actionGroupId:string\r\n    // 如果是更新，则必须有actionId\r\n    actionId?:string\r\n    // 如果是添加，则必须有actionType\r\n    // actionType为namespace/openApp这种样子的，这样能够从actionMap里找到这个action来进行添加\r\n    // 这个需要在动作列表里选择了具体的action之后才能知道，所以在传递过程中这个可以为空，在pages/action-list/index.tsx里会根据actionId来找到具体的actionType\r\n    actionType:string\r\n    // 处理函数名，在map里\r\n    // handlerFnName:string\r\n}\r\nexport interface ITriggerOrActionListParamsData{\r\n    project?:IProjectData\r\n    triggerActionGroup?:ITriggerActionGroup\r\n    triggerAction?:ITriggerAction\r\n    actionGroup?:IActionGroup\r\n    triggerGroup?:ITriggerGroup\r\n    action?:IActionData<any,any>\r\n    trigger?:ITriggerData<any,any>\r\n}\r\nexport interface ITriggerOrActionListPageParsedResult{\r\n    params:IActionOrTriggerListPageParams\r\n    data:ITriggerOrActionListParamsData\r\n}\r\nexport function getTriggerOrActionListPageParams(params:IActionOrTriggerListPageParams):ITriggerOrActionListPageParsedResult{\r\n    const project = projectStore.findDraftOrSavedProject(params.projectId)\r\n    const data:ITriggerOrActionListParamsData = {}\r\n    const res = {data, params}\r\n    if(!project)return res\r\n    data.project = project\r\n    if(project.triggerActionGroup.id !== params.triggerActionGroupId)return res\r\n    data.triggerActionGroup = project.triggerActionGroup\r\n    if(!params.triggerActionId)return res\r\n    const triggerAction = data.triggerActionGroup.list.find(item=>item.id === params.triggerActionId)\r\n    if(!triggerAction)return res\r\n    data.triggerAction = triggerAction\r\n    parseAction(data, params, triggerAction)\r\n    parseTrigger(data, params, triggerAction)\r\n    return res\r\n    \r\n}\r\n\r\nfunction parseAction(data:ITriggerOrActionListParamsData, params:IActionOrTriggerListPageParams, triggerAction:ITriggerAction){\r\n    if(!params.actionGroupId || !triggerAction.actionGroup || params.actionGroupId != triggerAction.actionGroup.id)return\r\n    data.actionGroup = triggerAction.actionGroup\r\n    const action = triggerAction.actionGroup.list.find(item=>item.id === params.actionId)\r\n    if(!action)return\r\n    data.action = action\r\n}\r\n\r\nfunction parseTrigger(data:ITriggerOrActionListParamsData, params:IActionOrTriggerListPageParams, triggerAction:ITriggerAction){\r\n    if(!params.triggerGroupId || !triggerAction.triggerGroup || params.triggerGroupId != triggerAction.triggerGroup.id)return\r\n    data.triggerGroup = triggerAction.triggerGroup\r\n    const trigger = triggerAction.triggerGroup.list.find(item=>item.id === params.triggerId)\r\n    if(!trigger)return\r\n    data.trigger = trigger\r\n}\r\n\r\n","import { appPackagesStore } from \"@app/static\"\r\n\r\nexport function AppIcon30({packageName}: {packageName:string}){\r\n    const packageInfo = appPackagesStore.findPackageInfoByPackageName(packageName)\r\n    const image = packageInfo?.iconBase64 ? `data:image/gif;base64,${packageInfo.iconBase64}` : ''\r\n    return <img src={image} width={30}\r\n    style={{ borderRadius: '8px' }}\r\n    />\r\n}\r\n","import { ActionOrTriggerListTypeEnum, appPackagesStore, IActionOrTriggerListPageParams } from \"@app/static/\"\r\nimport { AppIcon30 } from '@app/ui'\r\nimport { toProxy } from \"@fanfanlo\"\r\nimport { Box, Button, Grid2, Typography } from \"@mui/material\"\r\nimport { useRouter } from \"next/router\"\r\nimport { PropsWithChildren, useEffect } from \"react\"\r\nimport { childToProjectDataUtils, IChildToProjectData } from \"../../../utils\"\r\nimport { actionOpenAppUtils, IActionOpenAppData } from \"./IActionOpenApp.inft\"\r\n\r\nfunction UpdateAppLink({data, children}: {data: IActionOpenAppData}&PropsWithChildren){\r\n    const projectInfo:IChildToProjectData = {}\r\n    childToProjectDataUtils.actionList.getActionListByProp(data, projectInfo)\r\n    if(!projectInfo.project?.id || !projectInfo.triggerActionGroup?.id || !projectInfo.triggerAction?.id || !projectInfo.actionGroup?.id){\r\n        console.error('UpdateAppLink projectInfo is undefined', projectInfo)\r\n        return\r\n    }\r\n    const router = useRouter()\r\n    const backPath = router.pathname\r\n    const query:IActionOrTriggerListPageParams = {\r\n        backPath,\r\n        projectId: projectInfo.project?.id,\r\n        triggerActionGroupId: projectInfo.triggerActionGroup?.id,\r\n        triggerActionId: projectInfo.triggerAction?.id,\r\n        actionGroupId: projectInfo.actionGroup?.id,\r\n        type: ActionOrTriggerListTypeEnum.updateAction,\r\n        actionId: data.id,\r\n        actionType: actionOpenAppUtils.type,\r\n    }\r\n    \r\n    const param = new URLSearchParams([...Object.entries(query) as [string, string][]])\r\n    const p = `/action-list/app-selector?${param.toString()}`\r\n    useEffect(()=>{\r\n        router.prefetch(p)\r\n        // console.log('ppppppppprefectech', p)\r\n    }, [])\r\n    function onLinkClick(){\r\n        router.push(p)\r\n    }\r\n    return <Button\r\n    id=\"open-app-action-change-app-btn\"\r\n    data-id=\"open-app-action-change-app-btn\"\r\n    onClick={onLinkClick}>\r\n        {children}\r\n    </Button>\r\n}\r\nexport function IActionOpenAppUI(data: IActionOpenAppData) {\r\n    const packageInfo = appPackagesStore.findPackageInfoByPackageName(data.javaData.packageName)\r\n\r\n    function onDeleteComfirmed(){\r\n        const projectData:IChildToProjectData = {} \r\n        childToProjectDataUtils.actionList.getActionListByProp(data, projectData)\r\n        const list = projectData.actionList\r\n        if(!list){\r\n            throw new Error('actionList is undefined')\r\n        }\r\n        const index = list.findIndex(a => a.id === data.id)\r\n        if(index === -1){\r\n            throw new Error('action not found')\r\n        }\r\n        toProxy(list).splice(index, 1)\r\n    }\r\n    return <Box sx={{ width: '100%' }}>\r\n        <Box>\r\n            <b>打开应用</b>\r\n        </Box>\r\n        <Grid2 container sx={{ width: '100%' }}>\r\n            <Grid2 size=\"grow\" container>\r\n                <Grid2>\r\n                    <AppIcon30 packageName={data.javaData.packageName} />\r\n                </Grid2>\r\n                <Grid2>\r\n                    <Typography sx={{}}>\r\n                        <span style={{display:\"inline-block\", textIndent: \"10px\" }}>{packageInfo?.label}</span>\r\n                        <span style={{ display:\"inline-block\", textIndent: \"10px\", fontSize: \"0.8rem\" }}>{packageInfo?.packageName}</span>\r\n                    </Typography>\r\n                </Grid2>\r\n            </Grid2>\r\n            <Grid2 size={\"auto\"}>\r\n                <UpdateAppLink data={data}>\r\n                    <span>更换</span>\r\n                </UpdateAppLink>\r\n               \r\n            </Grid2>\r\n        </Grid2>\r\n    </Box>\r\n}","import { ActionOrTriggerListTypeEnum, IActionOrTriggerListPageParams } from \"@app/static\";\r\nimport Link from \"next/link\";\r\nimport { useRouter } from \"next/router\";\r\nimport { PropsWithChildren } from \"react\";\r\nimport { ulid } from \"ulid\";\r\nimport { createActionUtils, IActionData, IActionJavaData, IActionShellData } from \"../../../action\";\r\nimport { childToProjectDataUtils, IChildToProjectData } from \"../../../utils\";\r\nimport { appNamespace } from \"../app-namespace\";\r\nimport { IActionOpenAppUI } from \"./IActionOpenApp.UI\";\r\nconst type = `${appNamespace}openApp`\r\n\r\n\r\nexport interface IActionOpenAppJavaData extends IActionJavaData {\r\n    packageName: string\r\n}\r\n\r\nexport interface IActionOpenAppData extends IActionData<IActionShellData, IActionOpenAppJavaData> { \r\n    javaData: IActionOpenAppJavaData\r\n}\r\n\r\nfunction createDefultData(): IActionOpenAppData {\r\n    return {\r\n        id: ulid(),\r\n        type,\r\n        javaData: {\r\n            packageName: ''\r\n        }\r\n    }\r\n}\r\n\r\n// function UpdateAppLink({data, children}: {data: IActionOpenAppData}&PropsWithChildren){\r\n//     const packageName = data.javaData.packageName\r\n//     data.javaData\r\n//     console.log('packagename=', packageName)\r\n//     const projectInfo:IChildToProjectData = {}\r\n//     childToProjectDataUtils.actionList.getActionListByProp(data, projectInfo)\r\n//     if(!projectInfo.project?.id || !projectInfo.triggerActionGroup?.id || !projectInfo.triggerAction?.id || !projectInfo.actionGroup?.id){\r\n//         console.error('UpdateAppLink projectInfo is undefined', projectInfo)\r\n//         return\r\n//     }\r\n//     const router = useRouter()\r\n//     const backPath = router.pathname\r\n//     const query:IActionOrTriggerListPageParams = {\r\n//         backPath,\r\n//         projectId: projectInfo.project?.id,\r\n//         triggerActionGroupId: projectInfo.triggerActionGroup?.id,\r\n//         triggerActionId: projectInfo.triggerAction?.id,\r\n//         actionGroupId: projectInfo.actionGroup?.id,\r\n//         type: ActionOrTriggerListTypeEnum.updateAction,\r\n//         actionId: data.id,\r\n//         actionType: type,\r\n//     }\r\n//     return <Link href={{pathname: '/action-list/app-selector', query}}>\r\n//         {children}\r\n//     </Link>\r\n// }\r\nfunction init(){\r\n}\r\nexport const actionOpenAppUtils = createActionUtils(type, init, createDefultData, IActionOpenAppUI)\r\n\r\n\r\n","import { projectNamespace } from \"../core/namespace\"\r\n\r\nexport const actionsNamespace = `${projectNamespace}actions/`\r\n","import { NextRouter } from \"next/router\";\r\n\r\nasync function checkToPath(router:NextRouter, expectNowPath:string, pointPath:string, backCount:number){\r\n    const nowPath = router.pathname\r\n    console.log('nowpath=', nowPath);\r\n    console.log('expectNowPath=', expectNowPath)\r\n    console.log('pointPath=', pointPath)\r\n    if(nowPath === pointPath){\r\n        return\r\n    }\r\n    if(expectNowPath !== nowPath){\r\n        router.replace(pointPath)\r\n    }\r\n    while(backCount > 0){\r\n        router.back()\r\n        backCount--\r\n    }\r\n    if(router.pathname !== pointPath && pointPath){\r\n        router.push(pointPath)\r\n    }\r\n}\r\n\r\n\r\nexport const routerUtils = {\r\n    checkToPath\r\n}","export const projectNamespace = \"fanfanlo/\"\r\n","import { toProxy } from '@fanfanlo'\r\nimport _ from 'lodash'\r\nimport {storeUtils} from '@fanfanlo'\r\nexport interface IPackageInfo{\r\n    label:string\r\n    iconBase64:string\r\n    packageName:string\r\n}\r\nconst s = storeUtils.namespace('app-packages')\r\n// s.clear()\r\ninterface IData{\r\n    list:IPackageInfo[]\r\n}\r\nconst data = toProxy<IData>({list:[]})\r\nloadPackages()\r\nfunction loadPackages(){\r\n    const list = (s.read('list') || []) as IPackageInfo[]\r\n    data.list = _.isArray(list) ? list : []\r\n}\r\n\r\nfunction releasePackages(){\r\n    data.list = []\r\n}\r\n\r\nfunction savePackages(list:IPackageInfo[]){\r\n    s.write('list', list)\r\n    data.list = list\r\n}\r\n\r\nfunction findPackageInfoByPackageName(packageName:string){\r\n    return data.list.find(item=>item.packageName === packageName)\r\n}\r\nexport const appPackagesStore = {\r\n    data,\r\n    loadPackages,\r\n    releasePackages,\r\n    savePackages,\r\n    findPackageInfoByPackageName\r\n}","\r\nexport function throwTraceError(msg:string, ...rest:any[]){\r\n    console.error(msg, rest);\r\n    console.trace(msg);\r\n    throw new Error(msg);\r\n}","import { Dispatcher } from \"@fanfanlo\"\r\nimport { DispatcherUnsubscribe } from \"@fanfanlo\"\r\n\r\nconst dipsatcher = new Dispatcher()\r\ninterface IStaticModel{\r\n    dipsatcher:Dispatcher\r\n    screenLockCount:number\r\n    switchPage:()=>void\r\n    listenSwitchPage:(callback:()=>void)=>DispatcherUnsubscribe \r\n}\r\nexport const staticModel:IStaticModel = {\r\n    dipsatcher,\r\n    screenLockCount:0,\r\n    switchPage:async()=>{\r\n        dipsatcher.dispatch(\"switchPage\")\r\n        staticModel.screenLockCount = 0\r\n    },\r\n    listenSwitchPage:(callback:()=>void)=>{\r\n        return dipsatcher.addListener(\"switchPage\",callback)\r\n    }\r\n}   \r\n","import { PropsWithChildren } from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { useRouter } from \"next/router\";\r\n\r\n\r\nexport function PageTransition({ children }: PropsWithChildren) {\r\n    const router = useRouter()\r\n    return (\r\n\r\n        <AnimatePresence mode=\"sync\">\r\n            <motion.div\r\n                key={router.route}\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -110 }}\r\n                transition={{ duration: 0.3 }}\r\n            >\r\n                {children}\r\n            </motion.div>\r\n        </AnimatePresence>\r\n    )\r\n}","import { staticModel } from \"@app/static\";\r\nimport { Box } from \"@mui/material\";\r\nimport { useEffect } from \"react\";\r\nimport { PageTransition } from \"../motion\";\r\nlet idCount = 0\r\nexport function PageShell({children}:{children:React.ReactNode}){\r\n    const id = `app-shell-${idCount++}`\r\n    useEffect(()=>{\r\n        const box = document.querySelector(`#${id}`)\r\n        const unlisten = staticModel.listenSwitchPage(()=>{\r\n            if(!box)return\r\n        })\r\n        if(!box)return\r\n        box.addEventListener(\"click\",(e)=>{\r\n            if(staticModel.screenLockCount == 0)return\r\n            e.stopPropagation()\r\n            e.preventDefault()\r\n        })\r\n        return ()=>{\r\n            unlisten()\r\n        }\r\n    },[])\r\n    return (\r\n        <Box id={id}>\r\n            <PageTransition>\r\n                {children}  \r\n            </PageTransition>\r\n        </Box>\r\n    )\r\n}\r\n","import { AppBar, Box, Container, CssBaseline, Fab, Fade, Slide, Toolbar, Typography, useScrollTrigger } from \"@mui/material\";\r\nimport { PropsWithChildren, ReactNode } from \"react\";\r\n// import {AndroidPageContent} from \"../../\";\r\nimport { browserHistoryUtils, IDispatcher } from \"@fanfanlo\";\r\nimport KeyboardArrowLeft from '@mui/icons-material/KeyboardArrowLeft';\r\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\r\nimport * as React from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport { PageShell } from \"../app/PageShell\";\r\nimport shadows from \"@mui/material/styles/shadows\";\r\nimport AndroidPageContent from \"../page/AndroidPageContent\";\r\nimport { IAppBarBackAskEvent } from \"@app/static\";\r\nimport { ITitleI18nConf } from \"../page\";\r\ninterface Props {\r\n    /**\r\n     * Injected by the documentation to work in an iframe.\r\n     * You won't need it on your project.\r\n     */\r\n    window?: () => Window;\r\n    children?: React.ReactElement<unknown>;\r\n}\r\n\r\nfunction HideOnScroll(props: Props) {\r\n    const { children, window } = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({\r\n        target: window ? window() : undefined,\r\n    });\r\n\r\n    return (\r\n        <Slide appear={false} direction=\"down\" in={!trigger}>\r\n            {children ?? <div />}\r\n        </Slide>\r\n    );\r\n}\r\nexport interface IAppbarProps extends PropsWithChildren {\r\n    title: ReactNode\r\n    back: boolean\r\n    backHandler?: () => boolean\r\n    backDispatcher?:IDispatcher\r\n    toolbar?:ReactNode\r\n    toolbarContent?:ReactNode\r\n}\r\nexport function Appbar({ title }: { title: ReactNode } & PropsWithChildren) {\r\n    return (\r\n\r\n        <AppBar color={\"inherit\"}>\r\n            <Toolbar>\r\n                <Typography variant=\"h6\" component=\"div\">\r\n                    {title}\r\n                </Typography>\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\ninterface IAppbarContainerProps extends PropsWithChildren {\r\n    appbarProps: IAppbarProps\r\n    titleConf?:ITitleI18nConf\r\n    reload?: boolean\r\n}\r\n\r\n// export interface IAppBarBackAskEvent{\r\n//     defaultPrevented:boolean\r\n// }\r\n\r\nfunction ScrollTop(props: Props) {\r\n    const { children, window } = props;\r\n    // Note that you normally won't need to set the window ref as useScrollTrigger\r\n    // will default to window.\r\n    // This is only being set here because the demo is in an iframe.\r\n    const trigger = useScrollTrigger({\r\n        target: window ? window() : undefined,\r\n        disableHysteresis: true,\r\n        threshold: 100,\r\n    });\r\n\r\n    const handleClick = (event: React.MouseEvent<HTMLDivElement>) => {\r\n        const anchor = (\r\n            (event.target as HTMLDivElement).ownerDocument || document\r\n        ).querySelector('#back-to-top-anchor');\r\n\r\n        if (anchor) {\r\n            anchor.scrollIntoView({\r\n                block: 'center',\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Fade in={trigger}>\r\n            <Box data-id=\"content-scroll-top-button\"\r\n                onClick={handleClick}\r\n                role=\"presentation\"\r\n                sx={{ position: 'fixed', bottom: 16, right: 16 }}\r\n            >\r\n                {children}\r\n            </Box>\r\n        </Fade>\r\n    );\r\n}\r\nexport function AppbarContainer(props: IAppbarContainerProps) {\r\n    const { children, appbarProps, titleConf, reload } = props;\r\n    const router = useRouter()\r\n    function handleBack(){\r\n        // 本想抽象成底层一个方法，但是考虑了一下router需要注入或者是一个callback，似乎像现在这样判断一下event也可以。回头继续观察一下吧。\r\n        const event = browserHistoryUtils.askHistoryBack()\r\n        if(event.defaultPrevented)return\r\n        if(appbarProps.backDispatcher){\r\n            const e:IAppBarBackAskEvent = {defaultPrevented:false}\r\n            appbarProps.backDispatcher.dispatch('back',e)\r\n            if(e.defaultPrevented)return\r\n        }\r\n        router.back()\r\n    }\r\n    return (\r\n        <PageShell>\r\n        <React.Fragment>\r\n            <CssBaseline />\r\n            <HideOnScroll {...props}>\r\n                <AppBar color=\"inherit\">\r\n                    {appbarProps.toolbar ? \r\n                    appbarProps.toolbar:\r\n                    <Toolbar>\r\n                        <KeyboardArrowLeft onClick={handleBack} />\r\n                        {appbarProps.title}\r\n                    </Toolbar>\r\n                    }\r\n                </AppBar>\r\n            </HideOnScroll>\r\n            <Toolbar id=\"back-to-top-anchor\" />\r\n            <Container sx={{padding:\"0\", marginTop:\"17px\"}}>\r\n                <AndroidPageContent titleConf={titleConf} reload={reload}>\r\n                    {children}\r\n                </AndroidPageContent>\r\n            </Container>\r\n\r\n            <ScrollTop {...props}>\r\n                <Fab size=\"small\" aria-label=\"scroll back to top\">\r\n                    <KeyboardArrowUpIcon />\r\n                </Fab>\r\n            </ScrollTop>\r\n        </React.Fragment>\r\n        </PageShell>\r\n    );\r\n}\r\n"],"names":["Dispatcher","throwTraceError","ProjectMemberType","_","dispatcher","EditType","dispatchEditEvent","editType","event","dispatch","onEditJavaData","projectMemberType","action","onActionEdit","trigger","onTriggerEdit","msg","projectInfo","merge","javaData","data","shellData","console","log","JSON","parse","stringify","onAdd","actionGroup","onActionGroupAdd","triggerGroup","onTriggerGroupAdd","group","list","push","init","addListener","projectEventUtils","actionsNamespace","appNamespace","x","ActionOrTriggerListFromEnum","ActionOrTriggerListTypeEnum","createMergeToDefaultData","mergeDataWith","ActionUtilsMap","registerActionUtils","key","utils","Error","getActionUtils","createActionUtils","type","createDefultData","UI","res","mergeDataToDefultData","create","update","projectStore","ActionListFromEnum","TriggerOrActionListTypeEnum","getTriggerOrActionListPageParams","params","project","findDraftOrSavedProject","projectId","triggerActionGroup","id","triggerActionGroupId","triggerActionId","triggerAction","find","item","parseAction","parseTrigger","actionGroupId","actionId","triggerGroupId","triggerId","appPackagesStore","AppIcon30","packageName","packageInfo","findPackageInfoByPackageName","image","iconBase64","img","src","width","style","borderRadius","toProxy","Box","Button","Grid2","Typography","useRouter","useEffect","childToProjectDataUtils","actionOpenAppUtils","UpdateAppLink","children","actionList","getActionListByProp","error","router","backPath","pathname","query","updateAction","actionType","param","URLSearchParams","Object","entries","p","toString","prefetch","onLinkClick","data-id","onClick","IActionOpenAppUI","onDeleteComfirmed","projectData","index","findIndex","a","splice","sx","b","container","size","span","display","textIndent","label","fontSize","ulid","projectNamespace","checkToPath","expectNowPath","pointPath","backCount","nowPath","replace","back","routerUtils","storeUtils","s","namespace","loadPackages","read","isArray","releasePackages","savePackages","write","rest","trace","dipsatcher","staticModel","screenLockCount","switchPage","listenSwitchPage","callback","AnimatePresence","motion","PageTransition","mode","div","initial","opacity","y","animate","exit","transition","duration","route","idCount","PageShell","box","document","querySelector","unlisten","addEventListener","e","stopPropagation","preventDefault","AppBar","Container","CssBaseline","Fab","Fade","Slide","Toolbar","useScrollTrigger","browserHistoryUtils","KeyboardArrowLeft","KeyboardArrowUpIcon","React","AndroidPageContent","HideOnScroll","props","window","target","undefined","appear","direction","in","Appbar","title","color","variant","component","ScrollTop","disableHysteresis","threshold","handleClick","anchor","ownerDocument","scrollIntoView","block","role","position","bottom","right","AppbarContainer","appbarProps","titleConf","reload","handleBack","askHistoryBack","defaultPrevented","backDispatcher","Fragment","toolbar","padding","marginTop","aria-label"],"sourceRoot":"","ignoreList":[]}