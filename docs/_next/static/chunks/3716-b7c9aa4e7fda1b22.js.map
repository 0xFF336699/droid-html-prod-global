{"version":3,"file":"static/chunks/3716-b7c9aa4e7fda1b22.js","mappings":"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","sources":["webpack://_N_E/../../libs/fanfanlo/src/iframe/IFrameContainer.ts","webpack://_N_E/../../libs/fanfanlo/src/iframe/IFrameReactContainer.tsx","webpack://_N_E/../../node_modules/.pnpm/react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3/node_modules/react-i18next/dist/es/index.js","webpack://_N_E/../../libs/app/model/src/remote/tracking/print.ts","webpack://_N_E/../../libs/app/ui/src/components/app/AppShell.tsx","webpack://_N_E/../../libs/fanfanlo/src/utils/files-map-utils.ts","webpack://_N_E/../../libs/fanfanlo/src/i18n/i18n-init.ts","webpack://_N_E/../../libs/fanfanlo/src/storage/store-page-context.tsx","webpack://_N_E/../../libs/app/ui/src/components/page/PageContent.tsx","webpack://_N_E/../../libs/app/ui/src/components/page/AndroidPageContent.tsx"],"sourcesContent":["\"use client\";\n\nimport axios from \"axios\";\nimport { initialize, InitializeResult } from \"@open-iframe-resizer/core\";\n// import iFrameResize from 'iframe-resizer'\n\nexport type IFrameHtmlBuilderOptions = {\n    iframeId:string,\n}\nexport type IFrameHtmlBuilder = (content: string, options?:IFrameHtmlBuilderOptions) => string;\nexport class IFrameContainer {\n    private container: HTMLDivElement;\n    private iframe: HTMLIFrameElement;\n    private readonly iframeId: string;\n    private minWidth: number | null = null;\n    private minHeight: number | null = null;\n    private maxWidth: number | null = null;\n    private maxHeight: number | null = null;\n    private currentLoadCallback: (() => void) | null = null;\n    private currentErrorCallback: ((error: Error) => void) | null = null;\n    private resizeEnabled: boolean = true;\n    private initializeResultList?: InitializeResult[];\n    private blobUrl?:string\n    \n    // 保存原始状态的对象\n    private originalState: {\n        position?: string;\n        top?: string;\n        left?: string;\n        width?: string;\n        height?: string; \n        zIndex?: string;\n        overflow?: string;\n        border?: string;\n        margin?: string;\n        padding?: string;\n        boxSizing?: string;\n        minWidth?: number | null;\n        minHeight?: number | null;\n        maxWidth?: number | null;\n        maxHeight?: number | null;\n        isFullscreen: boolean;\n    } = { isFullscreen: false };\n    \n\n    constructor() {\n        this.iframeId = 'iframe_' + Math.random().toString(36).substr(2, 9);\n        \n        // 创建容器和iframe\n        this.container = document.createElement('div');\n        this.iframe = document.createElement('iframe');\n        (this.iframe as any).controller = this;\n        // 设置容器样式\n        this.container.style.width = '100%';\n        this.container.style.height = '100%';\n        this.container.style.overflow = 'hidden';\n        this.container.style.position = 'relative';\n        this.container.style.maxWidth = '100%';\n        this.container.style.margin = '0 auto';\n        \n        // 设置iframe样式\n        this.iframe.style.width = '100%';\n        this.iframe.style.height = '100%';\n        this.iframe.style.border = 'none';\n        this.iframe.style.overflow = 'hidden';\n        this.iframe.style.boxSizing = 'border-box';\n        this.iframe.setAttribute('scrolling', 'no');\n        this.iframe.setAttribute('seamless', 'seamless');\n\n        // --- Add Load and Error Handlers ---\n        this.iframe.onload = () => {\n            if (this.currentLoadCallback) {\n                this.currentLoadCallback();\n                // Optionally clear callback after use if needed\n                // this.currentLoadCallback = null; \n            }\n            if(typeof window !== 'undefined' ) {\n                this.fitIframe();\n                // const initInitialize = ()=>{\n                //     const list:InitializeResult[] = initialize({\n                //         bodyMargin:\"0px\",\n                //         bodyPadding:\"0px\",\n                //         offsetSize:3,\n                //     },`#${this.iframeId}`)\n                // }\n                // initInitialize();\n\n                // const initIframeResizer =()=>{\n                //     const iFrameResize = (window as any).iframeResize;\n                //     // console.log('iframeResize_fn', iFrameResize)\n                //     iFrameResize({\n                //         onReady:(iframe:any)=>{\n                //             // console.log('onReady_fn', iframe)\n                //         },\n                //         license: 'GPLv3',\n                //         waitForLoad:true,\n                //         log: false, // 可选：是否输出日志\n                //         checkOrigin: false, // 可选：如果 iframe 是跨域的必须设为 false\n                //       }, `#${this.iframeId}`);\n                    \n                // }\n            }\n        };\n\n        this.iframe.onerror = (event: Event | string, source?: string, lineno?: number, colno?: number, error?: Error) => {\n            console.error('%cIFrameContainer: iframe \"error\" event triggered.', 'color: red; font-weight: bold;', event);\n            const err = error || new Error(typeof event === 'string' ? event : 'Failed to load iframe content');\n            if (this.currentErrorCallback) {\n                this.currentErrorCallback(err);\n                // Optionally clear callback after use if needed\n                // this.currentErrorCallback = null;\n            }\n        };\n        // --- End Handlers ---\n\n        // 将iframe添加到容器中\n        this.container.appendChild(this.iframe);\n        \n        // 设置iframe的ID\n        this.iframe.id = this.iframeId;\n        \n        // 添加message事件监听\n        window.addEventListener('message', this.handleIframeMessage.bind(this));\n    }\n    // private initializeResultList?:InitializeResult[]\n    private fitIframe(){\n        return;\n        this.initializeResultList = initialize({\n            bodyMargin:\"0px\",\n            bodyPadding:\"0px\",\n            offsetSize:3,\n        },`#${this.iframeId}`);\n    }\n    public loadContent(content: string, htmlBuilder?:IFrameHtmlBuilder): void {\n        this.currentLoadCallback = null;\n        this.currentErrorCallback = null;\n        const resizeScript = `\n            <script>\n                const IFRAME_ID = '${this.iframeId}';\n                window.IFRAME_ID = '${this.iframeId}';\n                function notifyResize() {\n                    const body = document.body;\n                    const html = document.documentElement;\n                    \n                    // 获取实际内容高度（取最大值）\n                    const height = Math.max(\n                        body.scrollHeight,\n                        body.offsetHeight,\n                        html.scrollHeight,\n                        html.offsetHeight\n                    );\n                    \n                    // 获取实际内容宽度\n                    const width = Math.max(\n                        body.scrollWidth,\n                        body.offsetWidth,\n                        html.scrollWidth,\n                        html.offsetWidth\n                    );\n                    \n                    // 发送消息给父窗口\n                    window.parent.postMessage({\n                        type: 'resize',\n                        iframeId: IFRAME_ID,\n                        height,\n                        width\n                    }, '*');\n                }\n                \n                // 监听窗口大小变化\n                window.addEventListener('resize', notifyResize);\n                \n                // 监听DOMContentLoaded，确保DOM加载完毕后调整大小\n                document.addEventListener('DOMContentLoaded', notifyResize);\n                \n                // 监听load事件，确保所有资源加载完毕后调整大小\n                window.addEventListener('load', notifyResize);\n                \n                // 创建MutationObserver监听DOM变化\n                const observer = new MutationObserver(notifyResize);\n                observer.observe(document.documentElement, {\n                    childList: true,\n                    subtree: true,\n                    attributes: true,\n                    characterData: true\n                });\n                \n                // 监听来自父窗口的消息，处理请求重新调整大小的消息\n                window.addEventListener('message', function(event) {\n                    if (event.data && event.data.type === 'requestResize') {\n                        // 主动触发一次尺寸计算和发送\n                        notifyResize();\n                    }\n                });\n                \n                // 初始化大小\n                notifyResize();\n            </script>\n        `;\n\n        const topScript = `\n        <script>\n        var autoWebViewJs = window.autoWebViewJs = window.parent.window.autoWebViewJs;\n        autoWebViewJs = window.parent.window.autoWebViewJs;\n        var isRealInAndroid = window.isRealInAndroid;\n        var storeUtilsConf = window.storeUtilsConf = window.parent.window.storeUtilsConf;\n        </script>\n        `\n        const bodyStyle = `<style>html, body{margin-left:-4px;padding:0;\n        background-color: white;}</style>`;\n\n        const idScript = `\n        <script>\n            const IFRAME_ID = '${this.iframeId}';\n            window.IFRAME_ID = '${this.iframeId}';\n        </script>`\n\n        // 将内容和脚本组合\n        let fullContent = content;\n        fullContent = fullContent.includes('<head>') ?\n            fullContent.replace('<head>', `<head>${topScript}`)\n            : `${fullContent}${topScript}`;\n\n        fullContent = fullContent.includes('</head>') ?\n            fullContent.replace('</head>', `${bodyStyle}</head>`)\n            : `${fullContent}${bodyStyle}`;\n\n        fullContent = fullContent.includes('</body>') \n            ? fullContent.replace('</body>', `${resizeScript}</body>`)\n            : `${fullContent}${resizeScript}`;\n\n        // fullContent = fullContent.includes('<head>') ?\n        // fullContent.replace(`<head>`,`<head>${idScript}`):\n        // `${idScript}${fullContent}`;\n\n        let c = htmlBuilder ? htmlBuilder(content,{iframeId:this.iframeId}) : content;\n        // c = c.includes('</body>') \n        //     ? c.replace('</body>', `${resizeScript}</body>`)\n        //     : `${c}${resizeScript}`;\n\n        // this.iframe.srcdoc = c\n\n        const blob = new Blob([c], { type: 'text/html' });\n        const url = URL.createObjectURL(blob);\n        this.blobUrl = url;\n        this.iframe.src = url;\n    }\n    private template(s:string){\n        return `\n        <html>\n        <head>\n        </head>\n        <body>\n        <div id=\"app\"></div>\n        <script>${s}</script>\n        </body>\n        </html>`\n    }\n    /**\n     * 设置最小宽度和高度\n     * @param minWidth 最小宽度（像素）\n     * @param minHeight 最小高度（像素）\n     */\n    public setMinSize(minWidth: number | null, minHeight: number | null): void {\n        this.minWidth = minWidth;\n        this.minHeight = minHeight;\n    }\n\n    /**\n     * 设置最大宽度和高度\n     * @param maxWidth 最大宽度（像素）\n     * @param maxHeight 最大高度（像素）\n     */\n    public setMaxSize(maxWidth: number | null, maxHeight: number | null): void {\n        this.maxWidth = maxWidth;\n        this.maxHeight = maxHeight;\n    }\n\n    private handleIframeMessage(event: MessageEvent): void {\n        // 如果禁用了调整大小功能或处于全屏状态，直接返回\n        if (!this.resizeEnabled || this.originalState.isFullscreen) return;\n        if (event.data.type === 'resize' && event.data.iframeId === this.iframeId) {\n            let { height, width } = event.data;\n            const windowMaxWidth = window.innerWidth;\n            \n            // 应用最小尺寸限制\n            if (this.minWidth !== null) {\n                width = Math.max(width, this.minWidth);\n            }\n            if (this.minHeight !== null) {\n                height = Math.max(height, this.minHeight);\n            }\n            \n            // 应用最大尺寸限制\n            if (this.maxWidth !== null) {\n                width = Math.min(width, this.maxWidth);\n            } else {\n                // 如果没有设置最大宽度，则使用窗口宽度作为限制\n                width = Math.min(width, windowMaxWidth);\n            }\n            \n            if (this.maxHeight !== null) {\n                height = Math.min(height, this.maxHeight);\n            }\n            \n            // 设置容器尺寸\n            this.container.style.height = `${height}px`;\n            this.container.style.width = `${width}px`;\n        }\n    }\n\n    /**\n     * 通过URL加载iframe\n     * @param url 要加载的URL\n     * @param onLoad 加载成功回调函数\n     * @param onError 加载失败回调函数\n     */\n    public async loadUrl(url: string, onLoad?: () => void, onError?: (error: Error) => void) {\n        this.currentLoadCallback = onLoad || null;\n        this.currentErrorCallback = onError || null;\n        if (this.iframe) {\n            this.iframe.src = url;\n        } else {\n            console.error('IFrameContainer: iframe element is null in loadUrl!');\n        }\n    }\n\n    // 移除 createLoadingElement, showLoading, removeLoading 方法\n\n    /**\n     * 从URL加载内容并作为字符串显示\n     * @param url 要加载的资源URL\n     * @returns Promise<void>\n     */\n    public async loadUrlAsContent(url: string, onLoad?: () => void, onError?: (error: Error) => void, htmlBuilder?:IFrameHtmlBuilder): Promise<void> {\n        try {\n            const response = await fetch(url);\n            if (!response.ok) {\n                onError?.(new Error(`HTTP error! status: ${response.status}`));\n                return;\n            }\n            const content = await response.text();\n            this.loadContent(content, htmlBuilder);\n            onLoad?.();\n        } catch (error) {\n            console.error('Failed to load URL content:', error);\n            onError?.(error as Error);\n        }\n    }\n\n    /**\n     * 获取容器元素\n     * @returns HTMLDivElement 容器元素\n     */\n    public getContainer(): HTMLDivElement {\n        return this.container;\n    }\n\n    /**\n     * 设置容器大小\n     * @param width 宽度\n     * @param height 高度\n     */\n    public setSize(width: string, height: string): void {\n        this.container.style.width = width;\n        this.container.style.height = height;\n    }\n    \n    /**\n     * 进入全屏模式\n     * 将iframe扩展到整个窗口大小，并暂停自动调整大小\n     */\n    public enterFullscreen(): void {\n        if (this.originalState.isFullscreen) return; // 已经是全屏了\n        \n        // 保存当前状态\n        this.originalState = {\n            position: this.container.style.position,\n            top: this.container.style.top,\n            left: this.container.style.left,\n            width: this.container.style.width,\n            height: this.container.style.height,\n            zIndex: this.container.style.zIndex,\n            overflow: this.container.style.overflow,\n            border: this.container.style.border,\n            margin: this.container.style.margin,\n            padding: this.container.style.padding,\n            boxSizing: this.container.style.boxSizing,\n            minWidth: this.minWidth,\n            minHeight: this.minHeight,\n            maxWidth: this.maxWidth,\n            maxHeight: this.maxHeight,\n            isFullscreen: true\n        };\n        \n        // 暂停resize功能\n        this.resizeEnabled = false;\n        \n        // 设置全屏样式\n        this.container.style.position = 'fixed';\n        this.container.style.top = '0';\n        this.container.style.left = '0';\n        this.container.style.width = '100vw';\n        this.container.style.height = '100vh';\n        this.container.style.zIndex = '2147483647';\n        this.container.style.border = 'none';\n        this.container.style.margin = '0';\n        this.container.style.padding = '0';\n        this.container.style.boxSizing = 'border-box';\n        \n        // 临时禁用最小/最大尺寸限制\n        this.setMinSize(null, null);\n        this.setMaxSize(null, null);\n    }\n    \n    /**\n     * 退出全屏模式\n     * 恢复iframe到原始大小，并重新启用自动调整大小\n     */\n    public exitFullscreen(): void {\n        if (!this.originalState.isFullscreen) return; // 不是全屏状态\n        \n        // 恢复原来的样式\n        this.container.style.position = this.originalState.position || '';\n        this.container.style.top = this.originalState.top || '';\n        this.container.style.left = this.originalState.left || '';\n        this.container.style.width = this.originalState.width || '';\n        this.container.style.height = this.originalState.height || '';\n        this.container.style.zIndex = this.originalState.zIndex || '';\n        this.container.style.overflow = this.originalState.overflow || '';\n        this.container.style.border = this.originalState.border || '';\n        this.container.style.margin = this.originalState.margin || '';\n        this.container.style.padding = this.originalState.padding || '';\n        this.container.style.boxSizing = this.originalState.boxSizing || '';\n        \n        // 恢复最小/最大尺寸限制\n        this.setMinSize(this.originalState.minWidth ?? null, this.originalState.minHeight ?? null);\n        this.setMaxSize(this.originalState.maxWidth ?? null, this.originalState.maxHeight ?? null);\n        \n        // 重新启用resize功能\n        this.resizeEnabled = true;\n        \n        // 重置状态\n        this.originalState.isFullscreen = false;\n        \n        // 触发一次resize以恢复适当的大小\n        if (this.iframe.contentWindow) {\n            // 尝试通过消息触发重新调整大小\n            this.iframe.contentWindow.postMessage({ type: 'requestResize' }, '*');\n        }\n    }\n    \n    /**\n     * 切换全屏状态\n     * 如果当前是全屏，则退出；否则进入全屏\n     */\n    public toggleFullscreen(): void {\n        if (this.originalState.isFullscreen) {\n            this.exitFullscreen();\n        } else {\n            this.enterFullscreen();\n        }\n    }\n    \n    /**\n     * 判断是否是全屏状态\n     * @returns boolean 是否处于全屏状态\n     */\n    public isFullscreen(): boolean {\n        return this.originalState.isFullscreen;\n    }\n    \n    /**\n     * 启用或禁用resize功能\n     * @param enabled 是否启用resize\n     */\n    public enableResize(enabled: boolean): void {\n        this.resizeEnabled = enabled;\n        \n        // 如果重新启用了resize，尝试触发一次调整大小\n        if (enabled && this.iframe.contentWindow && !this.originalState.isFullscreen) {\n            this.iframe.contentWindow.postMessage({ type: 'requestResize' }, '*');\n        }\n    }\n\n    public exit(){\n        const iframe = this.iframe;\n        if(!iframe)return;\n        const clone = iframe.cloneNode(false);\n        iframe.replaceWith(clone);\n        iframe.remove();\n        if(this.blobUrl){\n            URL.revokeObjectURL(this.blobUrl);\n            this.blobUrl = undefined;\n        }\n        console.log('iframe released', this.iframeId)\n    }\n}","import React, { useEffect, useRef, useState } from 'react';\r\nimport { IFrameContainer, IFrameHtmlBuilder } from './IFrameContainer';\r\n// --- Add MUI Imports ---\r\nimport Box from '@mui/material/Box';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Typography from '@mui/material/Typography';\r\nimport Alert from '@mui/material/Alert';\r\n// --- End MUI Imports ---\r\n\r\ninterface IFrameReactContainerProps {\r\n    /** 容器样式 */\r\n    style?: React.CSSProperties;\r\n    /** 容器类名 */\r\n    className?: string;\r\n    /** 要加载的URL */\r\n    url?: string;\r\n    /** 要加载的HTML内容 */\r\n    content?: string;\r\n    urlAsContent?:boolean;\r\n    /** 最小宽度（像素） */\r\n    minWidth?: number;\r\n    /** 最小高度（像素） */\r\n    minHeight?: number;\r\n    /** 最大宽度（像素） */\r\n    maxWidth?: number;\r\n    /** 最大高度（像素） */\r\n    maxHeight?: number;\r\n    /** 加载失败的回调 */\r\n    onError?: (error: Error) => void;\r\n    /** 加载完成的回调 */\r\n    onLoad?: () => void;\r\n    htmlBuilder?: IFrameHtmlBuilder\r\n}\r\n\r\nexport const IFrameReactContainer: React.FC<IFrameReactContainerProps> = ({\r\n    style,\r\n    className,\r\n    url,\r\n    content,\r\n    urlAsContent,\r\n    minWidth,\r\n    minHeight,\r\n    maxWidth,\r\n    maxHeight,\r\n    onError,\r\n    onLoad,\r\n    htmlBuilder\r\n}) => {\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const iframeContainerRef = useRef<IFrameContainer | null>(null);\r\n    // Internal loading state for the iframe itself\r\n    const [iframeLoading, setIframeLoading] = useState<boolean>(false); \r\n    // Internal error state for the iframe itself\r\n    const [iframeError, setIframeError] = useState<Error | null>(null); \r\n \r\n    useEffect(()=>{\r\n        return ()=>{\r\n            if(iframeContainerRef.current){\r\n                iframeContainerRef.current.exit()\r\n            }\r\n        }\r\n    }, [])\r\n    useEffect(() => {\r\n        // 创建 IFrameContainer 实例\r\n        if (!iframeContainerRef.current && containerRef.current) {\r\n            iframeContainerRef.current = new IFrameContainer();\r\n            const container = iframeContainerRef.current;\r\n            container.setMinSize(minWidth ?? null, minHeight ?? null);\r\n            container.setMaxSize(maxWidth ?? null, maxHeight ?? null);\r\n            containerRef.current.appendChild(container.getContainer());\r\n        }\r\n\r\n        return () => {\r\n            // 清理事件监听\r\n            if (containerRef.current && iframeContainerRef.current) {\r\n                containerRef.current.removeChild(iframeContainerRef.current.getContainer());\r\n                iframeContainerRef.current = null;\r\n            }\r\n        };\r\n    }, [minWidth, minHeight, maxWidth, maxHeight]);\r\n\r\n    useEffect(() => {\r\n        const iframeContainer = iframeContainerRef.current;\r\n        if (!iframeContainer) return;\r\n\r\n        const loadContentOrUrl = async () => {\r\n            // Reset internal state before loading\r\n            setIframeLoading(true); \r\n            setIframeError(null);\r\n            try {\r\n                if (content) { // Check for content first\r\n                    iframeContainer.loadContent(content, htmlBuilder);\r\n                    // For srcdoc, loading might be considered finished immediately\r\n                    // or rely on resizer events. Let's tentatively set loading false.\r\n                    setIframeLoading(false); \r\n                    onLoad?.(); // Call parent onLoad immediately for content\r\n                } else if (url) { // Then check for URL\r\n                    // Pass wrapped callbacks to the actual loadUrl\r\n                    const handleLoad = () => {\r\n                        setIframeLoading(false);\r\n                        setIframeError(null);\r\n                        onLoad?.(); // Call the parent's onLoad\r\n                    };\r\n\r\n                    const handleError = (error: Error) => {\r\n                        console.error('%cIFrameReactContainer: handleError (callback from IFrameContainer) triggered.', 'color: red;', error);\r\n                        setIframeLoading(false);\r\n                        setIframeError(error);\r\n                        onError?.(error); // Call the parent's onError\r\n                    };\r\n                    if(urlAsContent){\r\n                        iframeContainer.loadUrlAsContent(url, handleLoad, handleError, htmlBuilder);\r\n                        handleLoad();\r\n                    }else{\r\n                        iframeContainer.loadUrl(url, handleLoad, handleError);\r\n                    }\r\n                    // Note: setIframeLoading(false) is now handled inside the callbacks\r\n                } else {\r\n                    setIframeLoading(false); // No URL or content, stop loading\r\n                }\r\n            } catch (error) { // Catch synchronous errors during setup if any\r\n                console.error('>>> Sync Error during loadContentOrUrl setup:', error);\r\n                if (error instanceof Error) {\r\n                    setIframeLoading(false);\r\n                    setIframeError(error);\r\n                    onError?.(error);\r\n                } else {\r\n                    const unknownError = new Error('An unknown error occurred during setup');\r\n                    setIframeLoading(false);\r\n                    setIframeError(unknownError);\r\n                    onError?.(unknownError);\r\n                }\r\n            }\r\n        };\r\n\r\n        loadContentOrUrl();\r\n    }, [url, content, onError, onLoad, iframeContainerRef.current]); \r\n  \r\n    return (\r\n        <div ref={containerRef} style={style} className={className}>\r\n            {/* Display internal loading/error state */}\r\n            {iframeLoading && (\r\n                <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', padding: 2 }}>\r\n                    <CircularProgress size={24} />\r\n                    <Typography variant=\"body2\" sx={{ ml: 1 }}>Loading preview...</Typography>\r\n                </Box>\r\n            )}\r\n            {iframeError && !iframeLoading && (\r\n                <Alert severity=\"error\" sx={{ m: 1 }}>Preview Error: {iframeError.message}</Alert>\r\n            )}\r\n            {/* The actual iframe container (managed by IFrameContainer class) is appended here */}\r\n        </div>\r\n    );\r\n};","export * from \"C:\\\\work\\\\android-droid\\\\html\\\\website-2024-12\\\\node_modules\\\\.pnpm\\\\react-i18next@15.6.0_i18next@24.2.3_typescript@5.7.3__react-dom@19.1.0_react@19.1.0__react@19.1.0_typescript@5.7.3\\\\node_modules\\\\react-i18next\\\\dist\\\\es\\\\index.js\"","import { request } from \"@fanfanlo\"\r\nimport { IRequestOptions } from \"../IRequestOptions\"\r\nimport { tms } from \"../tms\"\r\n\r\n\r\nexport interface ITrackingPrint{\r\n    type:string\r\n    title:string\r\n    subtitle:string\r\n    extra?:Record<any, any>\r\n}\r\n\r\nexport async function trackingPrint(opts:IRequestOptions<ITrackingPrint>){\r\n    const res = await request(tms.TTracking, tms.MTrackingPrint, opts.params, opts.gateway, opts.handler)\r\n    return res;\r\n}","'use client'\r\nimport { i18n, i18nInit, IPageScrollPosition, StorePageContext, StorePageDynamicContext, toProxy, watchUpdates, storeUtils } from \"@fanfanlo\";\r\nimport { useRouter } from \"next/router\";\r\nimport getConfig from \"node_modules/next/config\";\r\nimport { PropsWithChildren, useEffect, useState } from \"react\";\r\nimport { I18nextProvider } from \"react-i18next\";\r\nimport {trackingPrint} from \"@app/model\"\r\ncheckReloadPage();\r\ni18nInit()\r\n\r\n\r\nfunction checkReloadPage(){\r\n  if(typeof window === 'undefined')return\r\n  if(getConfig().publicRuntimeConfig.isDevelopment){\r\n    return\r\n  }\r\n  if(window.location.href.indexOf('qiniu') == -1)return;\r\n  // 帮我检测url中是否包含_htmlRefreshTime的参数\r\n  // 如果没有，则添加_htmlRefresTime的参数，值为当前时间的毫秒数\r\n  const searchParams = new URL(window.location.href).searchParams\r\n  const htmlRefreshTime = searchParams.get('_htmlRefreshTime')\r\n  if (!htmlRefreshTime) {\r\n    const newUrl = new URL(window.location.href)\r\n    newUrl.searchParams.set('_htmlRefreshTime', String(Date.now()))\r\n    window.location.href = newUrl.toString()\r\n    return\r\n  }\r\n\r\n  const refreshTime = Number(htmlRefreshTime)\r\n  if (refreshTime + 2 * 60 * 1000 < Date.now()) {\r\n    const newUrl = new URL(window.location.href)\r\n    newUrl.searchParams.set('_htmlRefreshTime', String(Date.now()))\r\n    window.location.href = newUrl.toString()\r\n  }\r\n}\r\nconst dynamicKeyMap = new Map<string, boolean>();\r\nexport function AppShell({ children }: PropsWithChildren) {\r\n  const router = useRouter();\r\n  const scrollKey = 'scrollPositionInfo'\r\n  const href = window.location.href.split(\"#\")[0]\r\n  const dynamicKey = `dynamic-${href}`\r\n  const [isOpened] = useState(dynamicKeyMap.get(dynamicKey) === true)\r\n  const s = storeUtils.namespace(dynamicKey);\r\n  let o: Record<string, unknown>|undefined = s.read(dynamicKey)\r\n  if (!o) {\r\n    o = {}\r\n    s.write(dynamicKey, o)\r\n  }\r\n  o = toProxy(o)\r\n  useEffect(() => {\r\n\r\n    router.beforePopState((state) => {\r\n      s.clearAll()\r\n      return true\r\n    })\r\n  })\r\n  useEffect(() => {\r\n    s.write(dynamicKey, o)\r\n    return watchUpdates(o, () => {\r\n      s.write(dynamicKey, o)\r\n    })\r\n  }, [])\r\n\r\n  useEffect(()=>{\r\n    trackingPrint({params:{\r\n      type:\"页面进入\",\r\n      title:\"页面\",\r\n      subtitle:\"发送者-AppShell\",\r\n      extra:{\r\n        href:window.location.href\r\n      }\r\n    }})\r\n  }, [])\r\n  useEffect(() => {\r\n    const info = (s.read(scrollKey) || { x: 0, y: 0 }) as IPageScrollPosition\r\n    // console.log('app shell scroll info info = ', info)\r\n    if (info.x == 0 && info.y == 0) {\r\n      listenScroll()\r\n    } else {\r\n      window.requestAnimationFrame(() => {\r\n        if(isOpened){\r\n          window.scrollTo(info.x, info.y)\r\n        }\r\n        listenScroll()\r\n      })\r\n    }\r\n    function onScroll(e: Event) {\r\n      // console.log('app shell on scroll', { x: window.scrollX, y: window.scrollY })\r\n      s.write(scrollKey, { x: window.scrollX, y: window.scrollY })\r\n    }\r\n    function listenScroll() {\r\n      window.addEventListener('scroll', onScroll)\r\n    }\r\n\r\n    function unsub() {\r\n      window.removeEventListener('scroll', onScroll)\r\n    }\r\n    return unsub\r\n  });\r\n  useEffect(()=>{\r\n    dynamicKeyMap.set(dynamicKey, true)\r\n  },[])\r\n  return (\r\n    <StorePageContext value={s}>\r\n      <StorePageDynamicContext value={o}>\r\n\r\n        <I18nextProvider i18n={i18n}>\r\n          {children}\r\n        </I18nextProvider>\r\n      </StorePageDynamicContext>\r\n    </StorePageContext>\r\n  )\r\n}","\r\nconst map:Record<string, string> = {}\r\n    // 这里可以添加需要映射的文件路径   \r\nexport const fileMapUtils ={\r\n    map,\r\n    getFile(src:string):string{\r\n        return this.map[src] || src;\r\n    }\r\n}","\"use client\";\r\n// 现在用的是这个文件\r\nimport { initReactI18next } from \"react-i18next\";\r\n\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\nimport Backend, { type HttpBackendOptions } from \"i18next-http-backend\";\r\n\r\nimport i18next from \"i18next\";\r\nimport { Log } from \"../log/Log\";\r\nimport { getBuildTime, isServer } from \"../nextjs/env/env\";\r\nimport { fileMapUtils } from \"../utils\";\r\n;\r\nexport { useTranslation } from 'react-i18next';\r\nlet fileDateVersion:string = ''// = getConfig().publicRuntimeConfig?.version\r\nexport const i18nLogger = new Log(false, `i18n`);\r\nconst windowHref = (()=>{\r\n  if(typeof window === 'undefined')return ''\r\n  const u = new URL(window.location.href || window.parent?.location.href);\r\n  // 同域文本iframe里的页面会获取不到href，所以判断一下直接用父级的就行.\r\n  return u.origin == null || u.origin == 'null' ? '' : u.origin\r\n})()\r\nconst backendOptions = {\r\n  loadPath: function (lngs: string[], namespaces: string[]) {\r\n    const log = i18nLogger.sub(false, `i18n loadpath`);\r\n    log.pause = true;\r\n    const lng = lngs[0]\r\n    let p = ``\r\n    // p = `/options/_locales/${lngs[0].replace(\"-\", \"_\")}/messages.json`;\r\n    // p = `/locales/zh-CN/ns1/content.json`;\r\n    // p = `locales/${lng}/${namespaces[0]}.json?v=${fileDateVersion}`\r\n    const ps = namespaces[0].split('/')\r\n    ps.splice(ps.length - 1, 0, lng)\r\n    // p = `locales/${ps.join('/')}.json?v=${fileDateVersion}`\r\n    // p = `locales/${ps.join('/')}.json?v=${getBuildTime()}`\r\n    p = `locales/${ps.join('/')}.json`\r\n    log.log(`lngs=`, lngs);\r\n    log.log(`namespaces=`, namespaces);\r\n    log.log(\"p=\", p);\r\n    p = fileMapUtils.getFile(`/${p}`);\r\n    // console.log('map p=', p)\r\n    p = `${windowHref}/${p}`\r\n    return p;\r\n\r\n  },\r\n  parse: function (\r\n    data: string,\r\n    languages?: string | string[],\r\n    namespaces?: string | string[]\r\n  ) {\r\n    const log = i18nLogger.sub(false, `i18n backend parse`);\r\n    log.pause = true;\r\n    // log.log(`parrrse`, data, languages, namespaces);\r\n    const l = JSON.parse(data);\r\n    log.print(`before set i18ndata`);\r\n    // i18nData = l as II18n;\r\n    // log.log(`i18nData.rule.scripts.sys.rules`, i18nData.rule.scripts.sys.rules);\r\n    log.log(`parrrse`, languages, namespaces);\r\n    return l;\r\n  },\r\n};\r\nconst backend = new Backend();\r\nbackend.init(null, backendOptions);\r\nexport const i18n = i18next;\r\n// export const resources: Resource = {\r\n//   // 'zh-CN': {\r\n//   //   translation: _.merge({}, zhCN),\r\n//   // },\r\n//   // en: {\r\n//   //   translation: _.merge({}, en),\r\n//   // },\r\n// };\r\n\r\n\r\ni18n.on(\"languageChanged\", async function (lng) {\r\n  const log = i18nLogger.sub(false, `onlanguageChanged`);\r\n  log.pause = true;\r\n  log.log(`lllllng`, lng);\r\n  // lng = \"en\";\r\n  // const p = `/options/_locales/${lng.replace(\"-\", \"_\")}/messages.json`;\r\n});\r\n\r\n\r\n\r\n\r\nexport function i18nInit(_fileDateVersion:string=''){\r\n  fileDateVersion = _fileDateVersion\r\n  i18n\r\n  .use(LanguageDetector)\r\n  .use(backend)\r\n  .use(initReactI18next)\r\n  .init<HttpBackendOptions>({\r\n    load: \"currentOnly\",\r\n    // load: \"all\",\r\n    // supportedLngs: ['zh-CN', 'zh-TW', 'en', 'en-GB', 'ja'],\r\n    // resources,\r\n    fallbackLng: isServer ? \"en\" : \"zh-CN\",\r\n    // fallbackLng: \"zh-CN\",\r\n    // lng: \"zh-CN\",\r\n    partialBundledLanguages:true,\r\n    ns:[],\r\n    \r\n    debug: false,\r\n    interpolation: {\r\n      escapeValue: false, // not needed for react as it escapes by default\r\n    },\r\n    detection: {\r\n      caches: [\"localStorage\"],\r\n    },\r\n  });\r\n}\r\ni18n.on(\"missingKey\", function (lngs, namespace, key, res) {\r\n  console.error(\r\n    \"i18n mssing key, lngs=%s, namespace=%s, key=%s, res=%s\",\r\n    lngs,\r\n    namespace,\r\n    key,\r\n    res\r\n  );\r\n});\r\n\r\ni18n.on(\"loaded\", function (loaded) {\r\n  const log = i18nLogger.sub(false, `onloaded`);\r\n  log.pause = true;\r\n  log.log(`onloaded arguments`, loaded);\r\n});\r\n\r\ni18n.on(\"failedLoading\", function (lng, ns, msg) {\r\n  const log = i18nLogger.sub(false, `onfailedLoading`);\r\n  log.pause = true;\r\n  log.log(`failedLoading arguments`, lng, ns, msg);\r\n});\r\n\r\ni18n.on(\"added\", function () {\r\n  console.log('added', arguments)\r\n});   \r\n\r\nexport default i18n;","import { createContext } from \"react\";\r\nimport { storeUtils } from \"./store-utils\";\r\n// import { storeUtils } from \"./store\";\r\nconst s = storeUtils.namespace('store-page-context')\r\n\r\nexport interface IPageScrollPosition{\r\n    x:number\r\n    y:number\r\n}\r\n\r\nfunction create(){\r\n    return createContext(s)\r\n}\r\nexport const StorePageContext = createContext<any>(s)\r\n\r\nexport const StorePageDynamicContext = createContext<Record<string, any>>({})","import { isDev, loadI18nValue, useTranslation } from '@fanfanlo';\r\nimport { Box, Button, Container } from '@mui/material';\r\nimport { createContext, PropsWithChildren, useContext, useEffect } from 'react';\r\nimport { ITitleI18nConf } from '.';\r\n\r\n\r\nfunction Reload(){\r\n  if(!isDev)return <>  </>\r\n  const {t} = useTranslation(\"app-ui/components/page/content\")\r\n  return(\r\n    <Box>\r\n      <Button onClick={() => {window.location.reload()}}>{t(\"PageContent.refresh\")}</Button>\r\n      {new Date().toLocaleString()}\r\n    </Box>\r\n  )\r\n}\r\n\r\nconst ScrollP = createContext({ x: 0, y: 0 });\r\nlet index = 0;\r\nexport default function PageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren) {\r\n  index++;\r\n  const scroll = useContext(ScrollP);\r\n  const clazz = `${Date.now() + Math.random() * Date.now()}`;\r\n  useEffect(()=>{\r\n    async function loadTitle(){\r\n      if(!titleConf)return\r\n      let title = titleConf.title\r\n      if(titleConf.ns){\r\n        title = await loadI18nValue(titleConf.ns, titleConf.key || \"content.title\")\r\n      }\r\n      if(!title)return\r\n      document.title = title\r\n    }\r\n    loadTitle()\r\n  }, [])\r\n  useEffect(() => {\r\n    const container = document.getElementsByClassName(clazz)[0];\r\n    if (!container) return;\r\n    container.scrollTop = scroll.y;\r\n    const onScroll = () => {\r\n      var scrollTop = container.scrollTop;\r\n      scroll.y = scrollTop;\r\n    };\r\n    container.removeEventListener('scroll', onScroll);\r\n    container.addEventListener('scroll', onScroll, { passive: true });\r\n    return () => container.removeEventListener('scroll', onScroll);\r\n  }, [clazz, scroll]);\r\n  return (\r\n\r\n    <Container className={clazz} sx={{ \r\n      height: '100%',\r\n      overflow: 'auto', \r\n      padding: \"0px\",\r\n      display: 'flex',\r\n      flexDirection: 'column'\r\n    }}>\r\n      <Box>\r\n        {(reload || (reload == undefined)) && <Reload />}\r\n        \r\n        {children}\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n","import { PropsWithChildren } from \"react\";\r\nimport PageContent from \"./PageContent\";\r\nimport { ITitleI18nConf } from \".\";\r\nexport default function AndroidPageContent({ children, titleConf, reload }: {titleConf?:ITitleI18nConf, reload?: boolean} & PropsWithChildren)  {\r\n    return (\r\n        <PageContent titleConf={titleConf} reload={reload}>\r\n            {children}\r\n        </PageContent>\r\n    )\r\n}\r\n"],"names":["initialize","IFrameContainer","fitIframe","initializeResultList","bodyMargin","bodyPadding","offsetSize","iframeId","loadContent","content","htmlBuilder","currentLoadCallback","currentErrorCallback","resizeScript","topScript","bodyStyle","idScript","fullContent","includes","replace","c","blob","Blob","type","url","URL","createObjectURL","blobUrl","iframe","src","template","s","setMinSize","minWidth","minHeight","setMaxSize","maxWidth","maxHeight","handleIframeMessage","event","resizeEnabled","originalState","isFullscreen","data","height","width","windowMaxWidth","window","innerWidth","Math","max","min","container","style","loadUrl","onLoad","onError","console","error","loadUrlAsContent","response","fetch","ok","Error","status","text","getContainer","setSize","enterFullscreen","position","top","left","zIndex","overflow","border","margin","padding","boxSizing","exitFullscreen","contentWindow","postMessage","toggleFullscreen","enableResize","enabled","exit","clone","cloneNode","replaceWith","remove","revokeObjectURL","undefined","log","constructor","random","toString","substr","document","createElement","controller","setAttribute","onload","onerror","source","lineno","colno","err","appendChild","id","addEventListener","bind","React","useEffect","useRef","useState","Box","CircularProgress","Typography","Alert","IFrameReactContainer","className","urlAsContent","containerRef","iframeContainerRef","iframeLoading","setIframeLoading","iframeError","setIframeError","current","removeChild","iframeContainer","loadContentOrUrl","handleLoad","handleError","unknownError","div","ref","sx","display","justifyContent","alignItems","size","variant","ml","severity","m","message","request","tms","trackingPrint","opts","res","TTracking","MTrackingPrint","params","gateway","handler","i18n","i18nInit","StorePageContext","StorePageDynamicContext","toProxy","watchUpdates","storeUtils","useRouter","getConfig","I18nextProvider","checkReloadPage","publicRuntimeConfig","isDevelopment","location","href","indexOf","searchParams","htmlRefreshTime","get","newUrl","set","String","Date","now","refreshTime","Number","dynamicKeyMap","Map","AppShell","children","router","scrollKey","split","dynamicKey","isOpened","namespace","o","read","write","beforePopState","state","clearAll","title","subtitle","extra","info","x","y","listenScroll","requestAnimationFrame","scrollTo","onScroll","e","scrollX","scrollY","unsub","removeEventListener","value","map","fileMapUtils","getFile","initReactI18next","LanguageDetector","Backend","i18next","Log","isServer","useTranslation","fileDateVersion","i18nLogger","windowHref","u","parent","origin","backendOptions","loadPath","lngs","namespaces","sub","pause","lng","p","ps","splice","length","join","parse","languages","l","JSON","print","backend","init","on","_fileDateVersion","use","load","fallbackLng","partialBundledLanguages","ns","debug","interpolation","escapeValue","detection","caches","key","loaded","msg","arguments","createContext","create","isDev","loadI18nValue","Button","Container","useContext","Reload","t","onClick","reload","toLocaleString","ScrollP","index","PageContent","titleConf","scroll","clazz","loadTitle","getElementsByClassName","scrollTop","passive","flexDirection","AndroidPageContent"],"sourceRoot":"","ignoreList":[2]}